/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],e):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=e():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=e()}(globalThis,(()=>(()=>{var t=[,(t,e,n)=>{"use strict";function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=O,e.arraysToBytes=function(t){var e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];for(var n=0,r=0;r<e;r++)n+=O(t[r]);for(var a=0,i=new Uint8Array(n),o=0;o<e;o++){var s=t[o];s instanceof Uint8Array||(s="string"==typeof s?P(s):new Uint8Array(s));var l=s.byteLength;i.set(s,a),a+=l}return i},e.assert=function(t,e){t||m(e)},e.bytesToString=function(t){"object"===o(t)&&null!==t&&void 0!==t.length||m("Invalid argument for bytesToString");var e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);for(var r=[],a=0;a<e;a+=n){var i=Math.min(a+n,e),s=t.subarray(a,i);r.push(String.fromCharCode.apply(null,s))}return r.join("")},e.createPromiseCapability=function(){var t=Object.create(null),e=!1;return Object.defineProperty(t,"settled",{get:function(){return e}}),t.promise=new Promise((function(n,r){t.resolve=function(t){e=!0,n(t)},t.reject=function(t){e=!0,r(t)}})),t},e.createValidAbsoluteUrl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){var r=t.match(/\./g);r&&r.length>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=F(t)}catch(t){}}var a=e?new URL(t,e):new URL(t);if(b(a))return a}catch(t){}return null},e.escapeString=function(t){return t.replace(/([()\\\n\r])/g,(function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\".concat(t)}))},e.getModificationDate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")];return e.join("")},e.getVerbosityLevel=function(){return y},e.info=function(t){y>=v.INFOS&&console.log("Info: ".concat(t))},e.isArrayBuffer=function(t){return"object"===o(t)&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.objectFromMap=function(t){var e,n=Object.create(null),r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(t);try{for(r.s();!(e=r.n()).done;){var i=(l=e.value,u=2,function(t){if(Array.isArray(t))return t}(l)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(l,u)||a(l,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],s=i[1];n[o]=s}}catch(t){r.e(t)}finally{r.f()}var l,u;return n},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(y=t)},e.shadow=w,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=P,e.stringToPDFString=function(t){if(t[0]>="ï"){var e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{var n=new TextDecoder(e,{fatal:!0}),r=P(t);return n.decode(r)}catch(t){g('stringToPDFString: "'.concat(t,'".'))}}for(var a=[],i=0,o=t.length;i<o;i++){var s=L[t.charCodeAt(i)];a.push(s?String.fromCharCode(s):t.charAt(i))}return a.join("")},e.stringToUTF16BEString=function(t){for(var e=["þÿ"],n=0,r=t.length;n<r;n++){var a=t.charCodeAt(n);e.push(String.fromCharCode(a>>8&255),String.fromCharCode(255&a))}return e.join("")},e.stringToUTF8String=F,e.unreachable=m,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=g,n(2);e.IDENTITY_MATRIX=[1,0,0,1,0,0];e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];e.LINE_FACTOR=1.35;e.LINE_DESCENT_FACTOR=.35;e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationEditorPrefix="pdfjs_internal_editor_";e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReplyType={GROUP:"Group",REPLY:"R"};e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.PageActionEventType={O:"PageOpen",C:"PageClose"};e.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var v={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=v;e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var y=v.WARNINGS;function g(t){y>=v.WARNINGS&&console.log("Warning: ".concat(t))}function m(t){throw new Error(t)}function b(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function w(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}var A=function(){function t(e,n){this.constructor===t&&m("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();e.BaseException=A;var k=function(t){c(n,t);var e=f(n);function n(t,r){var a;return u(this,n),(a=e.call(this,t,"PasswordException")).code=r,a}return l(n)}(A);e.PasswordException=k;var x=function(t){c(n,t);var e=f(n);function n(t,r){var a;return u(this,n),(a=e.call(this,t,"UnknownErrorException")).details=r,a}return l(n)}(A);e.UnknownErrorException=x;var _=function(t){c(n,t);var e=f(n);function n(t){return u(this,n),e.call(this,t,"InvalidPDFException")}return l(n)}(A);e.InvalidPDFException=_;var S=function(t){c(n,t);var e=f(n);function n(t){return u(this,n),e.call(this,t,"MissingPDFException")}return l(n)}(A);e.MissingPDFException=S;var E=function(t){c(n,t);var e=f(n);function n(t,r){var a;return u(this,n),(a=e.call(this,t,"UnexpectedResponseException")).status=r,a}return l(n)}(A);e.UnexpectedResponseException=E;var T=function(t){c(n,t);var e=f(n);function n(t){return u(this,n),e.call(this,t,"FormatError")}return l(n)}(A);e.FormatError=T;var C=function(t){c(n,t);var e=f(n);function n(t){return u(this,n),e.call(this,t,"AbortException")}return l(n)}(A);function P(t){"string"!=typeof t&&m("Invalid argument for stringToBytes");for(var e=t.length,n=new Uint8Array(e),r=0;r<e;++r)n[r]=255&t.charCodeAt(r);return n}function O(t){return void 0!==t.length?t.length:void 0!==t.byteLength?t.byteLength:void m("Invalid argument for arrayByteLength")}e.AbortException=C;var M=function(){function t(){u(this,t)}return l(t,null,[{key:"isLittleEndian",get:function(){return w(this,"isLittleEndian",((t=new Uint8Array(4))[0]=1,1===new Uint32Array(t.buffer,0,1)[0]));var t}},{key:"isEvalSupported",get:function(){return w(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return w(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}}]),t}();e.FeatureTest=M;var R=r(Array(256).keys()).map((function(t){return t.toString(16).padStart(2,"0")})),I=function(){function t(){u(this,t)}return l(t,null,[{key:"makeHexColor",value:function(t,e,n){return"#".concat(R[t]).concat(R[e]).concat(R[n])}},{key:"scaleMinMax",value:function(t,e){var n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[2],e[2]=n,n=e[1],e[1]=e[3],e[3]=n,t[1]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}},{key:"transform",value:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}},{key:"applyTransform",value:function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}},{key:"applyInverseTransform",value:function(t,e){var n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}},{key:"getAxialAlignedBoundingBox",value:function(e,n){var r=t.applyTransform(e,n),a=t.applyTransform(e.slice(2,4),n),i=t.applyTransform([e[0],e[3]],n),o=t.applyTransform([e[2],e[1]],n);return[Math.min(r[0],a[0],i[0],o[0]),Math.min(r[1],a[1],i[1],o[1]),Math.max(r[0],a[0],i[0],o[0]),Math.max(r[1],a[1],i[1],o[1])]}},{key:"inverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}},{key:"apply3dTransform",value:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}},{key:"singularValueDecompose2dScale",value:function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],i=t[2]*e[1]+t[3]*e[3],o=(n+i)/2,s=Math.sqrt(Math.pow(n+i,2)-4*(n*i-a*r))/2,l=o+s||1,u=o-s||1;return[Math.sqrt(l),Math.sqrt(u)]}},{key:"normalizeRect",value:function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}},{key:"intersect",value:function(t,e){var n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;var a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),i=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>i?null:[n,a,r,i]}},{key:"bezierBoundingBox",value:function(t,e,n,a,i,o,s,l){for(var u,c,h,f,d,p,v,y,g=[],m=[[],[]],b=0;b<2;++b)if(0===b?(c=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*s,h=3*n-3*t):(c=6*e-12*a+6*o,u=-3*e+9*a-9*o+3*l,h=3*a-3*e),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;0<(f=-h/c)&&f<1&&g.push(f)}else v=c*c-4*h*u,y=Math.sqrt(v),v<0||(0<(d=(-c+y)/(2*u))&&d<1&&g.push(d),0<(p=(-c-y)/(2*u))&&p<1&&g.push(p));for(var w,A=g.length,k=A;A--;)w=1-(f=g[A]),m[0][A]=w*w*w*t+3*w*w*f*n+3*w*f*f*i+f*f*f*s,m[1][A]=w*w*w*e+3*w*w*f*a+3*w*f*f*o+f*f*f*l;return m[0][k]=t,m[1][k]=e,m[0][k+1]=s,m[1][k+1]=l,m[0].length=m[1].length=k+2,[Math.min.apply(Math,r(m[0])),Math.min.apply(Math,r(m[1])),Math.max.apply(Math,r(m[0])),Math.max.apply(Math,r(m[1]))]}}]),t}();e.Util=I;var L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function F(t){return decodeURIComponent(escape(t))}},(t,e,n)=>{"use strict";var r=n(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,!globalThis.btoa&&r.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")}),!globalThis.atob&&r.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")}),!globalThis.DOMMatrix&&r.isNodeJS&&(globalThis.DOMMatrix=require("dommatrix/dist/dommatrix.js")),!globalThis.ReadableStream&&r.isNodeJS&&(globalThis.ReadableStream=require("web-streams-polyfill/dist/ponyfill.js").ReadableStream),Array.prototype.at||n(4),Uint8Array.prototype.at||n(76),globalThis.structuredClone||n(86))},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;e.isNodeJS=!1},(t,e,n)=>{n(5);var r=n(75);t.exports=r("Array","at")},(t,e,n)=>{"use strict";var r=n(6),a=n(41),i=n(65),o=n(63),s=n(70);r({target:"Array",proto:!0},{at:function(t){var e=a(this),n=i(e),r=o(t),s=r>=0?r:n+r;return s<0||s>=n?void 0:e[s]}}),s("at")},(t,e,n)=>{var r=n(7),a=n(8).f,i=n(45),o=n(49),s=n(39),l=n(57),u=n(69);t.exports=function(t,e){var n,c,h,f,d,p=t.target,v=t.global,y=t.stat;if(n=v?r:y?r[p]||s(p,{}):(r[p]||{}).prototype)for(c in e){if(f=e[c],h=t.dontCallGetSet?(d=a(n,c))&&d.value:n[c],!u(v?c:p+(y?".":"#")+c,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;l(f,h)}(t.sham||h&&h.sham)&&i(f,"sham",!0),o(n,c,f,t)}}},t=>{var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(t,e,n)=>{var r=n(9),a=n(11),i=n(13),o=n(14),s=n(15),l=n(20),u=n(40),c=n(43),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=s(t),e=l(e),c)try{return h(t,e)}catch(t){}if(u(t,e))return o(!a(i.f,t,e),t[e])}},(t,e,n)=>{var r=n(10);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},(t,e,n)=>{var r=n(12),a=Function.prototype.call;t.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},(t,e,n)=>{var r=n(10);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},(t,e)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);e.f=a?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},(t,e,n)=>{var r=n(16),a=n(19);t.exports=function(t){return r(a(t))}},(t,e,n)=>{var r=n(17),a=n(10),i=n(18),o=Object,s=r("".split);t.exports=a((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?s(t,""):o(t)}:o},(t,e,n)=>{var r=n(12),a=Function.prototype,i=a.bind,o=a.call,s=r&&i.bind(o,o);t.exports=r?function(t){return t&&s(t)}:function(t){return t&&function(){return o.apply(t,arguments)}}},(t,e,n)=>{var r=n(17),a=r({}.toString),i=r("".slice);t.exports=function(t){return i(a(t),8,-1)}},t=>{var e=TypeError;t.exports=function(t){if(null==t)throw e("Can't call method on "+t);return t}},(t,e,n)=>{var r=n(21),a=n(24);t.exports=function(t){var e=r(t,"string");return a(e)?e:e+""}},(t,e,n)=>{var r=n(11),a=n(22),i=n(24),o=n(31),s=n(34),l=n(35),u=TypeError,c=l("toPrimitive");t.exports=function(t,e){if(!a(t)||i(t))return t;var n,l=o(t,c);if(l){if(void 0===e&&(e="default"),n=r(l,t,e),!a(n)||i(n))return n;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},(t,e,n)=>{var r=n(23);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},t=>{t.exports=function(t){return"function"==typeof t}},(t,e,n)=>{var r=n(25),a=n(23),i=n(26),o=n(27),s=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return a(e)&&i(e.prototype,s(t))}},(t,e,n)=>{var r=n(7),a=n(23),i=function(t){return a(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},(t,e,n)=>{var r=n(17);t.exports=r({}.isPrototypeOf)},(t,e,n)=>{var r=n(28);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,e,n)=>{var r=n(29),a=n(10);t.exports=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},(t,e,n)=>{var r,a,i=n(7),o=n(30),s=i.process,l=i.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(a=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(a=+r[1]),t.exports=a},(t,e,n)=>{var r=n(25);t.exports=r("navigator","userAgent")||""},(t,e,n)=>{var r=n(32);t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},(t,e,n)=>{var r=n(23),a=n(33),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(a(t)+" is not a function")}},t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},(t,e,n)=>{var r=n(11),a=n(23),i=n(22),o=TypeError;t.exports=function(t,e){var n,s;if("string"===e&&a(n=t.toString)&&!i(s=r(n,t)))return s;if(a(n=t.valueOf)&&!i(s=r(n,t)))return s;if("string"!==e&&a(n=t.toString)&&!i(s=r(n,t)))return s;throw o("Can't convert object to primitive value")}},(t,e,n)=>{var r=n(7),a=n(36),i=n(40),o=n(42),s=n(28),l=n(27),u=a("wks"),c=r.Symbol,h=c&&c.for,f=l?c:c&&c.withoutSetter||o;t.exports=function(t){if(!i(u,t)||!s&&"string"!=typeof u[t]){var e="Symbol."+t;s&&i(c,t)?u[t]=c[t]:u[t]=l&&h?h(e):f(e)}return u[t]}},(t,e,n)=>{var r=n(37),a=n(38);(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.24.1",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=!1},(t,e,n)=>{var r=n(7),a=n(39),i="__core-js_shared__",o=r[i]||a(i,{});t.exports=o},(t,e,n)=>{var r=n(7),a=Object.defineProperty;t.exports=function(t,e){try{a(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},(t,e,n)=>{var r=n(17),a=n(41),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(a(t),e)}},(t,e,n)=>{var r=n(19),a=Object;t.exports=function(t){return a(r(t))}},(t,e,n)=>{var r=n(17),a=0,i=Math.random(),o=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++a+i,36)}},(t,e,n)=>{var r=n(9),a=n(10),i=n(44);t.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},(t,e,n)=>{var r=n(7),a=n(22),i=r.document,o=a(i)&&a(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},(t,e,n)=>{var r=n(9),a=n(46),i=n(14);t.exports=r?function(t,e,n){return a.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},(t,e,n)=>{var r=n(9),a=n(43),i=n(47),o=n(48),s=n(20),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h="enumerable",f="configurable",d="writable";e.f=r?i?function(t,e,n){if(o(t),e=s(e),o(n),"function"==typeof t&&"prototype"===e&&"value"in n&&d in n&&!n.writable){var r=c(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:f in n?n.configurable:r.configurable,enumerable:h in n?n.enumerable:r.enumerable,writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(o(t),e=s(e),o(n),a)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},(t,e,n)=>{var r=n(9),a=n(10);t.exports=r&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(t,e,n)=>{var r=n(22),a=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw i(a(t)+" is not an object")}},(t,e,n)=>{var r=n(23),a=n(46),i=n(50),o=n(39);t.exports=function(t,e,n,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:e;if(r(n)&&i(n,u,s),s.global)l?t[e]=n:o(e,n);else{try{s.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=n:a.f(t,e,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},(t,e,n)=>{var r=n(10),a=n(23),i=n(40),o=n(9),s=n(51).CONFIGURABLE,l=n(52),u=n(53),c=u.enforce,h=u.get,f=Object.defineProperty,d=o&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),p=String(String).split("String"),v=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!i(t,"name")||s&&t.name!==e)&&(o?f(t,"name",{value:e,configurable:!0}):t.name=e),d&&n&&i(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&i(n,"constructor")&&n.constructor?o&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=c(t);return i(r,"source")||(r.source=p.join("string"==typeof e?e:"")),t};Function.prototype.toString=v((function(){return a(this)&&h(this).source||l(this)}),"toString")},(t,e,n)=>{var r=n(9),a=n(40),i=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,s=a(i,"name"),l=s&&"something"===function(){}.name,u=s&&(!r||r&&o(i,"name").configurable);t.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},(t,e,n)=>{var r=n(17),a=n(23),i=n(38),o=r(Function.toString);a(i.inspectSource)||(i.inspectSource=function(t){return o(t)}),t.exports=i.inspectSource},(t,e,n)=>{var r,a,i,o=n(54),s=n(7),l=n(17),u=n(22),c=n(45),h=n(40),f=n(38),d=n(55),p=n(56),v="Object already initialized",y=s.TypeError,g=s.WeakMap;if(o||f.state){var m=f.state||(f.state=new g),b=l(m.get),w=l(m.has),A=l(m.set);r=function(t,e){if(w(m,t))throw new y(v);return e.facade=t,A(m,t,e),e},a=function(t){return b(m,t)||{}},i=function(t){return w(m,t)}}else{var k=d("state");p[k]=!0,r=function(t,e){if(h(t,k))throw new y(v);return e.facade=t,c(t,k,e),e},a=function(t){return h(t,k)?t[k]:{}},i=function(t){return h(t,k)}}t.exports={set:r,get:a,has:i,enforce:function(t){return i(t)?a(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=a(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return n}}}},(t,e,n)=>{var r=n(7),a=n(23),i=n(52),o=r.WeakMap;t.exports=a(o)&&/native code/.test(i(o))},(t,e,n)=>{var r=n(36),a=n(42),i=r("keys");t.exports=function(t){return i[t]||(i[t]=a(t))}},t=>{t.exports={}},(t,e,n)=>{var r=n(40),a=n(58),i=n(8),o=n(46);t.exports=function(t,e,n){for(var s=a(e),l=o.f,u=i.f,c=0;c<s.length;c++){var h=s[c];r(t,h)||n&&r(n,h)||l(t,h,u(e,h))}}},(t,e,n)=>{var r=n(25),a=n(17),i=n(59),o=n(68),s=n(48),l=a([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=o.f;return n?l(e,n(t)):e}},(t,e,n)=>{var r=n(60),a=n(67).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},(t,e,n)=>{var r=n(17),a=n(40),i=n(15),o=n(61).indexOf,s=n(56),l=r([].push);t.exports=function(t,e){var n,r=i(t),u=0,c=[];for(n in r)!a(s,n)&&a(r,n)&&l(c,n);for(;e.length>u;)a(r,n=e[u++])&&(~o(c,n)||l(c,n));return c}},(t,e,n)=>{var r=n(15),a=n(62),i=n(65),o=function(t){return function(e,n,o){var s,l=r(e),u=i(l),c=a(o,u);if(t&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},(t,e,n)=>{var r=n(63),a=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?a(n+e,0):i(n,e)}},(t,e,n)=>{var r=n(64);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},t=>{var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},(t,e,n)=>{var r=n(66);t.exports=function(t){return r(t.length)}},(t,e,n)=>{var r=n(63),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,e)=>{e.f=Object.getOwnPropertySymbols},(t,e,n)=>{var r=n(10),a=n(23),i=/#|\.prototype\./,o=function(t,e){var n=l[s(t)];return n==c||n!=u&&(a(e)?r(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},(t,e,n)=>{var r=n(35),a=n(71),i=n(46).f,o=r("unscopables"),s=Array.prototype;null==s[o]&&i(s,o,{configurable:!0,value:a(null)}),t.exports=function(t){s[o][t]=!0}},(t,e,n)=>{var r,a=n(48),i=n(72),o=n(67),s=n(56),l=n(74),u=n(44),c=n(55),h=c("IE_PROTO"),f=function(){},d=function(t){return"<script>"+t+"</"+"script>"},p=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;v="undefined"!=typeof document?document.domain&&r?p(r):((e=u("iframe")).style.display="none",l.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):p(r);for(var n=o.length;n--;)delete v.prototype[o[n]];return v()};s[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(f.prototype=a(t),n=new f,f.prototype=null,n[h]=t):n=v(),void 0===e?n:i.f(n,e)}},(t,e,n)=>{var r=n(9),a=n(47),i=n(46),o=n(48),s=n(15),l=n(73);e.f=r&&!a?Object.defineProperties:function(t,e){o(t);for(var n,r=s(e),a=l(e),u=a.length,c=0;u>c;)i.f(t,n=a[c++],r[n]);return t}},(t,e,n)=>{var r=n(60),a=n(67);t.exports=Object.keys||function(t){return r(t,a)}},(t,e,n)=>{var r=n(25);t.exports=r("document","documentElement")},(t,e,n)=>{var r=n(7),a=n(17);t.exports=function(t,e){return a(r[t].prototype[e])}},(t,e,n)=>{n(77)},(t,e,n)=>{"use strict";var r=n(78),a=n(65),i=n(63),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(t){var e=o(this),n=a(e),r=i(t),s=r>=0?r:n+r;return s<0||s>=n?void 0:e[s]}))},(t,e,n)=>{"use strict";var r,a,i,o=n(79),s=n(9),l=n(7),u=n(23),c=n(22),h=n(40),f=n(80),d=n(33),p=n(45),v=n(49),y=n(46).f,g=n(26),m=n(82),b=n(84),w=n(35),A=n(42),k=n(53),x=k.enforce,_=k.get,S=l.Int8Array,E=S&&S.prototype,T=l.Uint8ClampedArray,C=T&&T.prototype,P=S&&m(S),O=E&&m(E),M=Object.prototype,R=l.TypeError,I=w("toStringTag"),L=A("TYPED_ARRAY_TAG"),F="TypedArrayConstructor",j=o&&!!b&&"Opera"!==f(l.opera),D=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},U=function(t){var e=m(t);if(c(e)){var n=_(e);return n&&h(n,F)?n.TypedArrayConstructor:U(e)}},W=function(t){if(!c(t))return!1;var e=f(t);return h(N,e)||h(B,e)};for(r in N)(i=(a=l[r])&&a.prototype)?x(i).TypedArrayConstructor=a:j=!1;for(r in B)(i=(a=l[r])&&a.prototype)&&(x(i).TypedArrayConstructor=a);if((!j||!u(P)||P===Function.prototype)&&(P=function(){throw R("Incorrect invocation")},j))for(r in N)l[r]&&b(l[r],P);if((!j||!O||O===M)&&(O=P.prototype,j))for(r in N)l[r]&&b(l[r].prototype,O);if(j&&m(C)!==O&&b(C,O),s&&!h(O,I))for(r in D=!0,y(O,I,{get:function(){return c(this)?this[L]:void 0}}),N)l[r]&&p(l[r],L,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:D&&L,aTypedArray:function(t){if(W(t))return t;throw R("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!b||g(P,t)))return t;throw R(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(s){if(n)for(var a in N){var i=l[a];if(i&&h(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=e}catch(t){}}}O[t]&&!n||v(O,t,n?e:j&&E[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,a;if(s){if(b){if(n)for(r in N)if((a=l[r])&&h(a,t))try{delete a[t]}catch(t){}if(P[t]&&!n)return;try{return v(P,t,n?e:j&&P[t]||e)}catch(t){}}for(r in N)!(a=l[r])||a[t]&&!n||v(a,t,e)}},getTypedArrayConstructor:U,isView:function(t){if(!c(t))return!1;var e=f(t);return"DataView"===e||h(N,e)||h(B,e)},isTypedArray:W,TypedArray:P,TypedArrayPrototype:O}},t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(t,e,n)=>{var r=n(81),a=n(23),i=n(18),o=n(35)("toStringTag"),s=Object,l="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=s(t),o))?n:l?i(e):"Object"==(r=i(e))&&a(e.callee)?"Arguments":r}},(t,e,n)=>{var r={};r[n(35)("toStringTag")]="z",t.exports="[object z]"===String(r)},(t,e,n)=>{var r=n(40),a=n(23),i=n(41),o=n(55),s=n(83),l=o("IE_PROTO"),u=Object,c=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=i(t);if(r(e,l))return e[l];var n=e.constructor;return a(n)&&e instanceof n?n.prototype:e instanceof u?c:null}},(t,e,n)=>{var r=n(10);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},(t,e,n)=>{var r=n(17),a=n(48),i=n(85);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return a(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},(t,e,n)=>{var r=n(23),a=String,i=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw i("Can't set "+a(t)+" as a prototype")}},(t,e,n)=>{n(87),n(93),n(95),n(117),n(119);var r=n(128);t.exports=r.structuredClone},(t,e,n)=>{"use strict";var r=n(15),a=n(70),i=n(88),o=n(53),s=n(46).f,l=n(89),u=n(37),c=n(9),h="Array Iterator",f=o.set,d=o.getterFor(h);t.exports=l(Array,"Array",(function(t,e){f(this,{type:h,target:r(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var p=i.Arguments=i.Array;if(a("keys"),a("values"),a("entries"),!u&&c&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch(t){}},t=>{t.exports={}},(t,e,n)=>{"use strict";var r=n(6),a=n(11),i=n(37),o=n(51),s=n(23),l=n(90),u=n(82),c=n(84),h=n(92),f=n(45),d=n(49),p=n(35),v=n(88),y=n(91),g=o.PROPER,m=o.CONFIGURABLE,b=y.IteratorPrototype,w=y.BUGGY_SAFARI_ITERATORS,A=p("iterator"),k="keys",x="values",_="entries",S=function(){return this};t.exports=function(t,e,n,o,p,y,E){l(n,e,o);var T,C,P,O=function(t){if(t===p&&F)return F;if(!w&&t in I)return I[t];switch(t){case k:case x:case _:return function(){return new n(this,t)}}return function(){return new n(this)}},M=e+" Iterator",R=!1,I=t.prototype,L=I[A]||I["@@iterator"]||p&&I[p],F=!w&&L||O(p),j="Array"==e&&I.entries||L;if(j&&(T=u(j.call(new t)))!==Object.prototype&&T.next&&(i||u(T)===b||(c?c(T,b):s(T[A])||d(T,A,S)),h(T,M,!0,!0),i&&(v[M]=S)),g&&p==x&&L&&L.name!==x&&(!i&&m?f(I,"name",x):(R=!0,F=function(){return a(L,this)})),p)if(C={values:O(x),keys:y?F:O(k),entries:O(_)},E)for(P in C)(w||R||!(P in I))&&d(I,P,C[P]);else r({target:e,proto:!0,forced:w||R},C);return i&&!E||I[A]===F||d(I,A,F,{name:p}),v[e]=F,C}},(t,e,n)=>{"use strict";var r=n(91).IteratorPrototype,a=n(71),i=n(14),o=n(92),s=n(88),l=function(){return this};t.exports=function(t,e,n,u){var c=e+" Iterator";return t.prototype=a(r,{next:i(+!u,n)}),o(t,c,!1,!0),s[c]=l,t}},(t,e,n)=>{"use strict";var r,a,i,o=n(10),s=n(23),l=n(71),u=n(82),c=n(49),h=n(35),f=n(37),d=h("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(a=u(u(i)))!==Object.prototype&&(r=a):p=!0),null==r||o((function(){var t={};return r[d].call(t)!==t}))?r={}:f&&(r=l(r)),s(r[d])||c(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},(t,e,n)=>{var r=n(46).f,a=n(40),i=n(35)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!a(t,i)&&r(t,i,{configurable:!0,value:e})}},(t,e,n)=>{var r=n(81),a=n(49),i=n(94);r||a(Object.prototype,"toString",i,{unsafe:!0})},(t,e,n)=>{"use strict";var r=n(81),a=n(80);t.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},(t,e,n)=>{n(96)},(t,e,n)=>{"use strict";n(97)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(114))},(t,e,n)=>{"use strict";var r=n(6),a=n(7),i=n(17),o=n(69),s=n(49),l=n(98),u=n(105),c=n(111),h=n(23),f=n(22),d=n(10),p=n(112),v=n(92),y=n(113);t.exports=function(t,e,n){var g=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),b=g?"set":"add",w=a[t],A=w&&w.prototype,k=w,x={},_=function(t){var e=i(A[t]);s(A,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!f(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return m&&!f(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!f(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(o(t,!h(w)||!(m||A.forEach&&!d((function(){(new w).entries().next()})))))k=n.getConstructor(e,t,g,b),l.enable();else if(o(t,!0)){var S=new k,E=S[b](m?{}:-0,1)!=S,T=d((function(){S.has(1)})),C=p((function(t){new w(t)})),P=!m&&d((function(){for(var t=new w,e=5;e--;)t[b](e,e);return!t.has(-0)}));C||((k=e((function(t,e){c(t,A);var n=y(new w,t,k);return null!=e&&u(e,n[b],{that:n,AS_ENTRIES:g}),n}))).prototype=A,A.constructor=k),(T||P)&&(_("delete"),_("has"),g&&_("get")),(P||E)&&_(b),m&&A.clear&&delete A.clear}return x[t]=k,r({global:!0,constructor:!0,forced:k!=w},x),v(k,t),m||n.setStrong(k,t,g),k}},(t,e,n)=>{var r=n(6),a=n(17),i=n(56),o=n(22),s=n(40),l=n(46).f,u=n(59),c=n(99),h=n(102),f=n(42),d=n(104),p=!1,v=f("meta"),y=0,g=function(t){l(t,v,{value:{objectID:"O"+y++,weakData:{}}})},m=t.exports={enable:function(){m.enable=function(){},p=!0;var t=u.f,e=a([].splice),n={};n[v]=1,t(n).length&&(u.f=function(n){for(var r=t(n),a=0,i=r.length;a<i;a++)if(r[a]===v){e(r,a,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,v)){if(!h(t))return"F";if(!e)return"E";g(t)}return t[v].objectID},getWeakData:function(t,e){if(!s(t,v)){if(!h(t))return!0;if(!e)return!1;g(t)}return t[v].weakData},onFreeze:function(t){return d&&p&&h(t)&&!s(t,v)&&g(t),t}};i[v]=!0},(t,e,n)=>{var r=n(18),a=n(15),i=n(59).f,o=n(100),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"Window"==r(t)?function(t){try{return i(t)}catch(t){return o(s)}}(t):i(a(t))}},(t,e,n)=>{var r=n(62),a=n(65),i=n(101),o=Array,s=Math.max;t.exports=function(t,e,n){for(var l=a(t),u=r(e,l),c=r(void 0===n?l:n,l),h=o(s(c-u,0)),f=0;u<c;u++,f++)i(h,f,t[u]);return h.length=f,h}},(t,e,n)=>{"use strict";var r=n(20),a=n(46),i=n(14);t.exports=function(t,e,n){var o=r(e);o in t?a.f(t,o,i(0,n)):t[o]=n}},(t,e,n)=>{var r=n(10),a=n(22),i=n(18),o=n(103),s=Object.isExtensible,l=r((function(){s(1)}));t.exports=l||o?function(t){return!!a(t)&&((!o||"ArrayBuffer"!=i(t))&&(!s||s(t)))}:s},(t,e,n)=>{var r=n(10);t.exports=r((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},(t,e,n)=>{var r=n(10);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},(t,e,n)=>{var r=n(106),a=n(11),i=n(48),o=n(33),s=n(107),l=n(65),u=n(26),c=n(108),h=n(109),f=n(110),d=TypeError,p=function(t,e){this.stopped=t,this.result=e},v=p.prototype;t.exports=function(t,e,n){var y,g,m,b,w,A,k,x=n&&n.that,_=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),T=!(!n||!n.INTERRUPTED),C=r(e,x),P=function(t){return y&&f(y,"normal",t),new p(!0,t)},O=function(t){return _?(i(t),T?C(t[0],t[1],P):C(t[0],t[1])):T?C(t,P):C(t)};if(S)y=t.iterator;else if(E)y=t;else{if(!(g=h(t)))throw d(o(t)+" is not iterable");if(s(g)){for(m=0,b=l(t);b>m;m++)if((w=O(t[m]))&&u(v,w))return w;return new p(!1)}y=c(t,g)}for(A=S?t.next:y.next;!(k=a(A,y)).done;){try{w=O(k.value)}catch(t){f(y,"throw",t)}if("object"==typeof w&&w&&u(v,w))return w}return new p(!1)}},(t,e,n)=>{var r=n(17),a=n(32),i=n(12),o=r(r.bind);t.exports=function(t,e){return a(t),void 0===e?t:i?o(t,e):function(){return t.apply(e,arguments)}}},(t,e,n)=>{var r=n(35),a=n(88),i=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||o[i]===t)}},(t,e,n)=>{var r=n(11),a=n(32),i=n(48),o=n(33),s=n(109),l=TypeError;t.exports=function(t,e){var n=arguments.length<2?s(t):e;if(a(n))return i(r(n,t));throw l(o(t)+" is not iterable")}},(t,e,n)=>{var r=n(80),a=n(31),i=n(88),o=n(35)("iterator");t.exports=function(t){if(null!=t)return a(t,o)||a(t,"@@iterator")||i[r(t)]}},(t,e,n)=>{var r=n(11),a=n(48),i=n(31);t.exports=function(t,e,n){var o,s;a(t);try{if(!(o=i(t,"return"))){if("throw"===e)throw n;return n}o=r(o,t)}catch(t){s=!0,o=t}if("throw"===e)throw n;if(s)throw o;return a(o),n}},(t,e,n)=>{var r=n(26),a=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw a("Incorrect invocation")}},(t,e,n)=>{var r=n(35)("iterator"),a=!1;try{var i=0,o={next:function(){return{done:!!i++}},return:function(){a=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},(t,e,n)=>{var r=n(23),a=n(22),i=n(84);t.exports=function(t,e,n){var o,s;return i&&r(o=e.constructor)&&o!==n&&a(s=o.prototype)&&s!==n.prototype&&i(t,s),t}},(t,e,n)=>{"use strict";var r=n(46).f,a=n(71),i=n(115),o=n(106),s=n(111),l=n(105),u=n(89),c=n(116),h=n(9),f=n(98).fastKey,d=n(53),p=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,n,u){var c=t((function(t,r){s(t,d),p(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=r&&l(r,t[u],{that:t,AS_ENTRIES:n})})),d=c.prototype,y=v(e),g=function(t,e,n){var r,a,i=y(t),o=m(t,e);return o?o.value=n:(i.last=o={index:a=f(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=o),r&&(r.next=o),h?i.size++:t.size++,"F"!==a&&(i.index[a]=o)),t},m=function(t,e){var n,r=y(t),a=f(e);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==e)return n};return i(d,{clear:function(){for(var t=y(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=this,n=y(e),r=m(e,t);if(r){var a=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=a),a&&(a.previous=i),n.first==r&&(n.first=a),n.last==r&&(n.last=i),h?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=y(this),r=o(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!m(this,t)}}),i(d,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),h&&r(d,"size",{get:function(){return y(this).size}}),c},setStrong:function(t,e,n){var r=e+" Iterator",a=v(e),i=v(r);u(t,e,(function(t,e){p(this,{type:r,target:t,state:a(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),c(e)}}},(t,e,n)=>{var r=n(49);t.exports=function(t,e,n){for(var a in e)r(t,a,e[a],n);return t}},(t,e,n)=>{"use strict";var r=n(25),a=n(46),i=n(35),o=n(9),s=i("species");t.exports=function(t){var e=r(t),n=a.f;o&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},(t,e,n)=>{n(118)},(t,e,n)=>{"use strict";n(97)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(114))},(t,e,n)=>{var r,a=n(37),i=n(6),o=n(7),s=n(25),l=n(17),u=n(10),c=n(42),h=n(23),f=n(120),d=n(22),p=n(24),v=n(105),y=n(48),g=n(80),m=n(40),b=n(101),w=n(45),A=n(65),k=n(121),x=n(122),_=n(124),S=n(29),E=n(125),T=n(126),C=n(127),P=o.Object,O=o.Date,M=o.Error,R=o.EvalError,I=o.RangeError,L=o.ReferenceError,F=o.SyntaxError,j=o.TypeError,D=o.URIError,N=o.PerformanceMark,B=o.WebAssembly,U=B&&B.CompileError||M,W=B&&B.LinkError||M,G=B&&B.RuntimeError||M,q=s("DOMException"),z=s("Set"),V=s("Map"),H=V.prototype,X=l(H.has),Y=l(H.get),K=l(H.set),J=l(z.prototype.add),Q=s("Object","keys"),$=l([].push),Z=l((!0).valueOf),tt=l(1..valueOf),et=l("".valueOf),nt=l(O.prototype.getTime),rt=c("structuredClone"),at="DataCloneError",it="Transferring",ot=function(t){return!u((function(){var e=new o.Set([7]),n=t(e),r=t(P(7));return n==e||!n.has(7)||"object"!=typeof r||7!=r}))&&t},st=function(t,e){return!u((function(){var n=new e,r=t({a:n,b:n});return!(r&&r.a===r.b&&r.a instanceof e&&r.a.stack===n.stack)}))},lt=o.structuredClone,ut=a||!st(lt,M)||!st(lt,q)||(r=lt,!!u((function(){var t=r(new o.AggregateError([1],rt,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=rt||3!=t.cause}))),ct=!lt&&ot((function(t){return new N(rt,{detail:t}).detail})),ht=ot(lt)||ct,ft=function(t){throw new q("Uncloneable type: "+t,at)},dt=function(t,e){throw new q((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",at)},pt=function(t,e){if(p(t)&&ft("Symbol"),!d(t))return t;if(e){if(X(e,t))return Y(e,t)}else e=new V;var n,r,a,i,l,u,c,v,y,k,S=g(t),E=!1;switch(S){case"Array":a=[],E=!0;break;case"Object":a={},E=!0;break;case"Map":a=new V,E=!0;break;case"Set":a=new z,E=!0;break;case"RegExp":a=new RegExp(t.source,x(t));break;case"Error":switch(r=t.name){case"AggregateError":a=s("AggregateError")([]);break;case"EvalError":a=R();break;case"RangeError":a=I();break;case"ReferenceError":a=L();break;case"SyntaxError":a=F();break;case"TypeError":a=j();break;case"URIError":a=D();break;case"CompileError":a=U();break;case"LinkError":a=W();break;case"RuntimeError":a=G();break;default:a=M()}E=!0;break;case"DOMException":a=new q(t.message,t.name),E=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":n=o[S],d(n)||dt(S),a=new n(pt(t.buffer,e),t.byteOffset,"DataView"===S?t.byteLength:t.length);break;case"DOMQuad":try{a=new DOMQuad(pt(t.p1,e),pt(t.p2,e),pt(t.p3,e),pt(t.p4,e))}catch(e){ht?a=ht(t):dt(S)}break;case"FileList":if(n=o.DataTransfer,f(n)){for(i=new n,l=0,u=A(t);l<u;l++)i.items.add(pt(t[l],e));a=i.files}else ht?a=ht(t):dt(S);break;case"ImageData":try{a=new ImageData(pt(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch(e){ht?a=ht(t):dt(S)}break;default:if(ht)a=ht(t);else switch(S){case"BigInt":a=P(t.valueOf());break;case"Boolean":a=P(Z(t));break;case"Number":a=P(tt(t));break;case"String":a=P(et(t));break;case"Date":a=new O(nt(t));break;case"ArrayBuffer":(n=o.DataView)||"function"==typeof t.slice||dt(S);try{if("function"==typeof t.slice)a=t.slice(0);else for(u=t.byteLength,a=new ArrayBuffer(u),y=new n(t),k=new n(a),l=0;l<u;l++)k.setUint8(l,y.getUint8(l))}catch(t){throw new q("ArrayBuffer is detached",at)}break;case"SharedArrayBuffer":a=t;break;case"Blob":try{a=t.slice(0,t.size,t.type)}catch(t){dt(S)}break;case"DOMPoint":case"DOMPointReadOnly":n=o[S];try{a=n.fromPoint?n.fromPoint(t):new n(t.x,t.y,t.z,t.w)}catch(t){dt(S)}break;case"DOMRect":case"DOMRectReadOnly":n=o[S];try{a=n.fromRect?n.fromRect(t):new n(t.x,t.y,t.width,t.height)}catch(t){dt(S)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=o[S];try{a=n.fromMatrix?n.fromMatrix(t):new n(t)}catch(t){dt(S)}break;case"AudioData":case"VideoFrame":h(t.clone)||dt(S);try{a=t.clone()}catch(t){ft(S)}break;case"File":try{a=new File([t],t.name,t)}catch(t){dt(S)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":dt(S);default:ft(S)}}if(K(e,t,a),E)switch(S){case"Array":case"Object":for(c=Q(t),l=0,u=A(c);l<u;l++)v=c[l],b(a,v,pt(t[v],e));break;case"Map":t.forEach((function(t,n){K(a,pt(n,e),pt(t,e))}));break;case"Set":t.forEach((function(t){J(a,pt(t,e))}));break;case"Error":w(a,"message",pt(t.message,e)),m(t,"cause")&&w(a,"cause",pt(t.cause,e)),"AggregateError"==r&&(a.errors=pt(t.errors,e));case"DOMException":_&&w(a,"stack",pt(t.stack,e))}return a},vt=lt&&!u((function(){if(T&&S>92||C&&S>94||E&&S>97)return!1;var t=new ArrayBuffer(8),e=lt(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength})),yt=function(t,e){if(!d(t))throw j("Transfer option cannot be converted to a sequence");var n=[];v(t,(function(t){$(n,y(t))}));var r,a,i,s,l,u,c=0,p=A(n);if(vt)for(s=lt(n,{transfer:n});c<p;)K(e,n[c],s[c++]);else for(;c<p;){if(r=n[c++],X(e,r))throw new q("Duplicate transferable",at);switch(a=g(r)){case"ImageBitmap":i=o.OffscreenCanvas,f(i)||dt(a,it);try{(u=new i(r.width,r.height)).getContext("bitmaprenderer").transferFromImageBitmap(r),l=u.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":h(r.clone)&&h(r.close)||dt(a,it);try{l=r.clone(),r.close()}catch(t){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":dt(a,it)}if(void 0===l)throw new q("This object cannot be transferred: "+a,at);K(e,r,l)}};i({global:!0,enumerable:!0,sham:!vt,forced:ut},{structuredClone:function(t){var e,n=k(arguments.length,1)>1&&null!=arguments[1]?y(arguments[1]):void 0,r=n?n.transfer:void 0;return void 0!==r&&(e=new V,yt(r,e)),pt(t,e)}})},(t,e,n)=>{var r=n(17),a=n(10),i=n(23),o=n(80),s=n(25),l=n(52),u=function(){},c=[],h=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=r(f.exec),p=!f.exec(u),v=function(t){if(!i(t))return!1;try{return h(u,c,t),!0}catch(t){return!1}},y=function(t){if(!i(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(f,l(t))}catch(t){return!0}};y.sham=!0,t.exports=!h||a((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?y:v},t=>{var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},(t,e,n)=>{var r=n(11),a=n(40),i=n(26),o=n(123),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||a(t,"flags")||!i(s,t)?e:r(o,t)}},(t,e,n)=>{"use strict";var r=n(48);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},(t,e,n)=>{var r=n(10),a=n(14);t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",a(1,7)),7!==t.stack)}))},(t,e,n)=>{var r=n(126),a=n(127);t.exports=!r&&!a&&"object"==typeof window&&"object"==typeof document},t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(t,e,n)=>{var r=n(18),a=n(7);t.exports="process"==r(a.process)},(t,e,n)=>{var r=n(7);t.exports=r},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.binarySearchFirstItem=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=n,a=t.length-1;if(a<0||!e(t[a]))return t.length;if(e(t[r]))return r;for(;r<a;){var i=r+a>>1,o=t[i];e(o)?a=i:r=i+1}return r},e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getColorValues=function(t){var e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);var n,r=s(t.keys());try{for(r.s();!(n=r.n()).done;){var a=n.value;e.style.color=a;var i=window.getComputedStyle(e).color;t.set(a,L(i))}}catch(t){r.e(t)}finally{r.f()}e.remove()},e.getCurrentTransform=function(t){var e=t.getTransform(),n=e.a,r=e.b,a=e.c,i=e.d,o=e.e,s=e.f;return[n,r,a,i,o,s]},e.getCurrentTransformInverse=function(t){var e=t.getTransform().invertSelf(),n=e.a,r=e.b,a=e.c,i=e.d,o=e.e,s=e.f;return[n,r,a,i,o,s]},e.getFilenameFromUrl=function(t){var e=t.indexOf("#"),n=t.indexOf("?"),r=Math.min(e>0?e:t.length,n>0?n:t.length);return t.substring(t.lastIndexOf("/",r)+1,r)},e.getPdfFilenameFromUrl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return e;if(P(t))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;var n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=n.exec(t),o=r.exec(a[1])||r.exec(a[2])||r.exec(a[3]);if(o&&(o=o[0]).includes("%"))try{o=r.exec(decodeURIComponent(o))[0]}catch(t){}return o||e},e.getRGB=L,e.getXfaPageViewport=function(t,e){var n=e.scale,r=void 0===n?1:n,a=e.rotation,i=void 0===a?0:a,o=t.attributes.style,s=o.width,l=o.height,u=[0,0,parseInt(s),parseInt(l)];return new T({viewBox:u,scale:r,rotation:i})},e.isDataScheme=P,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=R,e.loadScript=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,r){var a=document.createElement("script");a.src=t,a.onload=function(t){e&&a.remove(),n(t)},a.onerror=function(){r(new Error("Cannot load script at: ".concat(a.src)))},(document.head||document.documentElement).append(a)}))};var a=n(130),i=n(1);function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&n.call(m,i)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(u.arg)}var i;this._invoke=function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return i=i?i.then(r,r):r()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new A(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){u(i,r,a,o,s,"next",t)}function s(t){u(i,r,a,o,s,"throw",t)}o(void 0)}))}}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=g((function t(){m(this,t)}));e.PixelsPerInch=w,b(w,"CSS",96),b(w,"PDF",72),b(w,"PDF_TO_CSS_UNITS",w.CSS/w.PDF);var A=function(t){h(n,t);var e=d(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.ownerDocument,i=void 0===a?globalThis.document:a;return m(this,n),(t=e.call(this))._document=i,t}return g(n,[{key:"_createCanvas",value:function(t,e){var n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}]),n}(a.BaseCanvasFactory);function k(t){return x.apply(this,arguments)}function x(){return x=c(o().mark((function t(e){var n,r,a=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],!R(e,document.baseURI)){t.next=21;break}return t.next=4,fetch(e);case 4:if((r=t.sent).ok){t.next=7;break}throw new Error(r.statusText);case 7:if(!n){t.next=15;break}return t.t1=Uint8Array,t.next=11,r.arrayBuffer();case 11:t.t2=t.sent,t.t0=new t.t1(t.t2),t.next=20;break;case 15:return t.t3=i.stringToBytes,t.next=18,r.text();case 18:t.t4=t.sent,t.t0=(0,t.t3)(t.t4);case 20:return t.abrupt("return",t.t0);case 21:return t.abrupt("return",new Promise((function(t,r){var a=new XMLHttpRequest;a.open("GET",e,!0),n&&(a.responseType="arraybuffer"),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){var e;if(200===a.status||0===a.status)if(n&&a.response?e=new Uint8Array(a.response):!n&&a.responseText&&(e=(0,i.stringToBytes)(a.responseText)),e)return void t(e);r(new Error(a.statusText))}},a.send(null)})));case 22:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}e.DOMCanvasFactory=A;var _=function(t){h(n,t);var e=d(n);function n(){return m(this,n),e.apply(this,arguments)}return g(n,[{key:"_fetchData",value:function(t,e){return k(t,this.isCompressed).then((function(t){return{cMapData:t,compressionType:e}}))}}]),n}(a.BaseCMapReaderFactory);e.DOMCMapReaderFactory=_;var S=function(t){h(n,t);var e=d(n);function n(){return m(this,n),e.apply(this,arguments)}return g(n,[{key:"_fetchData",value:function(t){return k(t,!0)}}]),n}(a.BaseStandardFontDataFactory);e.DOMStandardFontDataFactory=S;var E=function(t){h(n,t);var e=d(n);function n(){return m(this,n),e.apply(this,arguments)}return g(n,[{key:"_createSVG",value:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}}]),n}(a.BaseSVGFactory);e.DOMSVGFactory=E;var T=function(){function t(e){var n=e.viewBox,r=e.scale,a=e.rotation,i=e.offsetX,o=void 0===i?0:i,s=e.offsetY,l=void 0===s?0:s,u=e.dontFlip,c=void 0!==u&&u;m(this,t),this.viewBox=n,this.scale=r,this.rotation=a,this.offsetX=o,this.offsetY=l;var h,f,d,p,v,y,g,b,w=(n[2]+n[0])/2,A=(n[3]+n[1])/2;switch((a%=360)<0&&(a+=360),a){case 180:h=-1,f=0,d=0,p=1;break;case 90:h=0,f=1,d=1,p=0;break;case 270:h=0,f=-1,d=-1,p=0;break;case 0:h=1,f=0,d=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(d=-d,p=-p),0===h?(v=Math.abs(A-n[1])*r+o,y=Math.abs(w-n[0])*r+l,g=Math.abs(n[3]-n[1])*r,b=Math.abs(n[2]-n[0])*r):(v=Math.abs(w-n[0])*r+o,y=Math.abs(A-n[1])*r+l,g=Math.abs(n[2]-n[0])*r,b=Math.abs(n[3]-n[1])*r),this.transform=[h*r,f*r,d*r,p*r,v-h*r*w-d*r*A,y-f*r*w-p*r*A],this.width=g,this.height=b}return g(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.scale,r=void 0===n?this.scale:n,a=e.rotation,i=void 0===a?this.rotation:a,o=e.offsetX,s=void 0===o?this.offsetX:o,l=e.offsetY,u=void 0===l?this.offsetY:l,c=e.dontFlip,h=void 0!==c&&c;return new t({viewBox:this.viewBox.slice(),scale:r,rotation:i,offsetX:s,offsetY:u,dontFlip:h})}},{key:"convertToViewportPoint",value:function(t,e){return i.Util.applyTransform([t,e],this.transform)}},{key:"convertToViewportRectangle",value:function(t){var e=i.Util.applyTransform([t[0],t[1]],this.transform),n=i.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(t,e){return i.Util.applyInverseTransform([t,e],this.transform)}}]),t}();e.PageViewport=T;var C=function(t){h(n,t);var e=d(n);function n(t,r){var a;return m(this,n),(a=e.call(this,t,"RenderingCancelledException")).type=r,a}return g(n)}(i.BaseException);function P(t){for(var e=t.length,n=0;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}e.RenderingCancelledException=C;var O,M=function(){function t(){m(this,t),this.started=Object.create(null),this.times=[]}return g(t,[{key:"time",value:function(t){t in this.started&&(0,i.warn)("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function(t){t in this.started||(0,i.warn)("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function(){var t,e=[],n=0,r=s(this.times);try{for(r.s();!(t=r.n()).done;){var a=t.value.name;a.length>n&&(n=a.length)}}catch(t){r.e(t)}finally{r.f()}var i,o=s(this.times);try{for(o.s();!(i=o.n()).done;){var l=i.value,u=l.end-l.start;e.push("".concat(l.name.padEnd(n)," ").concat(u,"ms\n"))}}catch(t){o.e(t)}finally{o.f()}return e.join("")}}]),t}();function R(t,e){try{var n=(e?new URL(t,e):new URL(t)).protocol;return"http:"===n||"https:"===n}catch(t){return!1}}e.StatTimer=M;var I=function(){function t(){m(this,t)}return g(t,null,[{key:"toDateObject",value:function(t){if(!t||"string"!=typeof t)return null;O||(O=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var e=O.exec(t);if(!e)return null;var n=parseInt(e[1],10),r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;var a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;var i=parseInt(e[4],10);i=i>=0&&i<=23?i:0;var o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;var s=parseInt(e[6],10);s=s>=0&&s<=59?s:0;var l=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;var c=parseInt(e[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(i+=u,o+=c):"+"===l&&(i-=u,o-=c),new Date(Date.UTC(n,r,a,i,o,s))}}]),t}();function L(t){if(t.startsWith("#")){var e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((function(t){return parseInt(t)})):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((function(t){return parseInt(t)})).slice(0,3):((0,i.warn)('Not a valid color format: "'.concat(t,'"')),[0,0,0])}e.PDFDateString=I},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var a=n(1);function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&n.call(m,o)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(u.arg)}var i;this._invoke=function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return i=i?i.then(r,r):r()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new A(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function o(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,l,"next",t)}function l(t){o(i,r,a,s,l,"throw",t)}s(void 0)}))}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var h=function(){function t(){l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}return c(t,[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");var n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d")}}},{key:"reset",value:function(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},{key:"_createCanvas",value:function(t,e){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}]),t}();e.BaseCanvasFactory=h;var f=function(){function t(e){var n=e.baseUrl,r=void 0===n?null:n,i=e.isCompressed,o=void 0!==i&&i;l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=r,this.isCompressed=o}var e;return c(t,[{key:"fetch",value:(e=s(i().mark((function t(e){var n,r,o,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name,this.baseUrl){t.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(n){t.next=5;break}throw new Error("CMap name must be specified.");case 5:return r=this.baseUrl+n+(this.isCompressed?".bcmap":""),o=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE,t.abrupt("return",this._fetchData(r,o).catch((function(t){throw new Error("Unable to load ".concat(s.isCompressed?"binary ":"","CMap at: ").concat(r))})));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_fetchData",value:function(t,e){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]),t}();e.BaseCMapReaderFactory=f;var d=function(){function t(e){var n=e.baseUrl,r=void 0===n?null:n;l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=r}var e;return c(t,[{key:"fetch",value:(e=s(i().mark((function t(e){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.filename,this.baseUrl){t.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(n){t.next=5;break}throw new Error("Font filename must be specified.");case 5:return r="".concat(this.baseUrl).concat(n),t.abrupt("return",this._fetchData(r).catch((function(t){throw new Error("Unable to load font data at: ".concat(r))})));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_fetchData",value:function(t){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]),t}();e.BaseStandardFontDataFactory=d;var p=function(){function t(){l(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}return c(t,[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");var r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width","".concat(t,"px")),r.setAttribute("height","".concat(e,"px"))),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),r}},{key:"createElement",value:function(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function(t){(0,a.unreachable)("Abstract method `_createSVG` called.")}}]),t}();e.BaseSVGFactory=p},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.build=e.RenderTask=e.PDFWorkerUtil=e.PDFWorker=e.PDFPageProxy=e.PDFDocumentProxy=e.PDFDocumentLoadingTask=e.PDFDataRangeTransport=e.LoopbackPort=e.DefaultStandardFontDataFactory=e.DefaultCanvasFactory=e.DefaultCMapReaderFactory=void 0,e.getDocument=function(t){var e,n=new q;if("string"==typeof t||t instanceof URL)e={url:t};else if((0,r.isArrayBuffer)(t))e={data:t};else if(t instanceof V)e={range:t};else{if("object"!==D(t))throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=t}var a=Object.create(null),o=null,s=null;for(var h in e){var f=e[h];switch(h){case"url":if("undefined"!=typeof window)try{a[h]=new URL(f,window.location).href;continue}catch(t){(0,r.warn)('Cannot create valid URL: "'.concat(t,'".'))}else if("string"==typeof f||f instanceof URL){a[h]=f.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=f;continue;case"worker":s=f;continue;case"data":if(f instanceof Uint8Array)break;if("string"==typeof f)a[h]=(0,r.stringToBytes)(f);else if("object"!==D(f)||null===f||isNaN(f.length)){if(!(0,r.isArrayBuffer)(f))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");a[h]=new Uint8Array(f)}else a[h]=new Uint8Array(f);continue}a[h]=f}a.CMapReaderFactory=a.CMapReaderFactory||B,a.StandardFontDataFactory=a.StandardFontDataFactory||W,a.ignoreErrors=!0!==a.stopAtErrors,a.fontExtraProperties=!0===a.fontExtraProperties,a.pdfBug=!0===a.pdfBug,a.enableXfa=!0===a.enableXfa,(!Number.isInteger(a.rangeChunkSize)||a.rangeChunkSize<1)&&(a.rangeChunkSize=65536);("string"!=typeof a.docBaseUrl||(0,i.isDataScheme)(a.docBaseUrl))&&(a.docBaseUrl=null);(!Number.isInteger(a.maxImageSize)||a.maxImageSize<-1)&&(a.maxImageSize=-1);"string"!=typeof a.cMapUrl&&(a.cMapUrl=null);"string"!=typeof a.standardFontDataUrl&&(a.standardFontDataUrl=null);"boolean"!=typeof a.useWorkerFetch&&(a.useWorkerFetch=a.CMapReaderFactory===i.DOMCMapReaderFactory&&a.StandardFontDataFactory===i.DOMStandardFontDataFactory);"boolean"!=typeof a.isEvalSupported&&(a.isEvalSupported=!0);"boolean"!=typeof a.disableFontFace&&(a.disableFontFace=u.isNodeJS);"boolean"!=typeof a.useSystemFonts&&(a.useSystemFonts=!u.isNodeJS&&!a.disableFontFace);"object"===D(a.ownerDocument)&&null!==a.ownerDocument||(a.ownerDocument=globalThis.document);"boolean"!=typeof a.disableRange&&(a.disableRange=!1);"boolean"!=typeof a.disableStream&&(a.disableStream=!1);"boolean"!=typeof a.disableAutoFetch&&(a.disableAutoFetch=!1);if((0,r.setVerbosityLevel)(a.verbosity),!s){var p={verbosity:a.verbosity,port:l.GlobalWorkerOptions.workerPort};s=p.port?J.fromPort(p):new J(p),n._worker=s}var v=n.docId;return s.promise.then((function(){if(n.destroyed)throw new Error("Loading aborted");var t=function(t,e,n,r){return G.apply(this,arguments)}(s,a,o,v),e=new Promise((function(t){var e;o?e=new d.PDFDataTransportStream({length:a.length,initialData:a.initialData,progressiveDone:a.progressiveDone,contentDispositionFilename:a.contentDispositionFilename,disableRange:a.disableRange,disableStream:a.disableStream},o):a.data||(e=U({url:a.url,length:a.length,httpHeaders:a.httpHeaders,withCredentials:a.withCredentials,rangeChunkSize:a.rangeChunkSize,disableRange:a.disableRange,disableStream:a.disableStream})),t(e)}));return Promise.all([t,e]).then((function(t){var e=L(t,2),r=e[0],i=e[1];if(n.destroyed)throw new Error("Loading aborted");var o=new c.MessageHandler(v,r,s.port),l=new nt(o,n,i,a);n._transport=l,o.send("Ready",null)}))})).catch(n._capability.reject),n},e.setPDFNetworkStreamFactory=function(t){U=t},e.version=void 0;var r=n(1),a=n(132),i=n(129),o=n(136),s=n(137),l=n(140),u=n(3),c=n(141),h=n(142),f=n(143),d=n(144),p=n(145);function v(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function y(t,e,n){g(t,e),e.set(t,n)}function g(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(t,e,n){return T(t,w(t,e,"set"),n),n}function b(t,e){return M(t,w(t,e,"get"))}function w(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function A(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||F(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=F(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function x(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var a=e&&e.prototype instanceof h?e:h,i=Object.create(a.prototype),o=new _(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return E()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function f(){}function d(){}var p={};s(p,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==e&&n.call(y,a)&&(p=y);var g=d.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(a,i,o,s){var l=u(t[a],t,i);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==D(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}var a;this._invoke=function(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,o,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new b(l(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(g),s(g,o,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function C(t,e,n){return O(t,e),P(n,"get"),M(t,n)}function P(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function O(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}function M(t,e){return e.get?e.get.call(t):e.value}function R(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function I(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){R(i,r,a,o,s,"next",t)}function s(t){R(i,r,a,o,s,"throw",t)}o(void 0)}))}}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||F(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}var N=i.DOMCanvasFactory;e.DefaultCanvasFactory=N;var B=i.DOMCMapReaderFactory;e.DefaultCMapReaderFactory=B;var U,W=i.DOMStandardFontDataFactory;function G(){return(G=I(x().mark((function t(e,n,r,a){var i;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.destroyed){t.next=2;break}throw new Error("Worker was destroyed");case 2:return r&&(n.length=r.length,n.initialData=r.initialData,n.progressiveDone=r.progressiveDone,n.contentDispositionFilename=r.contentDispositionFilename),t.next=5,e.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"2.16.53",source:{data:n.data,url:n.url,password:n.password,disableAutoFetch:n.disableAutoFetch,rangeChunkSize:n.rangeChunkSize,length:n.length},maxImageSize:n.maxImageSize,disableFontFace:n.disableFontFace,docBaseUrl:n.docBaseUrl,ignoreErrors:n.ignoreErrors,isEvalSupported:n.isEvalSupported,fontExtraProperties:n.fontExtraProperties,enableXfa:n.enableXfa,useSystemFonts:n.useSystemFonts,cMapUrl:n.useWorkerFetch?n.cMapUrl:null,standardFontDataUrl:n.useWorkerFetch?n.standardFontDataUrl:null});case 5:if(i=t.sent,n.data&&(n.data=null),!e.destroyed){t.next=9;break}throw new Error("Worker was destroyed");case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.DefaultStandardFontDataFactory=W;var q=function(){function t(){var e,n,a,i,o,s;_(this,t),this._capability=(0,r.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat((a=t,i=t,o=z,e=C(t,t,z),n=e++,s=e,O(a,i),P(o,"set"),T(a,o,s),n)),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}var e;return E(t,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(e=I(x().mark((function t(){var e;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyed=!0,t.next=3,null===(e=this._transport)||void 0===e?void 0:e.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}();e.PDFDocumentLoadingTask=q;var z={writable:!0,value:0},V=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_(this,t),this.length=e,this.initialData=n,this.progressiveDone=a,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,r.createPromiseCapability)()}return E(t,[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function(t,e){var n,r=k(this._rangeListeners);try{for(r.s();!(n=r.n()).done;){(0,n.value)(t,e)}}catch(t){r.e(t)}finally{r.f()}}},{key:"onDataProgress",value:function(t,e){var n=this;this._readyCapability.promise.then((function(){var r,a=k(n._progressListeners);try{for(a.s();!(r=a.n()).done;){(0,r.value)(t,e)}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"onDataProgressiveRead",value:function(t){var e=this;this._readyCapability.promise.then((function(){var n,r=k(e._progressiveReadListeners);try{for(r.s();!(n=r.n()).done;){(0,n.value)(t)}}catch(t){r.e(t)}finally{r.f()}}))}},{key:"onDataProgressiveDone",value:function(){var t=this;this._readyCapability.promise.then((function(){var e,n=k(t._progressiveDoneListeners);try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(t){n.e(t)}finally{n.f()}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(t,e){(0,r.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),t}();e.PDFDataRangeTransport=V;var H=function(){function t(e,n){_(this,t),this._pdfInfo=e,this._transport=n}return E(t,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"stats",get:function(){return this._transport.stats}},{key:"isPureXfa",get:function(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),t}();e.PDFDocumentProxy=H;var X=function(){function t(e,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_(this,t),this._pageIndex=e,this._pageInfo=n,this._ownerDocument=a,this._transport=r,this._stats=o?new i.StatTimer:null,this._pdfBug=o,this.commonObjs=r.commonObjs,this.objs=new it,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}var e;return E(t,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scale,n=t.rotation,r=void 0===n?this.rotate:n,a=t.offsetX,o=void 0===a?0:a,s=t.offsetY,l=void 0===s?0:s,u=t.dontFlip,c=void 0!==u&&u;return new i.PageViewport({viewBox:this.view,scale:e,rotation:r,offsetX:o,offsetY:l,dontFlip:c})}},{key:"getAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.intent,n=void 0===e?"display":e,r=this._transport.getRenderingIntent(n),a=this._annotationPromises.get(r.cacheKey);return a||(a=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,a)),a}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:(e=I(x().mark((function t(){var e;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null);case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(t){var e,n=this,a=t.canvasContext,i=t.viewport,o=t.intent,s=void 0===o?"display":o,l=t.annotationMode,u=void 0===l?r.AnnotationMode.ENABLE:l,c=t.transform,h=void 0===c?null:c,f=t.imageLayer,d=void 0===f?null:f,p=t.canvasFactory,v=void 0===p?null:p,y=t.background,g=void 0===y?null:y,m=t.optionalContentConfigPromise,b=void 0===m?null:m,w=t.annotationCanvasMap,A=void 0===w?null:w,k=t.pageColors,x=void 0===k?null:k,_=t.printAnnotationStorage,S=void 0===_?null:_;this._stats&&this._stats.time("Overall");var E=this._transport.getRenderingIntent(s,u,S);this.pendingCleanup=!1,b||(b=this._transport.getOptionalContentConfig());var T=this._intentStates.get(E.cacheKey);T||(T=Object.create(null),this._intentStates.set(E.cacheKey,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);var C=v||new N({ownerDocument:this._ownerDocument}),P=!!(E.renderingIntent&r.RenderingIntentFlag.PRINT);T.displayReadyCapability||(T.displayReadyCapability=(0,r.createPromiseCapability)(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(E));var O=function(t){T.renderTasks.delete(M),(n.cleanupAfterRender||P)&&(n.pendingCleanup=!0),n._tryCleanup(),t?(M.capability.reject(t),n._abortOperatorList({intentState:T,reason:t instanceof Error?t:new Error(t)})):M.capability.resolve(),n._stats&&(n._stats.timeEnd("Rendering"),n._stats.timeEnd("Overall"))},M=new ut({callback:O,params:{canvasContext:a,viewport:i,transform:h,imageLayer:d,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:A,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:C,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:x});((e=T).renderTasks||(e.renderTasks=new Set)).add(M);var R=M.task;return Promise.all([T.displayReadyCapability.promise,b]).then((function(t){var e=L(t,2),r=e[0],a=e[1];n.pendingCleanup?O():(n._stats&&n._stats.time("Rendering"),M.initializeGraphics({transparency:r,optionalContentConfig:a}),M.operatorListChanged())})).catch(O),R}},{key:"getOperatorList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.intent,n=void 0===e?"display":e,a=t.annotationMode,i=void 0===a?r.AnnotationMode.ENABLE:a,o=t.printAnnotationStorage,s=void 0===o?null:o;function l(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(u))}var u,c,h=this._transport.getRenderingIntent(n,i,s,!0),f=this._intentStates.get(h.cacheKey);(f||(f=Object.create(null),this._intentStates.set(h.cacheKey,f)),f.opListReadCapability)||((u=Object.create(null)).operatorListChanged=l,f.opListReadCapability=(0,r.createPromiseCapability)(),((c=f).renderTasks||(c.renderTasks=new Set)).add(u),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(h));return f.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.disableCombineTextItems,n=void 0!==e&&e,r=t.includeMarkedContent,a=void 0!==r&&r,i=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==n,includeMarkedContent:!0===a},{highWaterMark:i,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(t){return p.XfaText.textContent(t)}));var e=this.streamTextContent(t);return new Promise((function(t,n){var r=e.getReader(),a={items:[],styles:Object.create(null)};!function e(){r.read().then((function(n){var r,i=n.value;n.done?t(a):(Object.assign(a.styles,i.styles),(r=a.items).push.apply(r,A(i.items)),e())}),n)}()}))}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0;var t,e=[],n=k(this._intentStates.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability){var a,i=k(r.renderTasks);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.push(o.completed),o.cancel()}}catch(t){i.e(t)}finally{i.f()}}}}catch(t){n.e(t)}finally{n.f()}this.objs.clear();var s,l=k(this._bitmaps);try{for(l.s();!(s=l.n()).done;){s.value.close()}}catch(t){l.e(t)}finally{l.f()}return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var e,n=k(this._intentStates.values());try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.renderTasks,o=r.operatorList;if(a.size>0||!o.lastChunk)return!1}}catch(t){n.e(t)}finally{n.f()}this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new i.StatTimer);var s,l=k(this._bitmaps);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.close()}}catch(t){l.e(t)}finally{l.f()}return this._bitmaps.clear(),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(t,e){var n=this._intentStates.get(e);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(t))}},{key:"_renderPageChunk",value:function(t,e){for(var n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;var a,i=k(e.renderTasks);try{for(i.s();!(a=i.n()).done;){a.value.operatorListChanged()}}catch(t){i.e(t)}finally{i.f()}t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(t){var e=this,n=t.renderingIntent,r=t.cacheKey,a=t.annotationStorageMap,i=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:r,annotationStorage:a}).getReader(),o=this._intentStates.get(r);o.streamReader=i;!function t(){i.read().then((function(n){var r=n.value;n.done?o.streamReader=null:e._transport.destroyed||(e._renderPageChunk(r,o),t())}),(function(t){if(o.streamReader=null,!e._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;var n,r=k(o.renderTasks);try{for(r.s();!(n=r.n()).done;){n.value.operatorListChanged()}}catch(t){r.e(t)}finally{r.f()}e._tryCleanup()}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}}))}()}},{key:"_abortOperatorList",value:function(t){var e=this,n=t.intentState,a=t.reason,o=t.force,s=void 0!==o&&o;if(n.streamReader){if(!s){if(n.renderTasks.size>0)return;if(a instanceof i.RenderingCancelledException)return void(n.streamReaderCancelTimeout=setTimeout((function(){e._abortOperatorList({intentState:n,reason:a,force:!0}),n.streamReaderCancelTimeout=null}),100))}if(n.streamReader.cancel(new r.AbortException(a.message)).catch((function(){})),n.streamReader=null,!this._transport.destroyed){var l,u=k(this._intentStates);try{for(u.s();!(l=u.n()).done;){var c=L(l.value,2),h=c[0];if(c[1]===n){this._intentStates.delete(h);break}}}catch(t){u.e(t)}finally{u.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),t}();e.PDFPageProxy=X;var Y=function(){function t(){_(this,t),this._listeners=[],this._deferred=Promise.resolve()}return E(t,[{key:"postMessage",value:function(t,e){var n=this,r={data:structuredClone(t,e)};this._deferred.then((function(){var t,e=k(n._listeners);try{for(e.s();!(t=e.n()).done;){t.value.call(n,r)}}catch(t){e.e(t)}finally{e.f()}}))}},{key:"addEventListener",value:function(t,e){this._listeners.push(e)}},{key:"removeEventListener",value:function(t,e){var n=this._listeners.indexOf(e);this._listeners.splice(n,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),t}();e.LoopbackPort=Y;var K={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};e.PDFWorkerUtil=K;var J=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,a=void 0===n?null:n,i=e.port,o=void 0===i?null:i,s=e.verbosity,l=void 0===s?(0,r.getVerbosityLevel)():s;if(_(this,t),o&&C(t,t,Q).has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=a,this.destroyed=!1,this.verbosity=l,this._readyCapability=(0,r.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o)return C(t,t,Q).set(o,this),void this._initializeFromPort(o);this._initialize()}return E(t,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(t){this._port=t,this._messageHandler=new c.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var e=this;if("undefined"!=typeof Worker&&!K.isWorkerDisabled&&!t._mainThreadWorkerMessageHandler){var n=t.workerSrc;try{var a=new Worker(n),i=new c.MessageHandler("main","worker",a),o=function(){a.removeEventListener("error",s),i.destroy(),a.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},s=function(){e._webWorker||o()};a.addEventListener("error",s),i.on("test",(function(t){a.removeEventListener("error",s),e.destroyed?o():t?(e._messageHandler=i,e._port=a,e._webWorker=a,e._readyCapability.resolve(),i.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),i.destroy(),a.terminate())})),i.on("ready",(function(t){if(a.removeEventListener("error",s),e.destroyed)o();else try{l()}catch(t){e._setupFakeWorker()}}));var l=function(){var t=new Uint8Array;i.send("test",t,[t.buffer])};return void l()}catch(t){(0,r.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;K.isWorkerDisabled||((0,r.warn)("Setting up fake worker."),K.isWorkerDisabled=!0),t._setupFakeWorkerGlobal.then((function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var n=new Y;e._port=n;var r="fake".concat(K.fakeWorkerId++),a=new c.MessageHandler(r+"_worker",r,n);t.setup(a,n);var i=new c.MessageHandler(r,r+"_worker",n);e._messageHandler=i,e._readyCapability.resolve(),i.send("configure",{verbosity:e.verbosity})}})).catch((function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),C(t,t,Q).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(e){if(null==e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return C(this,t,Q).has(e.port)?C(this,t,Q).get(e.port):new t(e)}},{key:"workerSrc",get:function(){if(l.GlobalWorkerOptions.workerSrc)return l.GlobalWorkerOptions.workerSrc;if(null!==K.fallbackWorkerSrc)return u.isNodeJS||(0,i.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),K.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(t){return null}}},{key:"_setupFakeWorkerGlobal",get:function(){var t=this,e=function(){var e=I(x().mark((function e(){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t._mainThreadWorkerMessageHandler)){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,(0,i.loadScript)(t.workerSrc);case 5:return e.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.shadow)(this,"_setupFakeWorkerGlobal",e())}}]),t}();e.PDFWorker=J;var Q={writable:!0,value:new WeakMap},$=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=function(){function t(e,n,a,i){_(this,t),y(this,$,{writable:!0,value:null}),y(this,Z,{writable:!0,value:new Map}),y(this,tt,{writable:!0,value:new Map}),y(this,et,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=n,this.commonObjs=new it,this.fontLoader=new o.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,i.useWorkerFetch||(this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.StandardFontDataFactory=new i.StandardFontDataFactory({baseUrl:i.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,r.createPromiseCapability)(),this.setupMessageHandler()}var e;return E(t,[{key:"annotationStorage",get:function(){return(0,r.shadow)(this,"annotationStorage",new a.AnnotationStorage)}},{key:"stats",get:function(){return b(this,$)}},{key:"getRenderingIntent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.AnnotationMode.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r.RenderingIntentFlag.DISPLAY,s=null;switch(t){case"any":o=r.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=r.RenderingIntentFlag.PRINT;break;default:(0,r.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(e){case r.AnnotationMode.DISABLE:o+=r.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case r.AnnotationMode.ENABLE:break;case r.AnnotationMode.ENABLE_FORMS:o+=r.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case r.AnnotationMode.ENABLE_STORAGE:var l=(o+=r.RenderingIntentFlag.ANNOTATIONS_STORAGE)&r.RenderingIntentFlag.PRINT&&n instanceof a.PrintAnnotationStorage?n:this.annotationStorage;s=l.serializable;break;default:(0,r.warn)("getRenderingIntent - invalid annotationMode: ".concat(e))}return i&&(o+=r.RenderingIntentFlag.OPLIST),{renderingIntent:o,cacheKey:"".concat(o,"_").concat(a.AnnotationStorage.getHash(s)),annotationStorageMap:s}}},{key:"destroy",value:function(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,r.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var e,n=[],a=k(b(this,Z).values());try{for(a.s();!(e=a.n()).done;){var i=e.value;n.push(i._destroy())}}catch(t){a.e(t)}finally{a.f()}b(this,Z).clear(),b(this,tt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var o=this.messageHandler.sendWithPromise("Terminate",null);return n.push(o),Promise.all(n).then((function(){t.commonObjs.clear(),t.fontLoader.clear(),m(t,et,null),t._getFieldObjectsPromise=null,t._hasJSActionsPromise=null,t._networkStream&&t._networkStream.cancelAllRequests(new r.AbortException("Worker was terminated.")),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this,e=this.messageHandler,n=this.loadingTask;e.on("GetReader",(function(e,n){(0,r.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(e){t._lastProgress={loaded:e.loaded,total:e.total}},n.onPull=function(){t._fullReader.read().then((function(t){var e=t.value;t.done?n.close():((0,r.assert)((0,r.isArrayBuffer)(e),"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))})).catch((function(t){n.error(t)}))},n.onCancel=function(e){t._fullReader.cancel(e),n.ready.catch((function(e){if(!t.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(function(e){var a=(0,r.createPromiseCapability)(),i=t._fullReader;return i.headersReady.then((function(){if(!i.isStreamingSupported||!i.isRangeSupported){var e;if(t._lastProgress)null===(e=n.onProgress)||void 0===e||e.call(n,t._lastProgress);i.onProgress=function(t){var e;null===(e=n.onProgress)||void 0===e||e.call(n,{loaded:t.loaded,total:t.total})}}a.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),a.reject),a.promise})),e.on("GetRangeReader",(function(e,n){(0,r.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var a=t._networkStream.getRangeReader(e.begin,e.end);a?(n.onPull=function(){a.read().then((function(t){var e=t.value;t.done?n.close():((0,r.assert)((0,r.isArrayBuffer)(e),"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))})).catch((function(t){n.error(t)}))},n.onCancel=function(e){a.cancel(e),n.ready.catch((function(e){if(!t.destroyed)throw e}))}):n.close()})),e.on("GetDoc",(function(e){var r=e.pdfInfo;t._numPages=r.numPages,t._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new H(r,t))})),e.on("DocException",(function(t){var e;switch(t.name){case"PasswordException":e=new r.PasswordException(t.message,t.code);break;case"InvalidPDFException":e=new r.InvalidPDFException(t.message);break;case"MissingPDFException":e=new r.MissingPDFException(t.message);break;case"UnexpectedResponseException":e=new r.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":e=new r.UnknownErrorException(t.message,t.details);break;default:(0,r.unreachable)("DocException - expected a valid Error.")}n._capability.reject(e)})),e.on("PasswordRequest",(function(e){if(t._passwordCapability=(0,r.createPromiseCapability)(),n.onPassword){try{n.onPassword((function(e){e instanceof Error?t._passwordCapability.reject(e):t._passwordCapability.resolve({password:e})}),e.code)}catch(e){t._passwordCapability.reject(e)}}else t._passwordCapability.reject(new r.PasswordException(e.message,e.code));return t._passwordCapability.promise})),e.on("DataLoaded",(function(e){var r;null===(r=n.onProgress)||void 0===r||r.call(n,{loaded:e.length,total:e.length}),t.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(function(e){t.destroyed||b(t,Z).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(function(n){var a,i=L(n,3),s=i[0],l=i[1],u=i[2];if(!t.destroyed&&!t.commonObjs.has(s))switch(l){case"Font":var c=t._params;if("error"in u){var h=u.error;(0,r.warn)("Error during font loading: ".concat(h)),t.commonObjs.resolve(s,h);break}var f=null;c.pdfBug&&null!==(a=globalThis.FontInspector)&&void 0!==a&&a.enabled&&(f={registerFont:function(t,e){globalThis.FontInspector.fontAdded(t,e)}});var d=new o.FontFaceObject(u,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:f});t.fontLoader.bind(d).catch((function(t){return e.sendWithPromise("FontFallback",{id:s})})).finally((function(){!c.fontExtraProperties&&d.data&&(d.data=null),t.commonObjs.resolve(s,d)}));break;case"FontPath":case"Image":t.commonObjs.resolve(s,u);break;default:throw new Error("Got unknown common object type ".concat(l))}})),e.on("obj",(function(e){var n=L(e,4),r=n[0],a=n[1],i=n[2],o=n[3];if(!t.destroyed){var s=b(t,Z).get(a);if(!s.objs.has(r))switch(i){case"Image":s.objs.resolve(r,o);if(o){var l;if(o.bitmap){var u=o.bitmap;l=o.width*o.height*4,s._bitmaps.add(u)}else{var c;l=(null===(c=o.data)||void 0===c?void 0:c.length)||0}l>8e6&&(s.cleanupAfterRender=!0)}break;case"Pattern":s.objs.resolve(r,o);break;default:throw new Error("Got unknown object type ".concat(i))}}})),e.on("DocProgress",(function(e){var r;t.destroyed||null===(r=n.onProgress)||void 0===r||r.call(n,{loaded:e.loaded,total:e.total})})),e.on("DocStats",(function(e){t.destroyed||m(t,$,Object.freeze({streamTypes:Object.freeze(e.streamTypes),fontTypes:Object.freeze(e.fontTypes)}))})),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",(function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.CMapReaderFactory?t.CMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))})),e.on("FetchStandardFontData",(function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.StandardFontDataFactory?t.StandardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"_onUnsupportedFeature",value:function(t){var e,n,r=t.featureId;this.destroyed||null===(e=(n=this.loadingTask).onUnsupportedFeature)||void 0===e||e.call(n,r)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var n=t-1,r=b(this,tt).get(n);if(r)return r;var a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then((function(t){if(e.destroyed)throw new Error("Transport destroyed");var r=new X(n,t,e,e._params.ownerDocument,e._params.pdfBug);return b(e,Z).set(n,r),r}));return b(this,tt).set(n,a),a}},{key:"getPageIndex",value:function(t){return"object"!==D(t)||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}},{key:"getAnnotations",value:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}},{key:"saveDocument",value:function(){var t,e,n=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null}).finally((function(){n.annotationStorage.resetModified()}))}},{key:"getFieldObjects",value:function(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(t){return new f.OptionalContentConfig(t)}))}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this;return b(this,et)||m(this,et,this.messageHandler.sendWithPromise("GetMetadata",null).then((function(e){var n,r,a,i;return{info:e[0],metadata:e[1]?new h.Metadata(e[1]):null,contentDispositionFilename:null!==(n=null===(r=t._fullReader)||void 0===r?void 0:r.filename)&&void 0!==n?n:null,contentLength:null!==(a=null===(i=t._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==a?a:null}})))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(e=I(x().mark((function t(){var e,n,r,a,i=arguments;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]&&i[0],t.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){t.next=5;break}return t.abrupt("return");case 5:n=k(b(this,Z).values()),t.prev=6,n.s();case 8:if((r=n.n()).done){t.next=15;break}if((a=r.value).cleanup()){t.next=13;break}throw new Error("startCleanup: Page ".concat(a.pageNumber," is currently rendering."));case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,et,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 28:case"end":return t.stop()}}),t,this,[[6,17,20,23]])}))),function(){return e.apply(this,arguments)})},{key:"loadingParams",get:function(){var t=this._params;return(0,r.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}]),t}(),rt=new WeakMap,at=new WeakSet,it=function(){function t(){var e,n;_(this,t),g(e=this,n=at),n.add(e),y(this,rt,{writable:!0,value:Object.create(null)})}return E(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n=v(this,at,ot).call(this,t);return n.capability.promise.then((function(){return e(n.data)})),null}var r=b(this,rt)[t];if(null==r||!r.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return r.data}},{key:"has",value:function(t){var e=b(this,rt)[t];return(null==e?void 0:e.capability.settled)||!1}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=v(this,at,ot).call(this,t);n.data=e,n.capability.resolve()}},{key:"clear",value:function(){m(this,rt,Object.create(null))}}]),t}();function ot(t){var e=b(this,rt)[t];return e||(b(this,rt)[t]={capability:(0,r.createPromiseCapability)(),data:null})}var st=new WeakMap,lt=function(){function t(e){_(this,t),y(this,st,{writable:!0,value:null}),m(this,st,e),this.onContinue=null}return E(t,[{key:"promise",get:function(){return b(this,st).capability.promise}},{key:"cancel",value:function(){b(this,st).cancel()}},{key:"separateAnnots",get:function(){var t=b(this,st).operatorList.separateAnnots;if(!t)return!1;var e=b(this,st).annotationCanvasMap;return t.form||t.canvas&&(null==e?void 0:e.size)>0}}]),t}();e.RenderTask=lt;var ut=function(){function t(e){var n=e.callback,a=e.params,i=e.objs,o=e.commonObjs,s=e.annotationCanvasMap,l=e.operatorList,u=e.pageIndex,c=e.canvasFactory,h=e.useRequestAnimationFrame,f=void 0!==h&&h,d=e.pdfBug,p=void 0!==d&&d,v=e.pageColors,y=void 0===v?null:v;_(this,t),this.callback=n,this.params=a,this.objs=i,this.commonObjs=o,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=c,this._pdfBug=p,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===f&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,r.createPromiseCapability)(),this.task=new lt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=a.canvasContext.canvas}var e;return E(t,[{key:"completed",get:function(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function(e){var n,r=e.transparency,a=void 0!==r&&r,i=e.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(C(t,t,ct).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");C(t,t,ct).add(this._canvas)}this._pdfBug&&null!==(n=globalThis.StepperManager)&&void 0!==n&&n.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var o=this.params,l=o.canvasContext,u=o.viewport,c=o.transform,h=o.imageLayer,f=o.background;this.gfx=new s.CanvasGraphics(l,this.commonObjs,this.objs,this.canvasFactory,h,i,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:u,transparency:a,background:f}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&C(t,t,ct).delete(this._canvas),this.callback(e||new i.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(e=I(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cancelled){e.next=2;break}return e.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&C(t,t,ct).delete(this._canvas),this.callback()));case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]),t}(),ct={writable:!0,value:new WeakSet};e.version="2.16.53";e.build="58d52fb98"},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var a=n(1),i=n(133),o=n(135);function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,d(t,e,"set"),n),n}function d(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=y(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}var k=new WeakSet,x=function(){function t(){var e,n;m(this,t),A(e=this,n=k),n.add(e),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}return w(t,[{key:"getValue",value:function(t,e){var n=this._storage.get(t);return void 0===n?e:Object.assign(e,n)}},{key:"getRawValue",value:function(t){return this._storage.get(t)}},{key:"removeKey",value:function(t){this._storage.delete(t),0===this._storage.size&&this.resetModified()}},{key:"setValue",value:function(t,e){var n=this._storage.get(t),r=!1;if(void 0!==n)for(var a=0,o=Object.entries(e);a<o.length;a++){var s=v(o[a],2),l=s[0],u=s[1];n[l]!==u&&(r=!0,n[l]=u)}else r=!0,this._storage.set(t,e);r&&function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,k,_).call(this),e instanceof i.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}},{key:"has",value:function(t){return this._storage.has(t)}},{key:"getAll",value:function(){return this._storage.size>0?(0,a.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}},{key:"print",get:function(){return new E(this)}},{key:"serializable",get:function(){if(0===this._storage.size)return null;var t,e=new Map,n=p(this._storage);try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),a=r[0],o=r[1],s=o instanceof i.AnnotationEditor?o.serialize():o;s&&e.set(a,s)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"hasAnnotationEditors",get:function(){var t,e=p(this._storage.values());try{for(e.s();!(t=e.n()).done;){if(t.value instanceof i.AnnotationEditor)return!0}}catch(t){e.e(t)}finally{e.f()}return!1}}],[{key:"getHash",value:function(t){if(!t)return"";var e,n=new o.MurmurHash3_64,r=p(t);try{for(r.s();!(e=r.n()).done;){var a=v(e.value,2),i=a[0],s=a[1];n.update("".concat(i,":").concat(JSON.stringify(s)))}}catch(t){r.e(t)}finally{r.f()}return n.hexdigest()}}]),t}();function _(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}e.AnnotationStorage=x;var S=new WeakMap,E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(n,t);var e=l(n);function n(t){var r,a,i,o;return m(this,n),r=e.call(this),a=c(r),o={writable:!0,value:null},A(a,i=S),i.set(a,o),f(c(r),S,structuredClone(t.serializable)),r}return w(n,[{key:"print",get:function(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return function(t,e){return e.get?e.get.call(t):e.value}(t=this,d(t,S,"get"));var t}}]),n}(x);e.PrintAnnotationStorage=E},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=n(134),a=n(1);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function c(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,f(t,e,"set"),n),n}function h(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,f(t,e,"get"))}function f(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var d=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakMap,m=new WeakMap,b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,d,{writable:!0,value:this.focusin.bind(this)}),u(this,p,{writable:!0,value:this.focusout.bind(this)}),u(this,v,{writable:!0,value:!1}),u(this,y,{writable:!0,value:!1}),u(this,g,{writable:!0,value:!1}),u(this,m,{writable:!0,value:t._zIndex++}),this.constructor===t&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null;var n=i(this.parent.viewportBaseDimensions,2),r=n[0],o=n[1];this.x=e.x/r,this.y=e.y/o,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}var e,n,o;return e=t,o=[{key:"_defaultLineColor",get:function(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function(t,e){var n=new this.prototype.constructor({parent:e,id:e.getNextId()});n.rotation=t.rotation;var r=i(e.pageDimensions,2),a=r[0],o=r[1],s=i(n.getRectInCurrentCoords(t.rect,o),4),l=s[0],u=s[1],c=s[2],h=s[3];return n.x=l/a,n.y=u/o,n.width=c/a,n.height=h/o,n}}],(n=[{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=h(this,m)}},{key:"focusin",value:function(t){h(this,v)?c(this,v,!1):this.parent.setSelected(this)}},{key:"focusout",value:function(t){if(this.isAttachedToDOM){var e=t.relatedTarget;null!=e&&e.closest("#".concat(this.id))||(t.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function(t){var e=this.parent.div.getBoundingClientRect();this.startX=t.clientX-e.x,this.startY=t.clientY-e.y,t.dataTransfer.setData("text/plain",this.id),t.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(t,e,n,r){var a=i(this.parent.viewportBaseDimensions,2),o=a[0],s=a[1],l=i(this.screenToPageTranslation(n,r),2);n=l[0],r=l[1],this.x=(t+n)/o,this.y=(e+r)/s,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(t,e){var n=i(this.parent.viewportBaseDimensions,2),r=n[0],a=n[1],o=i(this.screenToPageTranslation(t,e),2);t=o[0],e=o[1],this.x+=t/r,this.y+=e/a,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(t,e){switch(this.parent.viewport.rotation){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}},{key:"setDims",value:function(t,e){var n=i(this.parent.viewportBaseDimensions,2),r=n[0],a=n[1];this.div.style.width="".concat(100*t/r,"%"),this.div.style.height="".concat(100*e/a,"%")}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",h(this,d)),this.div.addEventListener("focusout",h(this,p));var t=i(this.getInitialTranslation(),2),e=t[0],n=t[1];return this.translate(e,n),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"pointerdown",value:function(t){var e=r.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this),c(this,v,!0))}},{key:"getRect",value:function(t,e){var n=i(this.parent.viewportBaseDimensions,2),r=n[0],a=n[1],o=i(this.parent.pageDimensions,2),s=o[0],l=o[1],u=s*t/r,c=l*e/a,h=this.x*s,f=this.y*l,d=this.width*s,p=this.height*l;switch(this.rotation){case 0:return[h+u,l-f-c-p,h+u+d,l-f-c];case 90:return[h+c,l-f+u,h+c+p,l-f+u+d];case 180:return[h-u-d,l-f+c,h-u,l-f+c+p];case 270:return[h-c-p,l-f-u-d,h-c,l-f-u];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(t,e){var n=i(t,4),r=n[0],a=n[1],o=n[2],s=n[3],l=o-r,u=s-a;switch(this.rotation){case 0:return[r,e-s,l,u];case 90:return[r,e-a,u,l];case 180:return[o,e-a,l,u];case 270:return[o,e-s,u,l];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){c(this,g,!0)}},{key:"disableEditMode",value:function(){c(this,g,!1)}},{key:"isInEditMode",value:function(){return h(this,g)}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var t;null===(t=this.div)||void 0===t||t.addEventListener("focusin",h(this,d))}},{key:"serialize",value:function(){(0,a.unreachable)("An editor must be serializable")}},{key:"remove",value:function(){this.div.removeEventListener("focusin",h(this,d)),this.div.removeEventListener("focusout",h(this,p)),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var t;null===(t=this.div)||void 0===t||t.classList.add("selectedEditor")}},{key:"unselect",value:function(){var t;null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor")}},{key:"updateParams",value:function(t,e){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"getIdForTextLayer",value:function(){return this.id}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return h(this,y)},set:function(t){c(this,y,t),t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}])&&s(e.prototype,n),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.AnnotationEditor=b,l(b,"_colorManager",new r.ColorManager),l(b,"_zIndex",1)},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=function(t,e,n){var r,a=m(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.addEventListener(i,t[i].bind(t))}}catch(t){a.e(t)}finally{a.f()}},e.opacityToHex=function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var r=n(1),a=n(129);function i(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){p(t,e),e.add(t)}function u(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e,n){p(t,e),e.set(t,n)}function p(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,g(t,e,"set"),n),n}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,g(t,e,"get"))}function g(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=b(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function b(t,e){if(t){if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var A=new WeakMap,k=function(){function t(){c(this,t),d(this,A,{writable:!0,value:0})}return f(t,[{key:"getId",value:function(){var t,e;return"".concat(r.AnnotationEditorPrefix).concat((v(this,A,(t=y(this,A),e=t++,t)),e))}}]),t}(),x=new WeakMap,_=new WeakMap,S=new WeakMap,E=new WeakMap,T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;c(this,t),d(this,x,{writable:!0,value:[]}),d(this,_,{writable:!0,value:!1}),d(this,S,{writable:!0,value:void 0}),d(this,E,{writable:!0,value:-1}),v(this,S,e)}return f(t,[{key:"add",value:function(t){var e=t.cmd,n=t.undo,r=t.mustExec,a=t.type,i=void 0===a?NaN:a,o=t.overwriteIfSameType,s=void 0!==o&&o,l=t.keepUndo,u=void 0!==l&&l;if(r&&e(),!y(this,_)){var c={cmd:e,undo:n,type:i};if(-1===y(this,E))return y(this,x).length>0&&(y(this,x).length=0),v(this,E,0),void y(this,x).push(c);if(s&&y(this,x)[y(this,E)].type===i)return u&&(c.undo=y(this,x)[y(this,E)].undo),void(y(this,x)[y(this,E)]=c);var h=y(this,E)+1;h===y(this,S)?y(this,x).splice(0,1):(v(this,E,h),h<y(this,x).length&&y(this,x).splice(h)),y(this,x).push(c)}}},{key:"undo",value:function(){-1!==y(this,E)&&(v(this,_,!0),y(this,x)[y(this,E)].undo(),v(this,_,!1),v(this,E,y(this,E)-1))}},{key:"redo",value:function(){y(this,E)<y(this,x).length-1&&(v(this,E,y(this,E)+1),v(this,_,!0),y(this,x)[y(this,E)].cmd(),v(this,_,!1))}},{key:"hasSomethingToUndo",value:function(){return-1!==y(this,E)}},{key:"hasSomethingToRedo",value:function(){return y(this,E)<y(this,x).length-1}},{key:"destroy",value:function(){v(this,x,null)}}]),t}();e.CommandManager=T;var C=new WeakSet,P=function(){function t(e){c(this,t),l(this,C),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var n,r=t.platform.isMac,a=m(e);try{for(a.s();!(n=a.n()).done;){var i,o=s(n.value,2),u=o[0],h=o[1],f=m(u);try{for(f.s();!(i=f.n()).done;){var d=i.value,p=d.startsWith("mac+");r&&p?(this.callbacks.set(d.slice(4),h),this.allKeys.add(d.split("+").at(-1))):r||p||(this.callbacks.set(d,h),this.allKeys.add(d.split("+").at(-1)))}}catch(t){f.e(t)}finally{f.f()}}}catch(t){a.e(t)}finally{a.f()}}return f(t,[{key:"exec",value:function(t,e){if(this.allKeys.has(e.key)){var n=this.callbacks.get(u(this,C,O).call(this,e));n&&(n.bind(t)(),e.stopPropagation(),e.preventDefault())}}}],[{key:"platform",get:function(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]),t}();function O(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);var e=this.buffer.join("+");return this.buffer.length=0,e}e.KeyboardManager=P;var M=new WeakMap,R=function(){function t(){c(this,t),d(this,M,{writable:!0,value:null})}return f(t,[{key:"copy",value:function(t){t&&(Array.isArray(t)?v(this,M,t.map((function(t){return t.serialize()}))):v(this,M,[t.serialize()]),v(this,M,y(this,M).filter((function(t){return!!t}))),0===y(this,M).length&&v(this,M,null))}},{key:"paste",value:function(){return y(this,M)}},{key:"isEmpty",value:function(){return null===y(this,M)}},{key:"destroy",value:function(){v(this,M,null)}}]),t}(),I=function(){function t(){c(this,t)}return f(t,[{key:"_colors",get:function(){var t=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(t),(0,r.shadow)(this,"_colors",t)}},{key:"convert",value:function(e){var n=(0,a.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;var r,i=m(this._colors);try{for(i.s();!(r=i.n()).done;){var o=s(r.value,2),l=o[0];if(o[1].every((function(t,e){return t===n[e]})))return t._colorsMapping.get(l)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"getHexCode",value:function(t){var e=this._colors.get(t);return e?r.Util.makeHexColor.apply(r.Util,i(e)):t}}]),t}();e.ColorManager=I,o(I,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var L=new WeakMap,F=new WeakMap,j=new WeakMap,D=new WeakMap,N=new WeakMap,B=new WeakMap,U=new WeakMap,W=new WeakMap,G=new WeakMap,q=new WeakMap,z=new WeakMap,V=new WeakMap,H=new WeakMap,X=new WeakMap,Y=new WeakMap,K=new WeakMap,J=new WeakMap,Q=new WeakMap,$=new WeakSet,Z=new WeakSet,tt=new WeakSet,et=new WeakSet,nt=new WeakSet,rt=new WeakSet,at=new WeakSet,it=new WeakSet,ot=new WeakSet,st=function(){function t(e,n){c(this,t),l(this,ot),l(this,it),l(this,at),l(this,rt),l(this,nt),l(this,et),l(this,tt),l(this,Z),l(this,$),d(this,L,{writable:!0,value:null}),d(this,F,{writable:!0,value:new Map}),d(this,j,{writable:!0,value:new Map}),d(this,D,{writable:!0,value:new R}),d(this,N,{writable:!0,value:new T}),d(this,B,{writable:!0,value:0}),d(this,U,{writable:!0,value:null}),d(this,W,{writable:!0,value:null}),d(this,G,{writable:!0,value:new k}),d(this,q,{writable:!0,value:!1}),d(this,z,{writable:!0,value:r.AnnotationEditorType.NONE}),d(this,V,{writable:!0,value:new Set}),d(this,H,{writable:!0,value:this.keydown.bind(this)}),d(this,X,{writable:!0,value:this.onEditingAction.bind(this)}),d(this,Y,{writable:!0,value:this.onPageChanging.bind(this)}),d(this,K,{writable:!0,value:this.onTextLayerRendered.bind(this)}),d(this,J,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),d(this,Q,{writable:!0,value:null}),v(this,Q,e),v(this,W,n),y(this,W)._on("editingaction",y(this,X)),y(this,W)._on("pagechanging",y(this,Y)),y(this,W)._on("textlayerrendered",y(this,K))}return f(t,[{key:"destroy",value:function(){u(this,Z,ut).call(this),y(this,W)._off("editingaction",y(this,X)),y(this,W)._off("pagechanging",y(this,Y)),y(this,W)._off("textlayerrendered",y(this,K));var t,e=m(y(this,j).values());try{for(e.s();!(t=e.n()).done;){t.value.destroy()}}catch(t){e.e(t)}finally{e.f()}y(this,j).clear(),y(this,F).clear(),v(this,L,null),y(this,V).clear(),y(this,D).destroy(),y(this,N).destroy()}},{key:"onPageChanging",value:function(t){var e=t.pageNumber;v(this,B,e-1)}},{key:"onTextLayerRendered",value:function(t){var e=t.pageNumber-1,n=y(this,j).get(e);null==n||n.onTextLayerRendered()}},{key:"focusMainContainer",value:function(){y(this,Q).focus()}},{key:"keydown",value:function(e){var n;null!==(n=this.getActive())&&void 0!==n&&n.shouldGetKeyboardEvents()||t._keyboardManager.exec(this,e)}},{key:"onEditingAction",value:function(t){["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)&&this[t.name]()}},{key:"setEditingState",value:function(t){t?(u(this,$,lt).call(this),u(this,tt,ct).call(this,{isEditing:y(this,z)!==r.AnnotationEditorType.NONE,isEmpty:u(this,it,vt).call(this),hasSomethingToUndo:y(this,N).hasSomethingToUndo(),hasSomethingToRedo:y(this,N).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:y(this,D).isEmpty()})):(u(this,Z,ut).call(this),u(this,tt,ct).call(this,{isEditing:!1}))}},{key:"registerEditorTypes",value:function(t){v(this,U,t);var e,n=m(y(this,U));try{for(n.s();!(e=n.n()).done;){var r=e.value;u(this,et,ht).call(this,r.defaultPropertiesToUpdate)}}catch(t){n.e(t)}finally{n.f()}}},{key:"getId",value:function(){return y(this,G).getId()}},{key:"addLayer",value:function(t){y(this,j).set(t.pageIndex,t),y(this,q)?t.enable():t.disable()}},{key:"removeLayer",value:function(t){y(this,j).delete(t.pageIndex)}},{key:"updateMode",value:function(t){if(v(this,z,t),t===r.AnnotationEditorType.NONE)this.setEditingState(!1),u(this,rt,dt).call(this);else{this.setEditingState(!0),u(this,nt,ft).call(this);var e,n=m(y(this,j).values());try{for(n.s();!(e=n.n()).done;){e.value.updateMode(t)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"updateToolbar",value:function(t){t!==y(this,z)&&y(this,W).dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function(t,e){var n,r=m(y(this,V));try{for(r.s();!(n=r.n()).done;){n.value.updateParams(t,e)}}catch(t){r.e(t)}finally{r.f()}var a,i=m(y(this,U));try{for(i.s();!(a=i.n()).done;){a.value.updateDefaultParams(t,e)}}catch(t){i.e(t)}finally{i.f()}}},{key:"getEditors",value:function(t){var e,n=[],r=m(y(this,F).values());try{for(r.s();!(e=r.n()).done;){var a=e.value;a.pageIndex===t&&n.push(a)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"getEditor",value:function(t){return y(this,F).get(t)}},{key:"addEditor",value:function(t){y(this,F).set(t.id,t)}},{key:"removeEditor",value:function(t){y(this,F).delete(t.id),this.unselect(t)}},{key:"setActiveEditor",value:function(t){y(this,L)!==t&&(v(this,L,t),t&&u(this,et,ht).call(this,t.propertiesToUpdate))}},{key:"toggleSelected",value:function(t){if(y(this,V).has(t))return y(this,V).delete(t),t.unselect(),void u(this,tt,ct).call(this,{hasSelectedEditor:this.hasSelection});y(this,V).add(t),t.select(),u(this,et,ht).call(this,t.propertiesToUpdate),u(this,tt,ct).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(t){var e,n=m(y(this,V));try{for(n.s();!(e=n.n()).done;){var r=e.value;r!==t&&r.unselect()}}catch(t){n.e(t)}finally{n.f()}y(this,V).clear(),y(this,V).add(t),t.select(),u(this,et,ht).call(this,t.propertiesToUpdate),u(this,tt,ct).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(t){return y(this,V).has(t)}},{key:"unselect",value:function(t){t.unselect(),y(this,V).delete(t),u(this,tt,ct).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return 0!==y(this,V).size}},{key:"undo",value:function(){y(this,N).undo(),u(this,tt,ct).call(this,{hasSomethingToUndo:y(this,N).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:u(this,it,vt).call(this)})}},{key:"redo",value:function(){y(this,N).redo(),u(this,tt,ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:y(this,N).hasSomethingToRedo(),isEmpty:u(this,it,vt).call(this)})}},{key:"addCommands",value:function(t){y(this,N).add(t),u(this,tt,ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:u(this,it,vt).call(this)})}},{key:"delete",value:function(){var t=this;if(y(this,L)&&y(this,L).commitOrRemove(),this.hasSelection){var e=i(y(this,V));this.addCommands({cmd:function(){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(t){n.e(t)}finally{n.f()}},undo:function(){var n,r=m(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;u(t,at,pt).call(t,a)}}catch(t){r.e(t)}finally{r.f()}},mustExec:!0})}}},{key:"copy",value:function(){if(y(this,L)&&y(this,L).commitOrRemove(),this.hasSelection){var t,e=[],n=m(y(this,V));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.isEmpty()||e.push(r)}}catch(t){n.e(t)}finally{n.f()}if(0===e.length)return;y(this,D).copy(e),u(this,tt,ct).call(this,{hasEmptyClipboard:!1})}}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){var t=this;if(!y(this,D).isEmpty()){this.unselectAll();var e=y(this,j).get(y(this,B)),n=y(this,D).paste().map((function(t){return e.deserialize(t)}));this.addCommands({cmd:function(){var e,r=m(n);try{for(r.s();!(e=r.n()).done;){var a=e.value;u(t,at,pt).call(t,a)}}catch(t){r.e(t)}finally{r.f()}u(t,ot,yt).call(t,n)},undo:function(){var t,e=m(n);try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}},mustExec:!0})}}},{key:"selectAll",value:function(){var t,e=m(y(this,V));try{for(e.s();!(t=e.n()).done;){t.value.commit()}}catch(t){e.e(t)}finally{e.f()}u(this,ot,yt).call(this,y(this,F).values())}},{key:"unselectAll",value:function(){if(y(this,L))y(this,L).commitOrRemove();else if(0!==u(this,ot,yt).size){var t,e=m(y(this,V));try{for(e.s();!(t=e.n()).done;){t.value.unselect()}}catch(t){e.e(t)}finally{e.f()}y(this,V).clear(),u(this,tt,ct).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function(t){return y(this,L)===t}},{key:"getActive",value:function(){return y(this,L)}},{key:"getMode",value:function(){return y(this,z)}}]),t}();function lt(){y(this,Q).addEventListener("keydown",y(this,H))}function ut(){y(this,Q).removeEventListener("keydown",y(this,H))}function ct(t){var e=this;Object.entries(t).some((function(t){var n=s(t,2),r=n[0],a=n[1];return y(e,J)[r]!==a}))&&y(this,W).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(y(this,J),t)})}function ht(t){y(this,W).dispatch("annotationeditorparamschanged",{source:this,details:t})}function ft(){if(!y(this,q)){v(this,q,!0);var t,e=m(y(this,j).values());try{for(e.s();!(t=e.n()).done;){t.value.enable()}}catch(t){e.e(t)}finally{e.f()}}}function dt(){if(this.unselectAll(),y(this,q)){v(this,q,!1);var t,e=m(y(this,j).values());try{for(e.s();!(t=e.n()).done;){t.value.disable()}}catch(t){e.e(t)}finally{e.f()}}}function pt(t){var e=y(this,j).get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)}function vt(){if(0===y(this,F).size)return!0;if(1===y(this,F).size){var t,e=m(y(this,F).values());try{for(e.s();!(t=e.n()).done;){return t.value.isEmpty()}}catch(t){e.e(t)}finally{e.f()}}return!1}function yt(t){y(this,V).clear();var e,n=m(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.isEmpty()||(y(this,V).add(r),r.select())}}catch(t){n.e(t)}finally{n.f()}u(this,tt,ct).call(this,{hasSelectedEditor:!0})}e.AnnotationEditorUIManager=st,o(st,"_keyboardManager",new P([[["ctrl+a","mac+meta+a"],st.prototype.selectAll],[["ctrl+c","mac+meta+c"],st.prototype.copy],[["ctrl+v","mac+meta+v"],st.prototype.paste],[["ctrl+x","mac+meta+x"],st.prototype.cut],[["ctrl+z","mac+meta+z"],st.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],st.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],st.prototype.delete],[["Escape","mac+Escape"],st.prototype.unselectAll]]))},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=n(1);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=3285377520,o=4294901760,s=65535,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.h1=e?4294967295&e:i,this.h2=e?4294967295&e:i}var e,n,l;return e=t,(n=[{key:"update",value:function(t){var e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(var a=0,i=t.length;a<i;a++){var l=t.charCodeAt(a);l<=255?e[n++]=l:(e[n++]=l>>>8,e[n++]=255&l)}}else{if(!(0,r.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");n=(e=t.slice()).byteLength}for(var u=n>>2,c=n-4*u,h=new Uint32Array(e.buffer,0,u),f=0,d=0,p=this.h1,v=this.h2,y=3432918353,g=461845907,m=11601,b=13715,w=0;w<u;w++)1&w?p=5*(p=(p^=f=(f=(f=(f=h[w])*y&o|f*m&s)<<15|f>>>17)*g&o|f*b&s)<<13|p>>>19)+3864292196:v=5*(v=(v^=d=(d=(d=(d=h[w])*y&o|d*m&s)<<15|d>>>17)*g&o|d*b&s)<<13|v>>>19)+3864292196;switch(f=0,c){case 3:f^=e[4*u+2]<<16;case 2:f^=e[4*u+1]<<8;case 1:f=(f=(f=(f^=e[4*u])*y&o|f*m&s)<<15|f>>>17)*g&o|f*b&s,1&u?p^=f:v^=f}this.h1=p,this.h2=v}},{key:"hexdigest",value:function(){var t=this.h1,e=this.h2;t=3981806797*(t^=e>>>1)&o|36045*t&s,t=444984403*(t^=(e=4283543511*e&o|(2950163797*(e<<16|t>>>16)&o)>>>16)>>>1)&o|60499*t&s;var n=((t^=(e=3301882366*e&o|(3120437893*(e<<16|t>>>16)&o)>>>16)>>>1)>>>0).toString(16),r=(e>>>0).toString(16);return n.padStart(8,"0")+r.padStart(8,"0")}}])&&a(e.prototype,n),l&&a(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.MurmurHash3_64=l},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var a=n(1);function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};l(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&n.call(m,i)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(u.arg)}var i;this._invoke=function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return i=i?i.then(r,r):r()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,l(b,"constructor",v),l(v,"constructor",p),p.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),l(A.prototype,o,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new A(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),l(b,s,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function c(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var y,g=function(){function t(e){var n=e.docId,r=e.onUnsupportedFeature,i=e.ownerDocument,o=void 0===i?globalThis.document:i;e.styleElement;d(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseFontLoader."),this.docId=n,this._onUnsupportedFeature=r,this._document=o,this.nativeFontFaces=[],this.styleElement=null}var e,n;return v(t,[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.push(t),this._document.fonts.add(t)}},{key:"insertRule",value:function(t){var e=this.styleElement;e||((e=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].append(e));var n=e.sheet;n.insertRule(t,n.cssRules.length)}},{key:"clear",value:function(){var t,e=h(this.nativeFontFaces);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._document.fonts.delete(n)}}catch(t){e.e(t)}finally{e.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(e=u().mark((function t(e){var n,r,i=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.attached&&!e.missingFile){t.next=2;break}return t.abrupt("return");case 2:if(e.attached=!0,!this.isFontLoadingAPISupported){t.next=19;break}if(!(n=e.createNativeFontFace())){t.next=18;break}return this.addNativeFontFace(n),t.prev=7,t.next=10,n.loaded;case 10:t.next=18;break;case 12:throw t.prev=12,t.t0=t.catch(7),this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,a.warn)("Failed to load font '".concat(n.family,"': '").concat(t.t0,"'.")),e.disableFontFace=!0,t.t0;case 18:return t.abrupt("return");case 19:if(!(r=e.createFontFaceRule())){t.next=26;break}if(this.insertRule(r),!this.isSyncFontLoadingSupported){t.next=24;break}return t.abrupt("return");case 24:return t.next=26,new Promise((function(t){var n=i._queueLoadingCallback(t);i._prepareFontLoadEvent([r],[e],n)}));case 26:case"end":return t.stop()}}),t,this,[[7,12]])})),n=function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(t){c(i,r,a,o,s,"next",t)}function s(t){c(i,r,a,o,s,"throw",t)}o(void 0)}))},function(t){return n.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function(t){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var t,e=!(null===(t=this._document)||void 0===t||!t.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",e)}},{key:"isSyncFontLoadingSupported",get:function(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(t,e,n){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),t}();e.FontLoader=y,e.FontLoader=y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(n,t);var e=o(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).loadingContext={requests:[],nextRequestId:0},r.loadTestFontId=0,r}return v(n,[{key:"isSyncFontLoadingSupported",get:function(){return(0,a.shadow)(this,"isSyncFontLoadingSupported",!1)}},{key:"_queueLoadingCallback",value:function(t){var e=this.loadingContext,n={id:"pdfjs-font-loading-".concat(e.nextRequestId++),done:!1,complete:function(){for((0,a.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.requests.length>0&&e.requests[0].done;){var t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(n),n}},{key:"_loadTestFont",get:function(){return(0,a.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(t,e,n){function r(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,r){return t.substring(0,e)+r+t.substring(e+n)}var o,s,l=this._document.createElement("canvas");l.width=1,l.height=1;var u=l.getContext("2d"),c=0;var f="lt".concat(Date.now()).concat(this.loadTestFontId++),d=this._loadTestFont,p=1482184792,v=r(d=i(d,976,f.length,f),16);for(o=0,s=f.length-3;o<s;o+=4)v=v-p+r(f,o)|0;o<f.length&&(v=v-p+r(f+"XXX",o)|0),d=i(d,16,4,(0,a.string32)(v));var y="url(data:font/opentype;base64,".concat(btoa(d),");"),g='@font-face {font-family:"'.concat(f,'";src:').concat(y,"}");this.insertRule(g);var m,b=[],w=h(e);try{for(w.s();!(m=w.n()).done;){var A=m.value;b.push(A.loadedName)}}catch(t){w.e(t)}finally{w.f()}b.push(f);var k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(var x=0,_=b;x<_.length;x++){var S=_[x],E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=S,k.append(E)}this._document.body.append(k),function t(e,n){if(++c>30)return(0,a.warn)("Load test font never loaded."),void n();u.font="30px "+e,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(f,(function(){k.remove(),n.complete()}))}}]),n}(g);var m=function(){function t(e,n){var r=n.isEvalSupported,a=void 0===r||r,i=n.disableFontFace,o=void 0!==i&&i,s=n.ignoreErrors,l=void 0!==s&&s,u=n.onUnsupportedFeature,c=n.fontRegistry,h=void 0===c?null:c;for(var f in d(this,t),this.compiledGlyphs=Object.create(null),e)this[f]=e[f];this.isEvalSupported=!1!==a,this.disableFontFace=!0===o,this.ignoreErrors=!0===l,this._onUnsupportedFeature=u,this.fontRegistry=h}return v(t,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var t;if(this.cssFontInfo){var e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var t,e=(0,a.bytesToString)(this.data),n="url(data:".concat(this.mimetype,";base64,").concat(btoa(e),");");if(this.cssFontInfo){var r="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(r+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),t='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(r,"src:").concat(n,"}")}else t='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,n),t}},{key:"getPathGenerator",value:function(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];var n;try{n=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,a.warn)('getPathGenerator - ignoring character: "'.concat(t,'".')),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){var r,i=[],o=h(n);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=void 0!==s.args?s.args.join(","):"";i.push("c.",s.cmd,"(",l,");\n")}}catch(t){o.e(t)}finally{o.f()}return this.compiledGlyphs[e]=new Function("c","size",i.join(""))}return this.compiledGlyphs[e]=function(t,e){var r,a=h(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;"scale"===i.cmd&&(i.args=[e,-e]),t[i.cmd].apply(t,i.args)}}catch(t){a.e(t)}finally{a.f()}}}}]),t}();e.FontFaceObject=m},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(1),a=n(129),i=n(138),o=n(139),s=n(3);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var b=4096,w=16;var A=function(){function t(e){y(this,t),this.canvasFactory=e,this.cache=Object.create(null)}return m(t,[{key:"getCanvas",value:function(t,e,n){var r;return void 0!==this.cache[t]?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}},{key:"delete",value:function(t){delete this.cache[t]}},{key:"clear",value:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}]),t}();function k(t,e,n,r,i,o,s,l,u,c){var h=d((0,a.getCurrentTransform)(t),6),f=h[0],p=h[1],v=h[2],y=h[3],g=h[4],m=h[5];if(0===p&&0===v){var b=s*f+g,w=Math.round(b),A=l*y+m,k=Math.round(A),x=(s+u)*f+g,_=Math.abs(Math.round(x)-w)||1,S=(l+c)*y+m,E=Math.abs(Math.round(S)-k)||1;return t.setTransform(Math.sign(f),0,0,Math.sign(y),w,k),t.drawImage(e,n,r,i,o,0,0,_,E),t.setTransform(f,p,v,y,g,m),[_,E]}if(0===f&&0===y){var T=l*v+g,C=Math.round(T),P=s*p+m,O=Math.round(P),M=(l+c)*v+g,R=Math.abs(Math.round(M)-C)||1,I=(s+u)*p+m,L=Math.abs(Math.round(I)-O)||1;return t.setTransform(0,Math.sign(p),Math.sign(v),0,C,O),t.drawImage(e,n,r,i,o,0,0,L,R),t.setTransform(f,p,v,y,g,m),[L,R]}return t.drawImage(e,n,r,i,o,s,l,u,c),[Math.hypot(f,p)*u,Math.hypot(v,y)*c]}var x=function(){function t(e,n){y(this,t),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,e,n])}return m(t,[{key:"clone",value:function(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}},{key:"setCurrentPoint",value:function(t,e){this.x=t,this.y=e}},{key:"updatePathMinMax",value:function(t,e,n){var a=d(r.Util.applyTransform([e,n],t),2);e=a[0],n=a[1],this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}},{key:"updateRectMinMax",value:function(t,e){var n=r.Util.applyTransform(e,t),a=r.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,n[0],a[0]),this.minY=Math.min(this.minY,n[1],a[1]),this.maxX=Math.max(this.maxX,n[0],a[0]),this.maxY=Math.max(this.maxY,n[1],a[1])}},{key:"updateScalingPathMinMax",value:function(t,e){r.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}},{key:"updateCurvePathMinMax",value:function(t,e,n,a,i,o,s,l,u,c){var h=r.Util.bezierBoundingBox(e,n,a,i,o,s,l,u);if(c)return c[0]=Math.min(c[0],h[0],h[2]),c[1]=Math.max(c[1],h[0],h[2]),c[2]=Math.min(c[2],h[1],h[3]),void(c[3]=Math.max(c[3],h[1],h[3]));this.updateRectMinMax(t,h)}},{key:"getPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.PathType.FILL,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[this.minX,this.minY,this.maxX,this.maxY];if(t===i.PathType.STROKE){e||(0,r.unreachable)("Stroke bounding box must include transform.");var a=r.Util.singularValueDecompose2dScale(e),o=a[0]*this.lineWidth/2,s=a[1]*this.lineWidth/2;n[0]-=o,n[1]-=s,n[2]+=o,n[3]+=s}return n}},{key:"updateClipFromPath",value:function(){var t=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.PathType.FILL,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}]),t}();function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var a,i,o,s,l,u,c,h,f,d=e.height,p=e.width,v=d%w,y=(d-v)/w,g=0===v?y:y+1,m=t.createImageData(p,w),b=0,A=e.data,k=m.data;if(n)switch(n.length){case 1:u=n[0],c=n[0],h=n[0],f=n[0];break;case 4:u=n[0],c=n[1],h=n[2],f=n[3]}if(e.kind===r.ImageKind.GRAYSCALE_1BPP){var x=A.byteLength,_=new Uint32Array(k.buffer,0,k.byteLength>>2),S=_.length,E=p+7>>3,T=4294967295,C=r.FeatureTest.isLittleEndian?4278190080:255;if(f&&255===f[0]&&0===f[255]){var P=[C,T];T=P[0],C=P[1]}for(i=0;i<g;i++){for(s=i<y?w:v,a=0,o=0;o<s;o++){for(var O=x-b,M=0,R=O>E?p:8*O-7,I=-8&R,L=0,F=0;M<I;M+=8)F=A[b++],_[a++]=128&F?T:C,_[a++]=64&F?T:C,_[a++]=32&F?T:C,_[a++]=16&F?T:C,_[a++]=8&F?T:C,_[a++]=4&F?T:C,_[a++]=2&F?T:C,_[a++]=1&F?T:C;for(;M<R;M++)0===L&&(F=A[b++],L=128),_[a++]=F&L?T:C,L>>=1}for(;a<S;)_[a++]=0;t.putImageData(m,0,i*w)}}else if(e.kind===r.ImageKind.RGBA_32BPP){var j=!!(u||c||h);for(o=0,l=p*w*4,i=0;i<y;i++){if(k.set(A.subarray(b,b+l)),b+=l,j)for(var D=0;D<l;D+=4)u&&(k[D+0]=u[k[D+0]]),c&&(k[D+1]=c[k[D+1]]),h&&(k[D+2]=h[k[D+2]]);t.putImageData(m,0,o),o+=w}if(i<g){if(l=p*v*4,k.set(A.subarray(b,b+l)),j)for(var N=0;N<l;N+=4)u&&(k[N+0]=u[k[N+0]]),c&&(k[N+1]=c[k[N+1]]),h&&(k[N+2]=h[k[N+2]]);t.putImageData(m,0,o)}}else{if(e.kind!==r.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));var B=!!(u||c||h);for(l=p*(s=w),i=0;i<g;i++){for(i>=y&&(l=p*(s=v)),a=0,o=l;o--;)k[a++]=A[b++],k[a++]=A[b++],k[a++]=A[b++],k[a++]=255;if(B)for(var U=0;U<a;U+=4)u&&(k[U+0]=u[k[U+0]]),c&&(k[U+1]=c[k[U+1]]),h&&(k[U+2]=h[k[U+2]]);t.putImageData(m,0,i*w)}}}}function S(t,e){if(e.bitmap)t.drawImage(e.bitmap,0,0);else for(var n=e.height,r=e.width,a=n%w,i=(n-a)/w,s=0===a?i:i+1,l=t.createImageData(r,w),u=0,c=e.data,h=l.data,f=0;f<s;f++){var d=f<i?w:a;u=(0,o.applyMaskImageData)({src:c,srcPos:u,dest:h,width:r,height:d}).srcPos,t.putImageData(l,0,f*w)}}function E(t,e){for(var n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],r=0,a=n.length;r<a;r++){var i=n[r];void 0!==t[i]&&(e[i]=t[i])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function T(t,e){t.strokeStyle=t.fillStyle=e||"#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function C(t,e,n,r){for(var a=t.length,i=3;i<a;i+=4){var o=t[i];if(0===o)t[i-3]=e,t[i-2]=n,t[i-1]=r;else if(o<255){var s=255-o;t[i-3]=t[i-3]*o+e*s>>8,t[i-2]=t[i-2]*o+n*s>>8,t[i-1]=t[i-1]*o+r*s>>8}}}function P(t,e,n){for(var r=t.length,a=3;a<r;a+=4){var i=n?n[t[a]]:t[a];e[a]=e[a]*i*.00392156862745098|0}}function O(t,e,n){for(var r=t.length,a=3;a<r;a+=4){var i=77*t[a-3]+152*t[a-2]+28*t[a-1];e[a]=n?e[a]*n[i>>8]>>8:e[a]*i>>16}}function M(t,e,n,r){var a=r[0],i=r[1],o=r[2]-a,s=r[3]-i;0!==o&&0!==s&&(!function(t,e,n,r,a,i,o,s,l,u,c){var h,f=!!i,d=f?i[0]:0,p=f?i[1]:0,v=f?i[2]:0;h="Luminosity"===a?O:P;for(var y=Math.min(r,Math.ceil(1048576/n)),g=0;g<r;g+=y){var m=Math.min(y,r-g),b=t.getImageData(s-u,g+(l-c),n,m),w=e.getImageData(s,g+l,n,m);f&&C(b.data,d,p,v),h(b.data,w.data,o),e.putImageData(w,s,g+l)}}(e.context,n,o,s,e.subtype,e.backdrop,e.transferMap,a,i,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}function R(t,e){var n=r.Util.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);var i=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:n[0]<=i||n[1]<=i}var I=["butt","round","square"],L=["miter","round","bevel"],F={},j={},D=new WeakSet,N=function(){function t(e,n,r,a,i,o,s,l){y(this,t),c(this,D),this.ctx=e,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=a,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=o,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==l?void 0:l.background)||null,this.foregroundColor=(null==l?void 0:l.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return m(t,[{key:"getObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}},{key:"beginDrawing",value:function(t){var e,n,r=t.transform,i=t.viewport,o=t.transparency,s=void 0!==o&&o,l=t.background,c=void 0===l?null:l,h=this.ctx.canvas.width,f=this.ctx.canvas.height,p=c||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;var v=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;var y,g,m=this.backgroundColor=this.ctx.fillStyle;if(this.ctx.fillStyle=p,y="string"==typeof(g=this.ctx.fillStyle)&&/^#[0-9A-Fa-f]{6}$/.test(g),"#000000"===v&&"#ffffff"===m||v===m||!y)this.foregroundColor=this.backgroundColor=null;else{var b=d((0,a.getRGB)(g),3),w=b[0],A=b[1],k=b[2],x=function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},_=Math.round(.2126*x(w)+.7152*x(A)+.0722*x(k));this.selectColor=function(t,e,n){var r=.2126*x(t)+.7152*x(e)+.0722*x(n);return Math.round(r)===_?m:v}}}if(this.ctx.fillStyle=this.backgroundColor||p,this.ctx.fillRect(0,0,h,f),this.ctx.restore(),s){var S,E=this.cachedCanvases.getCanvas("transparent",h,f);this.compositeCtx=this.ctx,this.transparentCanvas=E.canvas,this.ctx=E.context,this.ctx.save(),(S=this.ctx).transform.apply(S,u((0,a.getCurrentTransform)(this.compositeCtx)))}(this.ctx.save(),T(this.ctx,this.foregroundColor),r)&&((n=this.ctx).transform.apply(n,u(r)),this.outputScaleX=r[0],this.outputScaleY=r[0]);(e=this.ctx).transform.apply(e,u(i.transform)),this.viewportScale=i.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(t,e,n,a){var i=t.argsArray,o=t.fnArray,s=e||0,l=i.length;if(l===s)return s;for(var u,c=l-s>10&&"function"==typeof n,h=c?Date.now()+15:0,d=0,p=this.commonObjs,v=this.objs;;){if(void 0!==a&&s===a.nextBreakPoint)return a.breakIt(s,n),s;if((u=o[s])!==r.OPS.dependency)this[u].apply(this,i[s]);else{var y,g=f(i[s]);try{for(g.s();!(y=g.n()).done;){var m=y.value,b=m.startsWith("g_")?p:v;if(!b.has(m))return b.get(m,n),s}}catch(t){g.e(t)}finally{g.f()}}if(++s===l)return s;if(c&&++d>10){if(Date.now()>h)return n(),s;d=0}}}},{key:"endDrawing",value:function(){h(this,D,B).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var t,e=f(this._cachedBitmapsMap.values());try{for(e.s();!(t=e.n()).done;){var n,r=t.value,a=f(r.values());try{for(a.s();!(n=a.n()).done;){var i=n.value;"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement&&(i.width=i.height=0)}}catch(t){a.e(t)}finally{a.f()}r.clear()}}catch(t){e.e(t)}finally{e.f()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function(t,e){for(var n,r,a=t.width,i=t.height,o=Math.max(Math.hypot(e[0],e[1]),1),s=Math.max(Math.hypot(e[2],e[3]),1),l=a,u=i,c="prescale1";o>2&&l>1||s>2&&u>1;){var h=l,f=u;o>2&&l>1&&(o/=l/(h=Math.ceil(l/2))),s>2&&u>1&&(s/=u/(f=Math.ceil(u/2))),(r=(n=this.cachedCanvases.getCanvas(c,h,f)).context).clearRect(0,0,h,f),r.drawImage(t,0,0,l,u,0,0,h,f),t=n.canvas,l=h,u=f,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:u}}},{key:"_createMaskCanvas",value:function(t){var e,n,o,s,l=this.ctx,c=t.width,h=t.height,f=this.current.fillColor,d=this.current.patternFill,p=(0,a.getCurrentTransform)(l);if((t.bitmap||t.data)&&t.count>1){var v=t.bitmap||t.data.buffer,y=p.slice(0,4);n=JSON.stringify(d?y:[y,f]),(e=this._cachedBitmapsMap.get(v))||(e=new Map,this._cachedBitmapsMap.set(v,e));var g=e.get(n);if(g&&!d)return{canvas:g,offsetX:Math.round(Math.min(p[0],p[2])+p[4]),offsetY:Math.round(Math.min(p[1],p[3])+p[5])};o=g}o||S((s=this.cachedCanvases.getCanvas("maskCanvas",c,h)).context,t);var m=r.Util.transform(p,[1/c,0,0,-1/h,0,0]);m=r.Util.transform(m,[1,0,0,1,0,-h]);var b=r.Util.applyTransform([0,0],m),w=r.Util.applyTransform([c,h],m),A=r.Util.normalizeRect([b[0],b[1],w[0],w[1]]),x=Math.round(A[2]-A[0])||1,_=Math.round(A[3]-A[1])||1,E=this.cachedCanvases.getCanvas("fillCanvas",x,_),T=E.context,C=Math.min(b[0],w[0]),P=Math.min(b[1],w[1]);T.translate(-C,-P),T.transform.apply(T,u(m)),o||(o=(o=this._scaleImage(s.canvas,(0,a.getCurrentTransformInverse)(T))).img,e&&d&&e.set(n,o)),T.imageSmoothingEnabled=R((0,a.getCurrentTransform)(T),t.interpolate),k(T,o,0,0,o.width,o.height,0,0,c,h),T.globalCompositeOperation="source-in";var O=r.Util.transform((0,a.getCurrentTransformInverse)(T),[1,0,0,1,-C,-P]);return T.fillStyle=d?f.getPattern(l,this,O,i.PathType.FILL):f,T.fillRect(0,0,c,h),e&&!d&&(this.cachedCanvases.delete("fillCanvas"),e.set(n,E.canvas)),{canvas:E.canvas,offsetX:Math.round(C),offsetY:Math.round(P)}}},{key:"setLineWidth",value:function(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=t,this.ctx.lineWidth=t}},{key:"setLineCap",value:function(t){this.ctx.lineCap=I[t]}},{key:"setLineJoin",value:function(t){this.ctx.lineJoin=L[t]}},{key:"setMiterLimit",value:function(t){this.ctx.miterLimit=t}},{key:"setDash",value:function(t,e){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}},{key:"setRenderingIntent",value:function(t){}},{key:"setFlatness",value:function(t){}},{key:"setGState",value:function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e],a=r[0],i=r[1];switch(a){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=r[1];break;case"ca":this.current.fillAlpha=r[1],this.ctx.globalAlpha=r[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;var i=this.ctx;i.setTransform.apply(i,u((0,a.getCurrentTransform)(this.suspendedCtx))),E(this.suspendedCtx,i),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=function(){t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,r,a,i,o){e.transform(t,n,r,a,i,o),this.__originalTransform(t,n,r,a,i,o)},t.setTransform=function(t,n,r,a,i,o){e.setTransform(t,n,r,a,i,o),this.__originalSetTransform(t,n,r,a,i,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,r,a,i,o){e.bezierCurveTo(t,n,r,a,i,o),this.__originalBezierCurveTo(t,n,r,a,i,o)},t.rect=function(t,n,r,a){e.rect(t,n,r,a),this.__originalRect(t,n,r,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),E(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(t){if(this.current.activeSMask){t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var e=this.current.activeSMask;M(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.inSMaskMode?(E(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),E(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(t,e,n,r,a,i){this.ctx.transform(t,e,n,r,a,i),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(t,e,n){for(var i,o,s=this.ctx,l=this.current,u=l.x,c=l.y,h=(0,a.getCurrentTransform)(s),f=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],d=f?n.slice(0):null,p=0,v=0,y=t.length;p<y;p++)switch(0|t[p]){case r.OPS.rectangle:u=e[v++],c=e[v++];var g=e[v++],m=e[v++],b=u+g,w=c+m;s.moveTo(u,c),0===g||0===m?s.lineTo(b,w):(s.lineTo(b,c),s.lineTo(b,w),s.lineTo(u,w)),f||l.updateRectMinMax(h,[u,c,b,w]),s.closePath();break;case r.OPS.moveTo:u=e[v++],c=e[v++],s.moveTo(u,c),f||l.updatePathMinMax(h,u,c);break;case r.OPS.lineTo:u=e[v++],c=e[v++],s.lineTo(u,c),f||l.updatePathMinMax(h,u,c);break;case r.OPS.curveTo:i=u,o=c,u=e[v+4],c=e[v+5],s.bezierCurveTo(e[v],e[v+1],e[v+2],e[v+3],u,c),l.updateCurvePathMinMax(h,i,o,e[v],e[v+1],e[v+2],e[v+3],u,c,d),v+=6;break;case r.OPS.curveTo2:i=u,o=c,s.bezierCurveTo(u,c,e[v],e[v+1],e[v+2],e[v+3]),l.updateCurvePathMinMax(h,i,o,u,c,e[v],e[v+1],e[v+2],e[v+3],d),u=e[v+2],c=e[v+3],v+=4;break;case r.OPS.curveTo3:i=u,o=c,u=e[v+2],c=e[v+3],s.bezierCurveTo(e[v],e[v+1],u,c,u,c),l.updateCurvePathMinMax(h,i,o,e[v],e[v+1],u,c,u,c,d),v+=4;break;case r.OPS.closePath:s.closePath()}f&&l.updateScalingPathMinMax(h,d),l.setCurrentPoint(u,c)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(t){t=void 0===t||t;var e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===l(n)&&null!=n&&n.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,(0,a.getCurrentTransformInverse)(e),i.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(t){t=void 0===t||t;var e=this.ctx,n=this.current.fillColor,r=!1;this.current.patternFill&&(e.save(),e.fillStyle=n.getPattern(e,this,(0,a.getCurrentTransformInverse)(e),i.PathType.FILL),r=!0);var o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=F}},{key:"eoClip",value:function(){this.pendingClip=j}},{key:"beginText",value:function(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.setTransform.apply(e,u(a.transform)),e.translate(a.x,a.y),a.addToPath(e,a.fontSize)}}catch(t){r.e(t)}finally{r.f()}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setFont",value:function(t,e){var n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,!n.isType3Font){var i=n.loadedName||"sans-serif",o="normal";n.black?o="900":n.bold&&(o="bold");var s=n.italic?"italic":"normal",l='"'.concat(i,'", ').concat(n.fallbackName),u=e;e<16?u=16:e>100&&(u=100),this.current.fontSizeScale=e/u,this.ctx.font="".concat(s," ").concat(o," ").concat(u,"px ").concat(l)}}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"moveText",value:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}},{key:"setLeadingMoveText",value:function(t,e){this.setLeading(-e),this.moveText(t,e)}},{key:"setTextMatrix",value:function(t,e,n,r,a,i){this.current.textMatrix=[t,e,n,r,a,i],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(t,e,n,i){var o,s=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,f=l.fontSize/l.fontSizeScale,d=h&r.TextRenderingMode.FILL_STROKE_MASK,p=!!(h&r.TextRenderingMode.ADD_TO_PATH_FLAG),v=l.patternFill&&!c.missingFile;((c.disableFontFace||p||v)&&(o=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||v?(s.save(),s.translate(e,n),s.beginPath(),o(s,f),i&&s.setTransform.apply(s,u(i)),d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||s.fill(),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||s.stroke(),s.restore()):(d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||s.fillText(t,e,n),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||s.strokeText(t,e,n)),p)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(s),x:e,y:n,fontSize:f,addToPath:o})}},{key:"isFontSubpixelAAEnabled",get:function(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,n=!1,a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)}},{key:"showText",value:function(t){var e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);var o=e.fontSize;if(0!==o){var s,l=this.ctx,c=e.fontSizeScale,h=e.charSpacing,f=e.wordSpacing,d=e.fontDirection,p=e.textHScale*d,v=t.length,y=n.vertical,g=y?1:-1,m=n.defaultVMetrics,b=o*e.fontMatrix[0],w=e.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;if(l.save(),l.transform.apply(l,u(e.textMatrix)),l.translate(e.x,e.y+e.textRise),d>0?l.scale(p,-1):l.scale(p,1),e.patternFill){l.save();var A=e.fillColor.getPattern(l,this,(0,a.getCurrentTransformInverse)(l),i.PathType.FILL);s=(0,a.getCurrentTransform)(l),l.restore(),l.fillStyle=A}var k=e.lineWidth,x=e.textMatrixScale;if(0===x||0===k){var _=e.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;_!==r.TextRenderingMode.STROKE&&_!==r.TextRenderingMode.FILL_STROKE||(k=this.getSinglePixelWidth())}else k/=x;1!==c&&(l.scale(c,c),k/=c),l.lineWidth=k;var S,E=0;for(S=0;S<v;++S){var T=t[S];if("number"!=typeof T){var C=!1,P=(T.isSpace?f:0)+h,O=T.fontChar,M=T.accent,R=void 0,I=void 0,L=T.width;if(y){var F=T.vmetric||m,j=-(T.vmetric?F[1]:.5*L)*b,D=F[2]*b;L=F?-F[0]:L,R=j/c,I=(E+D)/c}else R=E/c,I=0;if(n.remeasure&&L>0){var N=1e3*l.measureText(O).width/o*c;if(L<N&&this.isFontSubpixelAAEnabled){var B=L/N;C=!0,l.save(),l.scale(B,1),R/=B}else L!==N&&(R+=(L-N)/2e3*o/c)}if(this.contentVisible&&(T.isInFont||n.missingFile))if(w&&!M)l.fillText(O,R,I);else if(this.paintChar(O,R,I,s),M){var U=R+o*M.offset.x/c,W=I-o*M.offset.y/c;this.paintChar(M.fontChar,U,W,s)}E+=y?L*b-P*d:L*b+P*d,C&&l.restore()}else E+=g*T*o/1e3}y?e.y-=E:e.x+=E*p,l.restore(),this.compose()}}},{key:"showType3Text",value:function(t){var e,n,a,i,o=this.ctx,s=this.current,l=s.font,c=s.fontSize,h=s.fontDirection,f=l.vertical?1:-1,d=s.charSpacing,p=s.wordSpacing,v=s.textHScale*h,y=s.fontMatrix||r.FONT_IDENTITY_MATRIX,g=t.length;if(!(s.textRenderingMode===r.TextRenderingMode.INVISIBLE)&&0!==c){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,u(s.textMatrix)),o.translate(s.x,s.y),o.scale(v,h),e=0;e<g;++e)if("number"!=typeof(n=t[e])){var m=(n.isSpace?p:0)+d,b=l.charProcOperatorList[n.operatorListId];if(b)this.contentVisible&&(this.processingType3=n,this.save(),o.scale(c,c),o.transform.apply(o,u(y)),this.executeOperatorList(b),this.restore()),a=r.Util.applyTransform([n.width,0],y)[0]*c+m,o.translate(a,0),s.x+=a*v;else(0,r.warn)('Type3 character "'.concat(n.operatorListId,'" is not available.'))}else i=f*n*c/1e3,this.ctx.translate(i,0),s.x+=i*v;o.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(t,e){}},{key:"setCharWidthAndBounds",value:function(t,e,n,r,a,i){this.ctx.rect(n,r,a-n,i-r),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(e){var n,r=this;if("TilingPattern"===e[0]){var o=e[1],s=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),l={createCanvasGraphics:function(e){return new t(e,r.commonObjs,r.objs,r.canvasFactory)}};n=new i.TilingPattern(e,o,this.ctx,l,s)}else n=this._getPattern(e[1],e[2]);return n}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(t,e,n){var a,i=(null===(a=this.selectColor)||void 0===a?void 0:a.call(this,t,e,n))||r.Util.makeHexColor(t,e,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}},{key:"setFillRGBColor",value:function(t,e,n){var a,i=(null===(a=this.selectColor)||void 0===a?void 0:a.call(this,t,e,n))||r.Util.makeHexColor(t,e,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}},{key:"_getPattern",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=(0,i.getShadingPattern)(this.objs.get(t)),this.cachedPatterns.set(t,e)),n&&(e.matrix=n),e}},{key:"shadingFill",value:function(t){if(this.contentVisible){var e=this.ctx;this.save();var n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,(0,a.getCurrentTransformInverse)(e),i.PathType.SHADING);var o=(0,a.getCurrentTransformInverse)(e);if(o){var s=e.canvas,l=s.width,u=s.height,c=r.Util.applyTransform([0,0],o),h=r.Util.applyTransform([0,u],o),f=r.Util.applyTransform([l,0],o),d=r.Util.applyTransform([l,u],o),p=Math.min(c[0],h[0],f[0],d[0]),v=Math.min(c[1],h[1],f[1],d[1]),y=Math.max(c[0],h[0],f[0],d[0]),g=Math.max(c[1],h[1],f[1],d[1]);this.ctx.fillRect(p,v,y-p,g-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,r.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,r.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,u(t)),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),e)){var n=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],n,r),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var e=this.ctx;t.isolated||(0,r.info)("TODO: Support non-isolated groups."),t.knockout&&(0,r.warn)("Knockout groups not supported.");var n=(0,a.getCurrentTransform)(e);if(t.matrix&&e.transform.apply(e,u(t.matrix)),!t.bbox)throw new Error("Bounding box is required.");var i=r.Util.getAxialAlignedBoundingBox(t.bbox,(0,a.getCurrentTransform)(e)),o=[0,0,e.canvas.width,e.canvas.height];i=r.Util.intersect(i,o)||[0,0,0,0];var s=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-s,1),h=Math.max(Math.ceil(i[3])-l,1),f=1,d=1;c>b&&(f=c/b,c=b),h>b&&(d=h/b,h=b),this.current.startNewPathAndClipBox([0,0,c,h]);var p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);var v=this.cachedCanvases.getCanvas(p,c,h),y=v.context;y.scale(1/f,1/d),y.translate(-s,-l),y.transform.apply(y,u(n)),t.smask?this.smaskStack.push({canvas:v.canvas,context:y,offsetX:s,offsetY:l,scaleX:f,scaleY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(s,l),e.scale(f,d),e.save()),E(e,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}}},{key:"endGroup",value:function(t){if(this.contentVisible){this.groupLevel--;var e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{var i;this.ctx.restore();var o=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),(i=this.ctx).setTransform.apply(i,u(o));var s=r.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],o);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(s)}}}},{key:"beginAnnotation",value:function(t,e,n,i,o){var s;(h(this,D,B).call(this),T(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform)&&(s=this.ctx).setTransform.apply(s,u(this.baseTransform));if(Array.isArray(e)&&4===e.length){var l=e[2]-e[0],c=e[3]-e[1];if(o&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=l,e[3]=c;var f=d(r.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),2),p=f[0],v=f[1],y=this.viewportScale,g=Math.ceil(l*this.outputScaleX*y),m=Math.ceil(c*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(g,m);var b=this.annotationCanvas,w=b.canvas,A=b.context;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.setTransform(p,0,0,-v,0,c*v),T(this.ctx,this.foregroundColor)}else T(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],l,c),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,u(n)),this.transform.apply(this,u(i))}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(t){if(this.contentVisible){var e=t.count;(t=this.getObject(t.data,t)).count=e;var n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(t){var e=t.width,n=t.height;if(e>1e3||n>1e3)return null;var r,a,i,o,l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=e+1,c=new Uint8Array(u*(n+1)),h=e+7&-8,d=new Uint8Array(h*n),p=0,v=f(t.data);try{for(v.s();!(o=v.n()).done;)for(var y=o.value,g=128;g>0;)d[p++]=y&g?0:255,g>>=1}catch(t){v.e(t)}finally{v.f()}var m=0;for(0!==d[p=0]&&(c[0]=1,++m),a=1;a<e;a++)d[p]!==d[p+1]&&(c[a]=d[p]?2:1,++m),p++;for(0!==d[p]&&(c[a]=2,++m),r=1;r<n;r++){i=r*u,d[(p=r*h)-h]!==d[p]&&(c[i]=d[p]?1:8,++m);var b=(d[p]?4:0)+(d[p-h]?8:0);for(a=1;a<e;a++)l[b=(b>>2)+(d[p+1]?4:0)+(d[p-h+1]?8:0)]&&(c[i+a]=l[b],++m),p++;if(d[p-h]!==d[p]&&(c[i+a]=d[p]?2:4,++m),m>1e3)return null}for(i=r*u,0!==d[p=h*(n-1)]&&(c[i]=8,++m),a=1;a<e;a++)d[p]!==d[p+1]&&(c[i+a]=d[p]?4:8,++m),p++;if(0!==d[p]&&(c[i+a]=4,++m),m>1e3)return null;var w,A,k,x=new Int32Array([0,u,-1,0,-u,0,0,0,1]);for(s.isNodeJS?A=[]:w=new Path2D,r=0;m&&r<=n;r++){for(var _=r*u,S=_+e;_<S&&!c[_];)_++;if(_!==S){w?w.moveTo(_%u,r):k=[_%u,r];var E=_,T=c[_];do{var C=x[T];do{_+=C}while(!c[_]);var P=c[_];5!==P&&10!==P?(T=P,c[_]=0):(T=P&51*T>>4,c[_]&=T>>2|T<<2),w?w.lineTo(_%u,_/u|0):k.push(_%u,_/u|0),c[_]||--m}while(E!==_);w||A.push(k),--r}}return d=null,c=null,function(t){if(t.save(),t.scale(1/e,-1/n),t.translate(0,-n),w)t.fill(w);else{t.beginPath();var r,a=f(A);try{for(a.s();!(r=a.n()).done;){var i=r.value;t.moveTo(i[0],i[1]);for(var o=2,s=i.length;o<s;o+=2)t.lineTo(i[o],i[o+1])}}catch(t){a.e(t)}finally{a.f()}t.fill()}t.beginPath(),t.restore()}}(t)),r.compiled))r.compiled(n);else{var a=this._createMaskCanvas(t),i=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(i,a.offsetX,a.offsetY),n.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var l=this.ctx;l.save();var u=(0,a.getCurrentTransform)(l);l.transform(e,n,i,o,0,0);var c=this._createMaskCanvas(t);l.setTransform(1,0,0,1,0,0);for(var h=0,f=s.length;h<f;h+=2){var p=r.Util.transform(u,[e,n,i,o,s[h],s[h+1]]),v=r.Util.applyTransform([0,0],p),y=d(v,2),g=y[0],m=y[1];l.drawImage(c.canvas,g,m)}l.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(t){if(this.contentVisible){var e,n=this.ctx,r=this.current.fillColor,o=this.current.patternFill,s=f(t);try{for(s.s();!(e=s.n()).done;){var l=e.value,c=l.data,h=l.width,d=l.height,p=l.transform,v=this.cachedCanvases.getCanvas("maskCanvas",h,d),y=v.context;y.save(),S(y,this.getObject(c,l)),y.globalCompositeOperation="source-in",y.fillStyle=o?r.getPattern(y,this,(0,a.getCurrentTransformInverse)(n),i.PathType.FILL):r,y.fillRect(0,0,h,d),y.restore(),n.save(),n.transform.apply(n,u(p)),n.scale(1,-1),k(n,v.canvas,0,0,h,d,0,-1,1,1),n.restore()}}catch(t){s.e(t)}finally{s.f()}this.compose()}}},{key:"paintImageXObject",value:function(t){if(this.contentVisible){var e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,r.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(t,e,n,a){if(this.contentVisible){var i=this.getObject(t);if(i){for(var o=i.width,s=i.height,l=[],u=0,c=a.length;u<c;u+=2)l.push({transform:[e,0,0,n,a[u],a[u+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(i,l)}else(0,r.warn)("Dependent image isn't ready yet")}}},{key:"paintInlineImageXObject",value:function(t){if(this.contentVisible){var e,n=t.width,r=t.height,i=this.ctx;if(this.save(),i.scale(1/n,-1/r),"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)e=t;else{var o=this.cachedCanvases.getCanvas("inlineImage",n,r);_(o.context,t,this.current.transferMaps),e=o.canvas}var s=this._scaleImage(e,(0,a.getCurrentTransformInverse)(i));i.imageSmoothingEnabled=R((0,a.getCurrentTransform)(i),t.interpolate);var l=d(k(i,s.img,0,0,s.paintWidth,s.paintHeight,0,-r,n,r),2),u=l[0],c=l[1];if(this.imageLayer){var h=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:t,left:h[0],top:h[1],width:u,height:c})}this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(t,e){if(this.contentVisible){var n=this.ctx,r=t.width,a=t.height,i=this.cachedCanvases.getCanvas("inlineImage",r,a);_(i.context,t,this.current.transferMaps);var o,s=f(e);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(n.save(),n.transform.apply(n,u(l.transform)),n.scale(1,-1),k(n,i.canvas,l.x,l.y,l.w,l.h,0,-1,1,1),this.imageLayer){var c=this.getCanvasPosition(l.x,l.y);this.imageLayer.appendImage({imgData:t,left:c[0],top:c[1],width:r,height:a})}n.restore()}}catch(t){s.e(t)}finally{s.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(t){}},{key:"markPointProps",value:function(t,e){}},{key:"beginMarkedContent",value:function(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(t){var e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);var n=this.ctx;this.pendingClip&&(e||(this.pendingClip===j?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var t=(0,a.getCurrentTransform)(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(!this._cachedScaleForStroking){var t,e,n=this.current.lineWidth,r=(0,a.getCurrentTransform)(this.ctx);if(0===r[1]&&0===r[2]){var i=Math.abs(r[0]),o=Math.abs(r[3]);if(0===n)t=1/i,e=1/o;else{var s=i*n,l=o*n;t=s<1?1/s:1,e=l<1?1/l:1}}else{var u=Math.abs(r[0]*r[3]-r[2]*r[1]),c=Math.hypot(r[0],r[1]),h=Math.hypot(r[2],r[3]);if(0===n)t=h/u,e=c/u;else{var f=n*u;t=h>f?h/f:1,e=c>f?c/f:1}}this._cachedScaleForStroking=[t,e]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(t){var e=this.ctx,n=this.current.lineWidth,r=d(this.getScaleForStroking(),2),i=r[0],o=r[1];if(e.lineWidth=n||1,1!==i||1!==o){var s,l,c;t&&(s=(0,a.getCurrentTransform)(e),l=e.getLineDash().slice(),c=e.lineDashOffset),e.scale(i,o);var h=Math.max(i,o);e.setLineDash(e.getLineDash().map((function(t){return t/h}))),e.lineDashOffset/=h,e.stroke(),t&&(e.setTransform.apply(e,u(s)),e.setLineDash(l),e.lineDashOffset=c)}else e.stroke()}},{key:"getCanvasPosition",value:function(t,e){var n=(0,a.getCurrentTransform)(this.ctx);return[n[0]*t+n[2]*e+n[4],n[1]*t+n[3]*e+n[5]]}},{key:"isContentVisible",value:function(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}]),t}();function B(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(var U in e.CanvasGraphics=N,r.OPS)void 0!==N.prototype[U]&&(N.prototype[r.OPS[U]]=N.prototype[U])},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new k(t);case"Mesh":return new S(t);case"Dummy":return new E}throw new Error("Unknown IR type: ".concat(t[0]))};var a=n(1),i=n(129),o=n(3);function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=u(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var b={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function w(t,e){if(e&&!o.isNodeJS){var n=e[2]-e[0],r=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],n,r),t.clip(a)}}e.PathType=b;var A=function(){function t(){y(this,t),this.constructor===t&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}return m(t,[{key:"getPattern",value:function(){(0,a.unreachable)("Abstract method `getPattern` called.")}}]),t}(),k=function(t){h(n,t);var e=d(n);function n(t){var r;return y(this,n),(r=e.call(this))._type=t[1],r._bbox=t[2],r._colorStops=t[3],r._p0=t[4],r._p1=t[5],r._r0=t[6],r._r1=t[7],r.matrix=null,r}return m(n,[{key:"_createGradient",value:function(t){var e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var n,r=l(this._colorStops);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.addColorStop(a[0],a[1])}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"getPattern",value:function(t,e,n,r){var o;if(r===b.STROKE||r===b.FILL){var l=e.current.getClippedPathBoundingBox(r,(0,i.getCurrentTransform)(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,c=Math.ceil(l[3]-l[1])||1,h=e.cachedCanvases.getCanvas("pattern",u,c,!0),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),n=a.Util.transform(n,[1,0,0,1,l[0],l[1]]),f.transform.apply(f,s(e.baseTransform)),this.matrix&&f.transform.apply(f,s(this.matrix)),w(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=t.createPattern(h.canvas,"no-repeat");var d=new DOMMatrix(n);try{o.setTransform(d)}catch(t){(0,a.warn)('RadialAxialShadingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}}else w(t,this._bbox),o=this._createGradient(t);return o}}]),n}(A);function x(t,e,n,r,a,i,o,s){var l,u=e.coords,c=e.colors,h=t.data,f=4*t.width;u[n+1]>u[r+1]&&(l=n,n=r,r=l,l=i,i=o,o=l),u[r+1]>u[a+1]&&(l=r,r=a,a=l,l=o,o=s,s=l),u[n+1]>u[r+1]&&(l=n,n=r,r=l,l=i,i=o,o=l);var d=(u[n]+e.offsetX)*e.scaleX,p=(u[n+1]+e.offsetY)*e.scaleY,v=(u[r]+e.offsetX)*e.scaleX,y=(u[r+1]+e.offsetY)*e.scaleY,g=(u[a]+e.offsetX)*e.scaleX,m=(u[a+1]+e.offsetY)*e.scaleY;if(!(p>=m))for(var b,w,A,k,x,_,S,E,T=c[i],C=c[i+1],P=c[i+2],O=c[o],M=c[o+1],R=c[o+2],I=c[s],L=c[s+1],F=c[s+2],j=Math.round(p),D=Math.round(m),N=j;N<=D;N++){if(N<y){var B=void 0;b=d-(d-v)*(B=N<p?0:(p-N)/(p-y)),w=T-(T-O)*B,A=C-(C-M)*B,k=P-(P-R)*B}else{var U=void 0;b=v-(v-g)*(U=N>m?1:y===m?0:(y-N)/(y-m)),w=O-(O-I)*U,A=M-(M-L)*U,k=R-(R-F)*U}var W=void 0;x=d-(d-g)*(W=N<p?0:N>m?1:(p-N)/(p-m)),_=T-(T-I)*W,S=C-(C-L)*W,E=P-(P-F)*W;for(var G=Math.round(Math.min(b,x)),q=Math.round(Math.max(b,x)),z=f*N+4*G,V=G;V<=q;V++)(W=(b-V)/(b-x))<0?W=0:W>1&&(W=1),h[z++]=w-(w-_)*W|0,h[z++]=A-(A-S)*W|0,h[z++]=k-(k-E)*W|0,h[z++]=255}}function _(t,e,n){var r,a,i=e.coords,o=e.colors;switch(e.type){case"lattice":var s=e.verticesPerRow,l=Math.floor(i.length/s)-1,u=s-1;for(r=0;r<l;r++)for(var c=r*s,h=0;h<u;h++,c++)x(t,n,i[c],i[c+1],i[c+s],o[c],o[c+1],o[c+s]),x(t,n,i[c+s+1],i[c+1],i[c+s],o[c+s+1],o[c+1],o[c+s]);break;case"triangles":for(r=0,a=i.length;r<a;r+=3)x(t,n,i[r],i[r+1],i[r+2],o[r],o[r+1],o[r+2]);break;default:throw new Error("illegal figure")}}var S=function(t){h(n,t);var e=d(n);function n(t){var r;return y(this,n),(r=e.call(this))._coords=t[2],r._colors=t[3],r._figures=t[4],r._bounds=t[5],r._bbox=t[7],r._background=t[8],r.matrix=null,r}return m(n,[{key:"_createMeshCanvas",value:function(t,e,n){var r=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),i=Math.ceil(this._bounds[2])-r,o=Math.ceil(this._bounds[3])-a,s=Math.min(Math.ceil(Math.abs(i*t[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(o*t[1]*1.1)),3e3),c=i/s,h=o/u,f={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-a,scaleX:1/c,scaleY:1/h},d=s+4,p=u+4,v=n.getCanvas("mesh",d,p,!1),y=v.context,g=y.createImageData(s,u);if(e)for(var m=g.data,b=0,w=m.length;b<w;b+=4)m[b]=e[0],m[b+1]=e[1],m[b+2]=e[2],m[b+3]=255;var A,k=l(this._figures);try{for(k.s();!(A=k.n()).done;){_(g,A.value,f)}}catch(t){k.e(t)}finally{k.f()}return y.putImageData(g,2,2),{canvas:v.canvas,offsetX:r-2*c,offsetY:a-2*h,scaleX:c,scaleY:h}}},{key:"getPattern",value:function(t,e,n,r){var o;if(w(t,this._bbox),r===b.SHADING)o=a.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(t));else if(o=a.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){var l=a.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*l[0],o[1]*l[1]]}var u=this._createMeshCanvas(o,r===b.SHADING?null:this._background,e.cachedCanvases);return r!==b.SHADING&&(t.setTransform.apply(t,s(e.baseTransform)),this.matrix&&t.transform.apply(t,s(this.matrix))),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}]),n}(A),E=function(t){h(n,t);var e=d(n);function n(){return y(this,n),e.apply(this,arguments)}return m(n,[{key:"getPattern",value:function(){return"hotpink"}}]),n}(A);var T=1,C=2,P=function(){function t(e,n,r,a,i){y(this,t),this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=n,this.ctx=r,this.canvasGraphicsFactory=a,this.baseTransform=i}return m(t,[{key:"createPatternCanvas",value:function(t){var e=this.operatorList,n=this.bbox,r=this.xstep,o=this.ystep,s=this.paintType,l=this.tilingType,u=this.color,c=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+l);var h=n[0],f=n[1],d=n[2],p=n[3],v=a.Util.singularValueDecompose2dScale(this.matrix),y=a.Util.singularValueDecompose2dScale(this.baseTransform),g=[v[0]*y[0],v[1]*y[1]],m=this.getSizeAndScale(r,this.ctx.canvas.width,g[0]),b=this.getSizeAndScale(o,this.ctx.canvas.height,g[1]),w=t.cachedCanvases.getCanvas("pattern",m.size,b.size,!0),A=w.context,k=c.createCanvasGraphics(A);k.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(k,s,u);var x=h,_=f,S=d,E=p;return h<0&&(x=0,S+=Math.abs(h)),f<0&&(_=0,E+=Math.abs(f)),A.translate(-m.scale*x,-b.scale*_),k.transform(m.scale,0,0,b.scale,0,0),A.save(),this.clipBbox(k,x,_,S,E),k.baseTransform=(0,i.getCurrentTransform)(k.ctx),k.executeOperatorList(e),k.endDrawing(),{canvas:w.canvas,scaleX:m.scale,scaleY:b.scale,offsetX:x,offsetY:_}}},{key:"getSizeAndScale",value:function(e,n,r){e=Math.abs(e);var a=Math.max(t.MAX_PATTERN_SIZE,n),i=Math.ceil(e*r);return i>=a?i=a:r=i/e,{scale:r,size:i}}},{key:"clipBbox",value:function(t,e,n,r,a){var o=r-e,s=a-n;t.ctx.rect(e,n,o,s),t.current.updateRectMinMax((0,i.getCurrentTransform)(t.ctx),[e,n,r,a]),t.clip(),t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(t,e,n){var r=t.ctx,i=t.current;switch(e){case T:var o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,i.fillColor=o.fillStyle,i.strokeColor=o.strokeStyle;break;case C:var s=a.Util.makeHexColor(n[0],n[1],n[2]);r.fillStyle=s,r.strokeStyle=s,i.fillColor=s,i.strokeColor=s;break;default:throw new a.FormatError("Unsupported paint type: ".concat(e))}}},{key:"getPattern",value:function(t,e,n,r){var i=n;r!==b.SHADING&&(i=a.Util.transform(i,e.baseTransform),this.matrix&&(i=a.Util.transform(i,this.matrix)));var o=this.createPatternCanvas(e),s=new DOMMatrix(i);s=(s=s.translate(o.offsetX,o.offsetY)).scale(1/o.scaleX,1/o.scaleY);var l=t.createPattern(o.canvas,"repeat");try{l.setTransform(s)}catch(t){(0,a.warn)('TilingPattern.getPattern: "'.concat(null==t?void 0:t.message,'".'))}return l}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),t}();e.TilingPattern=P},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function(t){var e=t.src,n=t.srcPos,i=void 0===n?0:n,o=t.dest,s=t.destPos,l=void 0===s?0:s,u=t.width,c=t.height,h=t.inverseDecode,f=void 0!==h&&h,d=r.FeatureTest.isLittleEndian?4278190080:255,p=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(f?[0,d]:[d,0],2),v=p[0],y=p[1],g=u>>3,m=7&u,b=e.length;o=new Uint32Array(o.buffer);for(var w=0;w<c;w++){for(var A=i+g;i<A;i++){var k=i<b?e[i]:255;o[l++]=128&k?y:v,o[l++]=64&k?y:v,o[l++]=32&k?y:v,o[l++]=16&k?y:v,o[l++]=8&k?y:v,o[l++]=4&k?y:v,o[l++]=2&k?y:v,o[l++]=1&k?y:v}if(0!==m)for(var x=i<b?e[i++]:255,_=0;_<m;_++)o[l++]=x&1<<7-_?y:v}return{srcPos:i,destPos:l}};var r=n(1);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;var n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=void 0===n.workerPort?null:n.workerPort,n.workerSrc=void 0===n.workerSrc?"":n.workerSrc},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=n(1);function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&n.call(m,i)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(a,i,o,l){var u=h(t[a],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==s(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,l)}),(function(t){r("throw",t,o,l)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,l)}))}l(u.arg)}var a;this._invoke=function(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,o,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new A(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function i(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var l=1,u=2,c=1,h=2,f=3,d=4,p=5,v=6,y=7,g=8;function m(t){switch(t instanceof Error||"object"===s(t)&&null!==t||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new r.AbortException(t.message);case"MissingPDFException":return new r.MissingPDFException(t.message);case"PasswordException":return new r.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new r.UnknownErrorException(t.message,t.details);default:return new r.UnknownErrorException(t.message,t.toString())}}var b=function(){function t(e,n,r){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===a.sourceName)if(e.stream)a._processStreamMessage(e);else if(e.callback){var n=e.callbackId,i=a.callbackCapabilities[n];if(!i)throw new Error("Cannot resolve callback ".concat(n));if(delete a.callbackCapabilities[n],e.callback===l)i.resolve(e.data);else{if(e.callback!==u)throw new Error("Unexpected callback case");i.reject(m(e.reason))}}else{var o=a.actionHandler[e.action];if(!o)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){var s=a.sourceName,c=e.sourceName;new Promise((function(t){t(o(e.data))})).then((function(t){r.postMessage({sourceName:s,targetName:c,callback:l,callbackId:e.callbackId,data:t})}),(function(t){r.postMessage({sourceName:s,targetName:c,callback:u,callbackId:e.callbackId,reason:m(t)})}))}else e.streamId?a._createStreamSink(e):o(e.data)}},r.addEventListener("message",this._onComObjOnMessage)}var e,n,s,b,w;return e=t,n=[{key:"on",value:function(t,e){var n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}},{key:"send",value:function(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}},{key:"sendWithPromise",value:function(t,e,n){var a=this.callbackId++,i=(0,r.createPromiseCapability)();this.callbackCapabilities[a]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(t){i.reject(t)}return i.promise}},{key:"sendWithStream",value:function(t,e,n,a){var i=this,o=this.streamId++,s=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:function(n){var c=(0,r.createPromiseCapability)();return i.streamControllers[o]={controller:n,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:l,action:t,streamId:o,data:e,desiredSize:n.desiredSize},a),c.promise},pull:function(t){var e=(0,r.createPromiseCapability)();return i.streamControllers[o].pullCall=e,u.postMessage({sourceName:s,targetName:l,stream:v,streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:function(t){(0,r.assert)(t instanceof Error,"cancel must have a valid reason");var e=(0,r.createPromiseCapability)();return i.streamControllers[o].cancelCall=e,i.streamControllers[o].isClosed=!0,u.postMessage({sourceName:s,targetName:l,stream:c,streamId:o,reason:m(t)}),e.promise}},n)}},{key:"_createStreamSink",value:function(t){var e=t.streamId,n=this.sourceName,a=t.sourceName,i=this.comObj,o=this,s=this.actionHandler[t.action],l={enqueue:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var l=this.desiredSize;this.desiredSize-=o,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:a,stream:d,streamId:e,chunk:t},s)}},close:function(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:a,stream:f,streamId:e}),delete o.streamSinks[e])},error:function(t){(0,r.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:a,stream:p,streamId:e,reason:m(t)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise((function(e){e(s(t.data,l))})).then((function(){i.postMessage({sourceName:n,targetName:a,stream:g,streamId:e,success:!0})}),(function(t){i.postMessage({sourceName:n,targetName:a,stream:g,streamId:e,reason:m(t)})}))}},{key:"_processStreamMessage",value:function(t){var e=t.streamId,n=this.sourceName,a=t.sourceName,i=this.comObj,o=this.streamControllers[e],s=this.streamSinks[e];switch(t.stream){case g:t.success?o.startCall.resolve():o.startCall.reject(m(t.reason));break;case y:t.success?o.pullCall.resolve():o.pullCall.reject(m(t.reason));break;case v:if(!s){i.postMessage({sourceName:n,targetName:a,stream:y,streamId:e,success:!0});break}s.desiredSize<=0&&t.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=t.desiredSize,new Promise((function(t){t(s.onPull&&s.onPull())})).then((function(){i.postMessage({sourceName:n,targetName:a,stream:y,streamId:e,success:!0})}),(function(t){i.postMessage({sourceName:n,targetName:a,stream:y,streamId:e,reason:m(t)})}));break;case d:if((0,r.assert)(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case f:if((0,r.assert)(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this._deleteStreamController(o,e);break;case p:(0,r.assert)(o,"error should have stream controller"),o.controller.error(m(t.reason)),this._deleteStreamController(o,e);break;case h:t.success?o.cancelCall.resolve():o.cancelCall.reject(m(t.reason)),this._deleteStreamController(o,e);break;case c:if(!s)break;new Promise((function(e){e(s.onCancel&&s.onCancel(m(t.reason)))})).then((function(){i.postMessage({sourceName:n,targetName:a,stream:h,streamId:e,success:!0})}),(function(t){i.postMessage({sourceName:n,targetName:a,stream:h,streamId:e,reason:m(t)})})),s.sinkCapability.reject(m(t.reason)),s.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(b=a().mark((function t(e,n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]);case 2:delete this.streamControllers[n];case 3:case"end":return t.stop()}}),t,this)})),w=function(){var t=this,e=arguments;return new Promise((function(n,r){var a=b.apply(t,e);function o(t){i(a,n,r,o,s,"next",t)}function s(t){i(a,n,r,o,s,"throw",t)}o(void 0)}))},function(t,e){return w.apply(this,arguments)})},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}],n&&o(e.prototype,n),s&&o(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.MessageHandler=b},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function o(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function s(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,l(t,e,"set"),n),n}function l(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var u=new WeakMap,c=new WeakMap,h=function(){function t(e){var n=e.parsedData,r=e.rawData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u,{writable:!0,value:void 0}),i(this,c,{writable:!0,value:void 0}),s(this,u,n),s(this,c,r)}var e,n,l;return e=t,(n=[{key:"getRaw",value:function(){return o(this,c)}},{key:"get",value:function(t){var e;return null!==(e=o(this,u).get(t))&&void 0!==e?e:null}},{key:"getAll",value:function(){return(0,r.objectFromMap)(o(this,u))}},{key:"has",value:function(t){return o(this,u).has(t)}}])&&a(e.prototype,n),l&&a(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Metadata=h},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=n(1);function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function s(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e,n){p(t,e),e.set(t,n)}function p(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,g(t,e,"set"),n),n}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,g(t,e,"get"))}function g(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var m=Symbol("INTERNAL"),b=new WeakMap,w=function(){function t(e,n){c(this,t),d(this,b,{writable:!0,value:!0}),this.name=e,this.intent=n}return f(t,[{key:"visible",get:function(){return y(this,b)}},{key:"_setVisible",value:function(t,e){t!==m&&(0,r.unreachable)("Internal method `_setVisible` called."),v(this,b,e)}}]),t}(),A=new WeakMap,k=new WeakMap,x=new WeakMap,_=new WeakMap,S=new WeakSet,E=function(){function t(e){var n,r;if(c(this,t),p(n=this,r=S),r.add(n),d(this,A,{writable:!0,value:!0}),d(this,k,{writable:!0,value:new Map}),d(this,x,{writable:!0,value:null}),d(this,_,{writable:!0,value:null}),this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,v(this,_,e.order);var a,s=o(e.groups);try{for(s.s();!(a=s.n()).done;){var l=a.value;y(this,k).set(l.id,new w(l.name,l.intent))}}catch(t){s.e(t)}finally{s.f()}if("OFF"===e.baseState){var u,h=o(y(this,k).values());try{for(h.s();!(u=h.n()).done;){u.value._setVisible(m,!1)}}catch(t){h.e(t)}finally{h.f()}}var f,g=o(e.on);try{for(g.s();!(f=g.n()).done;){var b=f.value;y(this,k).get(b)._setVisible(m,!0)}}catch(t){g.e(t)}finally{g.f()}var E,T=o(e.off);try{for(T.s();!(E=T.n()).done;){var C=E.value;y(this,k).get(C)._setVisible(m,!1)}}catch(t){T.e(t)}finally{T.f()}v(this,x,new Map);var P,O=o(y(this,k));try{for(O.s();!(P=O.n()).done;){var M=i(P.value,2),R=M[0],I=M[1];y(this,x).set(R,I.visible)}}catch(t){O.e(t)}finally{O.f()}}}return f(t,[{key:"isVisible",value:function(t){if(0===y(this,k).size)return!0;if(!t)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return y(this,k).has(t.id)?y(this,k).get(t.id).visible:((0,r.warn)("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return u(this,S,T).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var e,n=o(t.ids);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(!y(this,k).has(a))return(0,r.warn)("Optional content group not found: ".concat(a)),!0;if(y(this,k).get(a).visible)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}if("AllOn"===t.policy){var i,s=o(t.ids);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(!y(this,k).has(l))return(0,r.warn)("Optional content group not found: ".concat(l)),!0;if(!y(this,k).get(l).visible)return!1}}catch(t){s.e(t)}finally{s.f()}return!0}if("AnyOff"===t.policy){var c,h=o(t.ids);try{for(h.s();!(c=h.n()).done;){var f=c.value;if(!y(this,k).has(f))return(0,r.warn)("Optional content group not found: ".concat(f)),!0;if(!y(this,k).get(f).visible)return!0}}catch(t){h.e(t)}finally{h.f()}return!1}if("AllOff"===t.policy){var d,p=o(t.ids);try{for(p.s();!(d=p.n()).done;){var v=d.value;if(!y(this,k).has(v))return(0,r.warn)("Optional content group not found: ".concat(v)),!0;if(y(this,k).get(v).visible)return!1}}catch(t){p.e(t)}finally{p.f()}return!0}return(0,r.warn)("Unknown optional content policy ".concat(t.policy,".")),!0}return(0,r.warn)("Unknown group type ".concat(t.type,".")),!0}},{key:"setVisibility",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];y(this,k).has(t)?(y(this,k).get(t)._setVisible(m,!!e),v(this,A,null)):(0,r.warn)("Optional content group not found: ".concat(t))}},{key:"hasInitialVisibility",get:function(){if(null!==y(this,A))return y(this,A);var t,e=o(y(this,k));try{for(e.s();!(t=e.n()).done;){var n=i(t.value,2),r=n[0],a=n[1],s=y(this,x).get(r);if(a.visible!==s)return v(this,A,!1)}}catch(t){e.e(t)}finally{e.f()}return v(this,A,!0)}},{key:"getOrder",value:function(){return y(this,k).size?y(this,_)?y(this,_).slice():a(y(this,k).keys()):null}},{key:"getGroups",value:function(){return y(this,k).size>0?(0,r.objectFromMap)(y(this,k)):null}},{key:"getGroup",value:function(t){return y(this,k).get(t)||null}}]),t}();function T(t){var e=t.length;if(e<2)return!0;for(var n=t[0],a=1;a<e;a++){var i=t[a],o=void 0;if(Array.isArray(i))o=u(this,S,T).call(this,i);else{if(!y(this,k).has(i))return(0,r.warn)("Optional content group not found: ".concat(i)),!0;o=y(this,k).get(i).visible}switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===n}e.OptionalContentConfig=E},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var a=n(1),i=n(129);function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&n.call(m,i)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(u.arg)}var i;this._invoke=function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return i=i?i.then(r,r):r()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new A(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,l,"next",t)}function l(t){s(i,r,a,o,l,"throw",t)}o(void 0)}))}}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=function(){function t(e,n){var r=this;h(this,t),(0,a.assert)(n,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1,this._contentDispositionFilename=e.contentDispositionFilename||null;var i=e.initialData;if((null==i?void 0:i.length)>0){var o=new Uint8Array(i).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=n,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(t,e){r._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener((function(t,e){r._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(t){r._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){r._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return d(t,[{key:"_onReceiveData",value:function(t){var e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{var n=this._rangeReaders.some((function(n){return n._begin===t.begin&&(n._enqueue(e),!0)}));(0,a.assert)(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function(t){if(void 0===t.total){var e=this._rangeReaders[0];null!=e&&e.onProgress&&e.onProgress({loaded:t.loaded})}else{var n=this._fullRequestReader;null!=n&&n.onProgress&&n.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}},{key:"getFullReader",value:function(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new v(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new y(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var e,n=u(this._rangeReaders.slice(0));try{for(n.s();!(e=n.n()).done;){e.value.cancel(t)}}catch(t){n.e(t)}finally{n.f()}this._pdfDataRangeTransport.abort()}}]),t}();e.PDFDataTransportStream=p;var v=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,t),this._stream=e,this._done=r||!1,this._filename=(0,i.isPdfFile)(a)?a:null,this._queuedChunks=n||[],this._loaded=0;var o,s=u(this._queuedChunks);try{for(s.s();!(o=s.n()).done;){var l=o.value;this._loaded+=l.byteLength}}catch(t){s.e(t)}finally{s.f()}this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}var e;return d(t,[{key:"_enqueue",value:function(t){if(!this._done){if(this._requests.length>0)this._requests.shift().resolve({value:t,done:!1});else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(e=l(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._queuedChunks.length>0)){t.next=3;break}return e=this._queuedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 3:if(!this._done){t.next=5;break}return t.abrupt("return",{value:void 0,done:!0});case 5:return n=(0,a.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),t}(),y=function(){function t(e,n,r){h(this,t),this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var e;return d(t,[{key:"_enqueue",value:function(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(e=l(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,a.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),t}()},(t,e)=>{"use strict";function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"textContent",value:function(e){var r=[],a={items:r,styles:Object.create(null)};return function e(a){var i;if(a){var o=null,s=a.name;if("#text"===s)o=a.value;else{if(!t.shouldBuildText(s))return;null!=a&&null!==(i=a.attributes)&&void 0!==i&&i.textContent?o=a.attributes.textContent:a.value&&(o=a.value)}if(null!==o&&r.push({str:o}),a.children){var l,u=n(a.children);try{for(u.s();!(l=u.n()).done;)e(l.value)}catch(t){u.e(t)}finally{u.f()}}}}(e),a}},{key:"shouldBuildText",value:function(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}],(r=null)&&a(e.prototype,r),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.XfaText=i},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=n(1),a=n(134),i=n(129),o=n(147),s=n(148);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){v(t,e),e.add(t)}function p(t,e,n){v(t,e),e.set(t,n)}function v(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function g(t,e,n){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),n}function m(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function b(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,w(t,e,"set"),n),n}function w(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var A,k,x,_=new WeakMap,S=new WeakMap,E=new WeakMap,T=new WeakMap,C=new WeakMap,P=new WeakMap,O=new WeakMap,M=new WeakMap,R=new WeakMap,I=new WeakMap,L=new WeakSet,F=new WeakSet,j=new WeakSet,D=new WeakSet,N=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,D),d(this,j),d(this,F),d(this,L),p(this,I,{get:B,set:void 0}),p(this,_,{writable:!0,value:!1}),p(this,S,{writable:!0,value:this.pointerup.bind(this)}),p(this,E,{writable:!0,value:this.pointerdown.bind(this)}),p(this,T,{writable:!0,value:new Map}),p(this,C,{writable:!0,value:!1}),p(this,P,{writable:!0,value:new WeakMap}),p(this,O,{writable:!0,value:new Map}),p(this,M,{writable:!0,value:void 0}),p(this,R,{writable:!0,value:new Set}),t._initialized||(t._initialized=!0,o.FreeTextEditor.initialize(e.l10n),s.InkEditor.initialize(e.l10n),e.uiManager.registerEditorTypes([o.FreeTextEditor,s.InkEditor])),b(this,M,e.uiManager),this.annotationStorage=e.annotationStorage,this.pageIndex=e.pageIndex,this.div=e.div,m(this,M).addLayer(this)}var e,n,c;return e=t,n=[{key:"textLayerElements",get:function(){var e=this.div.parentNode.getElementsByClassName("textLayer").item(0);if(!e)return(0,r.shadow)(this,"textLayerElements",null);var n=m(this,P).get(e);return n||(0===(n=e.querySelectorAll('span[role="presentation"]')).length?(0,r.shadow)(this,"textLayerElements",null):((n=Array.from(n)).sort(g(t,t,W)),m(this,P).set(e,n),n))}},{key:"updateToolbar",value:function(t){m(this,M).updateToolbar(t)}},{key:"updateMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(this,M).getMode();y(this,D,z).call(this),t===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),m(this,M).unselectAll()}},{key:"addInkEditorIfNeeded",value:function(t){if(t||m(this,M).getMode()===r.AnnotationEditorType.INK){if(!t){var e,n=u(m(this,T).values());try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.isEmpty())return void a.setInBackground()}}catch(t){n.e(t)}finally{n.f()}}y(this,j,q).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(t){m(this,M).setEditingState(t)}},{key:"addCommands",value:function(t){m(this,M).addCommands(t)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var t,e=u(m(this,T).values());try{for(e.s();!(t=e.n()).done;)t.value.enableEditing()}catch(t){e.e(t)}finally{e.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var t,e=u(m(this,T).values());try{for(e.s();!(t=e.n()).done;)t.value.disableEditing()}catch(t){e.e(t)}finally{e.f()}}},{key:"setActiveEditor",value:function(t){m(this,M).getActive()!==t&&m(this,M).setActiveEditor(t)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",m(this,E)),this.div.addEventListener("pointerup",m(this,S))}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",m(this,E)),this.div.removeEventListener("pointerup",m(this,S))}},{key:"attach",value:function(t){m(this,T).set(t.id,t)}},{key:"detach",value:function(t){m(this,T).delete(t.id),this.removePointerInTextLayer(t)}},{key:"remove",value:function(t){var e=this;m(this,M).removeEditor(t),this.detach(t),this.annotationStorage.removeKey(t.id),t.div.style.display="none",setTimeout((function(){t.div.style.display="",t.div.remove(),t.isAttachedToDOM=!1,document.activeElement===document.body&&m(e,M).focusMainContainer()}),0),m(this,C)||this.addInkEditorIfNeeded(!1)}},{key:"onTextLayerRendered",value:function(){m(this,O).clear();var t,e=u(m(this,R));try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isAttachedToDOM&&this.addPointerInTextLayer(n)}}catch(t){e.e(t)}finally{e.f()}m(this,R).clear()}},{key:"removePointerInTextLayer",value:function(t){var e;if(m(this,I)){var n=t.id,r=m(this,O).get(n);if(r){m(this,O).delete(n);var a=r.getAttribute("aria-owns");null!==(e=a)&&void 0!==e&&e.includes(n)&&((a=a.split(" ").filter((function(t){return t!==n})).join(" "))?r.setAttribute("aria-owns",a):(r.removeAttribute("aria-owns"),r.setAttribute("role","presentation")))}}else m(this,R).delete(t)}},{key:"addPointerInTextLayer",value:function(e){if(m(this,I)){this.removePointerInTextLayer(e);var n=this.textLayerElements;if(n){var r=e.contentDiv,a=e.getIdForTextLayer(),o=(0,i.binarySearchFirstItem)(n,(function(e){return g(t,t,W).call(t,r,e)<0})),s=n[Math.max(0,o-1)],l=s.getAttribute("aria-owns");null!=l&&l.includes(a)||s.setAttribute("aria-owns",l?"".concat(l," ").concat(a):a),s.removeAttribute("role"),m(this,O).set(a,s)}}else m(this,R).add(e)}},{key:"moveDivInDOM",value:function(e){this.addPointerInTextLayer(e);var n=e.div,r=e.contentDiv;if(this.div.hasChildNodes()){var a=Array.from(this.div.childNodes).filter((function(t){return t!==n}));if(0!==a.length){var o=(0,i.binarySearchFirstItem)(a,(function(e){return g(t,t,W).call(t,r,e)<0}));0===o?a[0].before(n):a[o-1].after(n)}}else this.div.append(n)}},{key:"add",value:function(t){if(y(this,L,U).call(this,t),m(this,M).addEditor(t),this.attach(t),!t.isAttachedToDOM){var e=t.render();this.div.append(e),t.isAttachedToDOM=!0}this.moveDivInDOM(t),t.onceAdded(),this.addToAnnotationStorage(t)}},{key:"addToAnnotationStorage",value:function(t){t.isEmpty()||this.annotationStorage.has(t.id)||this.annotationStorage.setValue(t.id,t)}},{key:"addOrRebuild",value:function(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}},{key:"addANewEditor",value:function(t){var e=this;this.addCommands({cmd:function(){e.addOrRebuild(t)},undo:function(){t.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function(t){var e=this;this.addCommands({cmd:function(){e.addOrRebuild(t)},undo:function(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return m(this,M).getId()}},{key:"deserialize",value:function(t){switch(t.annotationType){case r.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(t,this);case r.AnnotationEditorType.INK:return s.InkEditor.deserialize(t,this)}return null}},{key:"setSelected",value:function(t){m(this,M).setSelected(t)}},{key:"toggleSelected",value:function(t){m(this,M).toggleSelected(t)}},{key:"isSelected",value:function(t){return m(this,M).isSelected(t)}},{key:"unselect",value:function(t){m(this,M).unselect(t)}},{key:"pointerup",value:function(t){var e=a.KeyboardManager.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&(m(this,_)?y(this,j,q).call(this,t):b(this,_,!0))}},{key:"pointerdown",value:function(t){var e=a.KeyboardManager.platform.isMac;if(!(0!==t.button||t.ctrlKey&&e)&&t.target===this.div){var n=m(this,M).getActive();b(this,_,!n||n.isEmpty())}}},{key:"drop",value:function(t){var e=t.dataTransfer.getData("text/plain"),n=m(this,M).getEditor(e);if(n){t.preventDefault(),t.dataTransfer.dropEffect="move",y(this,L,U).call(this,n);var r=this.div.getBoundingClientRect(),a=t.clientX-r.x,i=t.clientY-r.y;n.translate(a-n.startX,i-n.startY),this.moveDivInDOM(n),n.div.focus()}}},{key:"dragover",value:function(t){t.preventDefault()}},{key:"destroy",value:function(){var t;(null===(t=m(this,M).getActive())||void 0===t?void 0:t.parent)===this&&m(this,M).setActiveEditor(null);var e,n=u(m(this,T).values());try{for(n.s();!(e=n.n()).done;){var r=e.value;this.removePointerInTextLayer(r),r.isAttachedToDOM=!1,r.div.remove(),r.parent=null}}catch(t){n.e(t)}finally{n.f()}m(this,O).clear(),this.div=null,m(this,T).clear(),m(this,R).clear(),m(this,M).removeLayer(this)}},{key:"render",value:function(t){this.viewport=t.viewport,(0,a.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();var e,n=u(m(this,M).getEditors(this.pageIndex));try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}this.updateMode()}},{key:"update",value:function(t){this.viewport=t.viewport,this.setDimensions(),this.updateMode()}},{key:"scaleFactor",get:function(){return this.viewport.scale}},{key:"pageDimensions",get:function(){var t=l(this.viewport.viewBox,4),e=t[0],n=t[1];return[t[2]-e,t[3]-n]}},{key:"viewportBaseDimensions",get:function(){var t=this.viewport,e=t.width,n=t.height;return t.rotation%180==0?[e,n]:[n,e]}},{key:"setDimensions",value:function(){var t=this.viewport,e=t.width,n=t.height,r=t.rotation,a=r%180!=0,i=Math.floor(e)+"px",o=Math.floor(n)+"px";this.div.style.width=a?o:i,this.div.style.height=a?i:o,this.div.setAttribute("data-main-rotation",r)}}],n&&f(e.prototype,n),c&&f(e,c),Object.defineProperty(e,"prototype",{writable:!1}),t}();function B(){return!!this.div.parentNode.querySelector(".textLayer .endOfContent")}function U(t){var e;t.parent!==this&&(this.attach(t),t.pageIndex=this.pageIndex,null===(e=t.parent)||void 0===e||e.detach(t),t.parent=this,t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}function W(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return n.y+n.height<=r.y?-1:r.y+r.height<=n.y?1:n.x+n.width/2-(r.x+r.width/2)}function G(t){switch(m(this,M).getMode()){case r.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(t);case r.AnnotationEditorType.INK:return new s.InkEditor(t)}return null}function q(t){var e=this.getNextId(),n=y(this,F,G).call(this,{parent:this,id:e,x:t.offsetX,y:t.offsetY});return n&&this.add(n),n}function z(){b(this,C,!0);var t,e=u(m(this,T).values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isEmpty()&&n.remove()}}catch(t){e.e(t)}finally{e.f()}b(this,C,!1)}e.AnnotationEditorLayer=N,x=!1,(k="_initialized")in(A=N)?Object.defineProperty(A,k,{value:x,enumerable:!0,configurable:!0,writable:!0}):A[k]=x},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var a=n(1),i=n(134),o=n(133);function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=v(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},p.apply(this,arguments)}function v(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var a=w(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function A(t,e){_(t,e),e.add(t)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t,e,n){_(t,e),e.set(t,n)}function _(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,C(t,e,"get"))}function E(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function T(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,C(t,e,"set"),n),n}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var P=new WeakMap,O=new WeakMap,M=new WeakMap,R=new WeakMap,I=new WeakMap,L=new WeakMap,F=new WeakMap,j=new WeakSet,D=new WeakSet,N=new WeakSet,B=new WeakSet,U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(h,t);var e,n,r,c=g(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),A(b(e=c.call(this,f(f({},t),{},{name:"freeTextEditor"}))),B),A(b(e),N),A(b(e),D),A(b(e),j),x(b(e),P,{writable:!0,value:e.editorDivBlur.bind(b(e))}),x(b(e),O,{writable:!0,value:e.editorDivFocus.bind(b(e))}),x(b(e),M,{writable:!0,value:e.editorDivKeydown.bind(b(e))}),x(b(e),R,{writable:!0,value:void 0}),x(b(e),I,{writable:!0,value:""}),x(b(e),L,{writable:!0,value:!1}),x(b(e),F,{writable:!0,value:void 0}),T(b(e),R,t.color||h._defaultColor||o.AnnotationEditor._defaultLineColor),T(b(e),F,t.fontSize||h._defaultFontSize),e}return e=h,r=[{key:"initialize",value:function(t){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map((function(e){return[e,t.get(e)]})));var e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:h._defaultFontSize=e;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:h._defaultColor=e}}},{key:"defaultPropertiesToUpdate",get:function(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,h._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,h._defaultColor||o.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function(t,e){var n=p(w(h),"deserialize",this).call(this,t,e);return T(n,F,t.fontSize),T(n,R,a.Util.makeHexColor.apply(a.Util,s(t.color))),T(n,I,t.value),n}}],(n=[{key:"updateParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.FREETEXT_SIZE:E(this,j,W).call(this,e);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:E(this,D,G).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,S(this,F)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,S(this,R)]]}},{key:"getInitialTranslation",value:function(){return[-h._internalPadding*this.parent.scaleFactor,-(h._internalPadding+S(this,F))*this.parent.scaleFactor]}},{key:"rebuild",value:function(){p(w(h.prototype),"rebuild",this).call(this),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),p(w(h.prototype),"enableEditMode",this).call(this),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",S(this,M)),this.editorDiv.addEventListener("focus",S(this,O)),this.editorDiv.addEventListener("blur",S(this,P)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),p(w(h.prototype),"disableEditMode",this).call(this),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",S(this,M)),this.editorDiv.removeEventListener("focus",S(this,O)),this.editorDiv.removeEventListener("blur",S(this,P)),this.div.focus(),this.isEditing=!1)}},{key:"focusin",value:function(t){p(w(h.prototype),"focusin",this).call(this,t),t.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),p(w(h.prototype),"remove",this).call(this)}},{key:"commit",value:function(){p(w(h.prototype),"commit",this).call(this),S(this,L)||(T(this,L,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),T(this,I,E(this,N,q).call(this).trimEnd()),E(this,B,z).call(this)}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(t){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(t){t.target===this.div&&"Enter"===t.key&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(t){h._keyboardManager.exec(this,t)}},{key:"editorDivFocus",value:function(t){this.isEditing=!0}},{key:"editorDivBlur",value:function(t){this.isEditing=!1}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"getIdForTextLayer",value:function(){return this.editorDiv.id}},{key:"render",value:function(){var t,e,n=this;if(this.div)return this.div;this.width&&(t=this.x,e=this.y),p(w(h.prototype),"render",this).call(this),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id","".concat(this.id,"-editor")),this.enableEditing(),h._l10nPromise.get("editor_free_text_aria_label").then((function(t){var e;return null===(e=n.editorDiv)||void 0===e?void 0:e.setAttribute("aria-label",t)})),h._l10nPromise.get("free_text_default_content").then((function(t){var e;return null===(e=n.editorDiv)||void 0===e?void 0:e.setAttribute("default-content",t)})),this.editorDiv.contentEditable=!0;var r=this.editorDiv.style;if(r.fontSize="calc(".concat(S(this,F),"px * var(--scale-factor))"),r.color=S(this,R),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var a=l(this.parent.viewportBaseDimensions,2),o=a[0],s=a[1];this.setAt(t*o,e*s,this.width*o,this.height*s);var c,f=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=u(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(S(this,I).split("\n"));try{for(f.s();!(c=f.n()).done;){var d=c.value,v=document.createElement("div");v.append(d?document.createTextNode(d):document.createElement("br")),this.editorDiv.append(v)}}catch(t){f.e(t)}finally{f.f()}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var t=h._internalPadding*this.parent.scaleFactor,e=this.getRect(t,t),n=o.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:a.AnnotationEditorType.FREETEXT,color:n,fontSize:S(this,F),value:S(this,I),pageIndex:this.parent.pageIndex,rect:e,rotation:this.rotation}}}])&&d(e.prototype,n),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),h}(o.AnnotationEditor);function W(t){var e=this,n=function(t){e.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))"),e.translate(0,-(t-S(e,F))*e.parent.scaleFactor),T(e,F,t),E(e,B,z).call(e)},r=S(this,F);this.parent.addCommands({cmd:function(){n(t)},undo:function(){n(r)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function G(t){var e=this,n=S(this,R);this.parent.addCommands({cmd:function(){T(e,R,t),e.editorDiv.style.color=t},undo:function(){T(e,R,n),e.editorDiv.style.color=n},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function q(){var t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n].firstChild;"#text"===(null==a?void 0:a.nodeName)?e.push(a.data):e.push("")}return e.join("\n")}function z(){var t=l(this.parent.viewportBaseDimensions,2),e=t[0],n=t[1],r=this.div.getBoundingClientRect();this.width=r.width/e,this.height=r.height/n}e.FreeTextEditor=U,k(U,"_freeTextDefaultContent",""),k(U,"_l10nPromise",void 0),k(U,"_internalPadding",0),k(U,"_defaultColor",null),k(U,"_defaultFontSize",10),k(U,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],U.prototype.commitOrRemove]])),k(U,"_type","freetext")},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return o.fitCurve}});var a=n(1),i=n(133),o=n(149),s=n(134);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function u(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=g(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},y.apply(this,arguments)}function g(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return A(t)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function x(t,e){E(t,e),e.add(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t,e,n){E(t,e),e.set(t,n)}function E(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function T(t,e,n){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),n}function C(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,O(t,e,"set"),n),n}function P(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,O(t,e,"get"))}function O(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function M(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var R=16,I=new WeakMap,L=new WeakMap,F=new WeakMap,j=new WeakMap,D=new WeakMap,N=new WeakMap,B=new WeakMap,U=new WeakMap,W=new WeakMap,G=new WeakMap,q=new WeakMap,z=new WeakMap,V=new WeakMap,H=new WeakMap,X=new WeakSet,Y=new WeakSet,K=new WeakSet,J=new WeakSet,Q=new WeakSet,$=new WeakSet,Z=new WeakSet,tt=new WeakSet,et=new WeakSet,nt=new WeakSet,rt=new WeakSet,at=new WeakSet,it=new WeakSet,ot=new WeakSet,st=new WeakSet,lt=new WeakSet,ut=new WeakSet,ct=new WeakSet,ht=new WeakSet,ft=new WeakSet,dt=new WeakSet,pt=new WeakSet,vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(s,t);var e,n,r,o=b(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),x(A(e=o.call(this,p(p({},t),{},{name:"inkEditor"}))),pt),x(A(e),dt),x(A(e),ft),x(A(e),ht),x(A(e),ct),x(A(e),ut),x(A(e),lt),x(A(e),st),x(A(e),ot),x(A(e),it),x(A(e),at),x(A(e),rt),x(A(e),nt),x(A(e),et),x(A(e),tt),x(A(e),Z),x(A(e),$),x(A(e),Q),x(A(e),J),x(A(e),K),x(A(e),Y),x(A(e),X),S(A(e),I,{writable:!0,value:0}),S(A(e),L,{writable:!0,value:0}),S(A(e),F,{writable:!0,value:0}),S(A(e),j,{writable:!0,value:e.canvasPointermove.bind(A(e))}),S(A(e),D,{writable:!0,value:e.canvasPointerleave.bind(A(e))}),S(A(e),N,{writable:!0,value:e.canvasPointerup.bind(A(e))}),S(A(e),B,{writable:!0,value:e.canvasPointerdown.bind(A(e))}),S(A(e),U,{writable:!0,value:!1}),S(A(e),W,{writable:!0,value:!1}),S(A(e),G,{writable:!0,value:null}),S(A(e),q,{writable:!0,value:null}),S(A(e),z,{writable:!0,value:0}),S(A(e),V,{writable:!0,value:0}),S(A(e),H,{writable:!0,value:null}),e.color=t.color||null,e.thickness=t.thickness||null,e.opacity=t.opacity||null,e.paths=[],e.bezierPath2D=[],e.currentPath=[],e.scaleFactor=1,e.translationX=e.translationY=0,e.x=0,e.y=0,e}return e=s,r=[{key:"initialize",value:function(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map((function(e){return[e,t.get(e)]})))}},{key:"updateDefaultParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:s._defaultThickness=e;break;case a.AnnotationEditorParamsType.INK_COLOR:s._defaultColor=e;break;case a.AnnotationEditorParamsType.INK_OPACITY:s._defaultOpacity=e/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,s._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,s._defaultColor||i.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*s._defaultOpacity)]]}},{key:"deserialize",value:function(t,e){var n=y(k(s),"deserialize",this).call(this,t,e);n.thickness=t.thickness,n.color=a.Util.makeHexColor.apply(a.Util,u(t.color)),n.opacity=t.opacity;var r=c(e.pageDimensions,2),i=r[0],o=r[1],h=n.width*i,f=n.height*o,d=e.scaleFactor,p=t.thickness/2;C(n,I,h/f),C(n,U,!0),C(n,z,Math.round(h)),C(n,V,Math.round(f));var v,g=l(t.paths);try{for(g.s();!(v=g.n()).done;){var m=v.value.bezier,b=[];n.paths.push(b);for(var w=d*(m[0]-p),A=d*(f-m[1]-p),x=2,_=m.length;x<_;x+=6){var S=d*(m[x]-p),E=d*(f-m[x+1]-p),P=d*(m[x+2]-p),O=d*(f-m[x+3]-p),R=d*(m[x+4]-p),j=d*(f-m[x+5]-p);b.push([[w,A],[S,E],[P,O],[R,j]]),w=R,A=j}var D=T(this,s,Mt).call(this,b);n.bezierPath2D.push(D)}}catch(t){g.e(t)}finally{g.f()}var N=M(n,ht,Ft).call(n);return C(n,F,N[2]-N[0]),C(n,L,N[3]-N[1]),M(n,ot,Pt).call(n,h,f),n}}],(n=[{key:"updateParams",value:function(t,e){switch(t){case a.AnnotationEditorParamsType.INK_THICKNESS:M(this,X,yt).call(this,e);break;case a.AnnotationEditorParamsType.INK_COLOR:M(this,Y,gt).call(this,e);break;case a.AnnotationEditorParamsType.INK_OPACITY:M(this,K,mt).call(this,e)}}},{key:"propertiesToUpdate",get:function(){var t;return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||s._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||s._defaultColor||i.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(t=this.opacity)&&void 0!==t?t:s._defaultOpacity))]]}},{key:"rebuild",value:function(){y(k(s.prototype),"rebuild",this).call(this),null!==this.div&&(this.canvas||(M(this,rt,Et).call(this),M(this,at,Tt).call(this)),this.isAttachedToDOM||(this.parent.add(this),M(this,it,Ct).call(this)),M(this,dt,Dt).call(this))}},{key:"remove",value:function(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,P(this,q).disconnect(),C(this,q,null),y(k(s.prototype),"remove",this).call(this))}},{key:"enableEditMode",value:function(){P(this,U)||null===this.canvas||(y(k(s.prototype),"enableEditMode",this).call(this),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",P(this,B)),this.canvas.addEventListener("pointerup",P(this,N)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&null!==this.canvas&&(y(k(s.prototype),"disableEditMode",this).call(this),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",P(this,B)),this.canvas.removeEventListener("pointerup",P(this,N)))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}},{key:"commit",value:function(){P(this,U)||(y(k(s.prototype),"commit",this).call(this),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),C(this,U,!0),this.div.classList.add("disabled"),M(this,dt,Dt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveDivInDOM(this),this.div.focus())}},{key:"focusin",value:function(t){y(k(s.prototype),"focusin",this).call(this,t),this.enableEditMode()}},{key:"canvasPointerdown",value:function(t){0===t.button&&this.isInEditMode()&&!P(this,U)&&(this.setInForeground(),"mouse"!==t.type&&this.div.focus(),t.stopPropagation(),this.canvas.addEventListener("pointerleave",P(this,D)),this.canvas.addEventListener("pointermove",P(this,j)),M(this,$,At).call(this,t.offsetX,t.offsetY))}},{key:"canvasPointermove",value:function(t){t.stopPropagation(),M(this,Z,kt).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function(t){0===t.button&&this.isInEditMode()&&0!==this.currentPath.length&&(t.stopPropagation(),M(this,nt,St).call(this,t),this.setInBackground())}},{key:"canvasPointerleave",value:function(t){M(this,nt,St).call(this,t),this.setInBackground()}},{key:"render",value:function(){var t,e,n=this;if(this.div)return this.div;this.width&&(t=this.x,e=this.y),y(k(s.prototype),"render",this).call(this),s._l10nPromise.get("editor_ink_aria_label").then((function(t){var e;return null===(e=n.div)||void 0===e?void 0:e.setAttribute("aria-label",t)}));var r=c(M(this,J,bt).call(this),4),a=r[0],i=r[1],o=r[2],l=r[3];if(this.setAt(a,i,0,0),this.setDims(o,l),M(this,rt,Et).call(this),this.width){var u=c(this.parent.viewportBaseDimensions,2),h=u[0],f=u[1];this.setAt(t*h,e*f,this.width*h,this.height*f),C(this,W,!0),M(this,it,Ct).call(this),this.setDims(this.width*h,this.height*f),M(this,et,_t).call(this),M(this,pt,Nt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return M(this,at,Tt).call(this),this.div}},{key:"setDimensions",value:function(t,e){var n=Math.round(t),r=Math.round(e);if(P(this,z)!==n||P(this,V)!==r){C(this,z,n),C(this,V,r),this.canvas.style.visibility="hidden",P(this,I)&&Math.abs(P(this,I)-t/e)>.01&&(e=Math.ceil(t/P(this,I)),this.setDims(t,e));var a=c(this.parent.viewportBaseDimensions,2),i=a[0],o=a[1];this.width=t/i,this.height=e/o,P(this,U)&&M(this,ot,Pt).call(this,t,e),M(this,it,Ct).call(this),M(this,et,_t).call(this),this.canvas.style.visibility="visible"}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var t=this.getRect(0,0),e=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],n=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:M(this,lt,Rt).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,e),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}])&&v(e.prototype,n),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(i.AnnotationEditor);function yt(t){var e=this,n=this.thickness;this.parent.addCommands({cmd:function(){e.thickness=t,M(e,dt,Dt).call(e)},undo:function(){e.thickness=n,M(e,dt,Dt).call(e)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function gt(t){var e=this,n=this.color;this.parent.addCommands({cmd:function(){e.color=t,M(e,et,_t).call(e)},undo:function(){e.color=n,M(e,et,_t).call(e)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function mt(t){var e=this;t/=100;var n=this.opacity;this.parent.addCommands({cmd:function(){e.opacity=t,M(e,et,_t).call(e)},undo:function(){e.opacity=n,M(e,et,_t).call(e)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function bt(){var t=this.parent.viewport,e=t.width,n=t.height;switch(t.rotation){case 90:return[0,e,e,n];case 180:return[e,n,e,n];case 270:return[n,0,e,n];default:return[0,0,e,n]}}function wt(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle="".concat(this.color).concat((0,s.opacityToHex)(this.opacity))}function At(t,e){var n,r=this;(this.isEditing=!0,P(this,W))||(C(this,W,!0),M(this,it,Ct).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||i.AnnotationEditor._defaultLineColor),null!==(n=this.opacity)&&void 0!==n||(this.opacity=vt._defaultOpacity));this.currentPath.push([t,e]),C(this,G,null),M(this,Q,wt).call(this),this.ctx.beginPath(),this.ctx.moveTo(t,e),C(this,H,(function(){if(P(r,H)){var t;if(P(r,G))r.isEmpty()?(r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height)):M(r,et,_t).call(r),(t=r.ctx).lineTo.apply(t,u(P(r,G))),C(r,G,null),r.ctx.stroke();window.requestAnimationFrame(P(r,H))}})),window.requestAnimationFrame(P(this,H))}function kt(t,e){var n=c(this.currentPath.at(-1),2),r=n[0],a=n[1];t===r&&e===a||(this.currentPath.push([t,e]),C(this,G,[t,e]))}function xt(t,e){var n=this;this.ctx.closePath(),C(this,H,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height);var r,a=c(this.currentPath.at(-1),2),i=a[0],s=a[1];if(t===i&&e===s||this.currentPath.push([t,e]),1!==this.currentPath.length)r=(0,o.fitCurve)(this.currentPath,30,null);else{var l=[t,e];r=[[l,l.slice(),l.slice(),l]]}var u=T(vt,vt,Mt).call(vt,r);this.currentPath.length=0;this.parent.addCommands({cmd:function(){n.paths.push(r),n.bezierPath2D.push(u),n.rebuild()},undo:function(){n.paths.pop(),n.bezierPath2D.pop(),0===n.paths.length?n.remove():(n.canvas||(M(n,rt,Et).call(n),M(n,at,Tt).call(n)),M(n,dt,Dt).call(n))},mustExec:!0})}function _t(){if(this.isEmpty())M(this,st,Ot).call(this);else{M(this,Q,wt).call(this);var t=this.canvas,e=this.ctx;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),M(this,st,Ot).call(this);var n,r=l(this.bezierPath2D);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.stroke(a)}}catch(t){r.e(t)}finally{r.f()}}}function St(t){M(this,tt,xt).call(this,t.offsetX,t.offsetY),this.canvas.removeEventListener("pointerleave",P(this,D)),this.canvas.removeEventListener("pointermove",P(this,j)),this.parent.addToAnnotationStorage(this)}function Et(){var t=this;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",vt._l10nPromise.get("editor_ink_canvas_aria_label").then((function(e){var n;return null===(n=t.canvas)||void 0===n?void 0:n.setAttribute("aria-label",e)})),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function Tt(){var t=this;C(this,q,new ResizeObserver((function(e){var n=e[0].contentRect;n.width&&n.height&&t.setDimensions(n.width,n.height)}))),P(this,q).observe(this.div)}function Ct(){if(P(this,W)){var t=c(this.parent.viewportBaseDimensions,2),e=t[0],n=t[1];this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),M(this,st,Ot).call(this)}}function Pt(t,e){var n=M(this,ft,jt).call(this),r=(t-n)/P(this,F),a=(e-n)/P(this,L);this.scaleFactor=Math.min(r,a)}function Ot(){var t=M(this,ft,jt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function Mt(t){for(var e=new Path2D,n=0,r=t.length;n<r;n++){var a=c(t[n],4),i=a[0],o=a[1],s=a[2],l=a[3];0===n&&e.moveTo.apply(e,u(i)),e.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}return e}function Rt(t,e,n,r){var a,i,o,s=[],u=this.thickness/2,h=l(this.paths);try{for(h.s();!(o=h.n()).done;){var f=o.value;a=[],i=[];for(var d=0,p=f.length;d<p;d++){var v=c(f[d],4),y=v[0],g=v[1],m=v[2],b=v[3],w=t*(y[0]+e)+u,A=r-t*(y[1]+n)-u,k=t*(g[0]+e)+u,x=r-t*(g[1]+n)-u,_=t*(m[0]+e)+u,S=r-t*(m[1]+n)-u,E=t*(b[0]+e)+u,T=r-t*(b[1]+n)-u;0===d&&(a.push(w,A),i.push(w,A)),a.push(k,x,_,S,E,T),M(this,ut,It).call(this,w,A,k,x,_,S,E,T,4,i)}s.push({bezier:a,points:i})}}catch(t){h.e(t)}finally{h.f()}return s}function It(t,e,n,r,a,i,o,s,l,u){if(M(this,ct,Lt).call(this,t,e,n,r,a,i,o,s))u.push(o,s);else{for(var c=1;c<l-1;c++){var h=c/l,f=1-h,d=h*t+f*n,p=h*e+f*r,v=h*n+f*a,y=h*r+f*i;d=h*(d=h*d+f*v)+f*(v=h*v+f*(h*a+f*o)),p=h*(p=h*p+f*y)+f*(y=h*y+f*(h*i+f*s)),u.push(d,p)}u.push(o,s)}}function Lt(t,e,n,r,a,i,o,s){var l=Math.pow(3*n-2*t-o,2),u=Math.pow(3*r-2*e-s,2),c=Math.pow(3*a-t-2*o,2),h=Math.pow(3*i-e-2*s,2);return Math.max(l,c)+Math.max(u,h)<=10}function Ft(){var t,e=1/0,n=-1/0,r=1/0,i=-1/0,o=l(this.paths);try{for(o.s();!(t=o.n()).done;){var s,h=l(t.value);try{for(h.s();!(s=h.n()).done;){var f=c(s.value,4),d=f[0],p=f[1],v=f[2],y=f[3],g=a.Util.bezierBoundingBox.apply(a.Util,u(d).concat(u(p),u(v),u(y)));e=Math.min(e,g[0]),r=Math.min(r,g[1]),n=Math.max(n,g[2]),i=Math.max(i,g[3])}}catch(t){h.e(t)}finally{h.f()}}}catch(t){o.e(t)}finally{o.f()}return[e,r,n,i]}function jt(){return P(this,U)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function Dt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEmpty())if(P(this,U)){var e=M(this,ht,Ft).call(this),n=M(this,ft,jt).call(this);C(this,F,Math.max(R,e[2]-e[0])),C(this,L,Math.max(R,e[3]-e[1]));var r=Math.ceil(n+P(this,F)*this.scaleFactor),a=Math.ceil(n+P(this,L)*this.scaleFactor),i=c(this.parent.viewportBaseDimensions,2),o=i[0],s=i[1];this.width=r/o,this.height=a/s,C(this,I,r/a),M(this,pt,Nt).call(this);var l=this.translationX,u=this.translationY;this.translationX=-e[0],this.translationY=-e[1],M(this,it,Ct).call(this),M(this,et,_t).call(this),C(this,z,r),C(this,V,a),this.setDims(r,a);var h=t?n/this.scaleFactor/2:0;this.translate(l-this.translationX-h,u-this.translationY-h)}else M(this,et,_t).call(this)}function Nt(){var t=this.div.style;P(this,I)>=1?(t.minHeight="".concat(R,"px"),t.minWidth="".concat(Math.round(P(this,I)*R),"px")):(t.minWidth="".concat(R,"px"),t.minHeight="".concat(Math.round(R/P(this,I)),"px"))}e.InkEditor=vt,_(vt,"_defaultColor",null),_(vt,"_defaultOpacity",1),_(vt,"_defaultThickness",1),_(vt,"_l10nPromise",void 0),_(vt,"_type","ink")},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;var r=n(150);e.fitCurve=r},t=>{"use strict";function e(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e,n,r,a){var o,s,h,f,d,p,y,g,m,b,w,A,k;if(2===t.length)return A=v.vectorLen(v.subtract(t[0],t[1]))/3,[o=[t[0],v.addArrays(t[0],v.mulItems(e,A)),v.addArrays(t[1],v.mulItems(n,A)),t[1]]];s=function(t){var e,n,r,a=[];return t.forEach((function(t,i){e=i?n+v.vectorLen(v.subtract(t,r)):0,a.push(e),n=e,r=t})),a=a.map((function(t){return t/n}))}(t);var x=i(u(t,s,s,e,n,a),3);if(o=x[0],f=x[1],p=x[2],0===f||f<r)return[o];if(f<r*r)for(h=s,d=f,y=p,k=0;k<20;k++){var _=i(u(t,s,h=c(o,t,h),e,n,a),3);if(o=_[0],f=_[1],p=_[2],f<r)return[o];if(p===y){var S=f/d;if(S>.9999&&S<1.0001)break}d=f,y=p}if(w=[],(g=v.subtract(t[p-1],t[p+1])).every((function(t){return 0===t}))){var E=[-(g=v.subtract(t[p-1],t[p]))[1],g[0]];g[0]=E[0],g[1]=E[1]}return m=v.normalize(g),b=v.mulItems(m,-1),w=(w=w.concat(l(t.slice(0,p+1),e,m,r,a))).concat(l(t.slice(p),b,n,r,a))}function u(t,e,n,r,a,o){var s,l,u;s=function(t,e,n,r){var a,i,o,s,l,u,c,h,f,d,p,g,m,b,w,A,k,x=t[0],_=t[t.length-1];for(a=[x,null,null,_],i=v.zeros_Xx2x2(e.length),m=0,b=e.length;m<b;m++)k=1-(A=e[m]),(o=i[m])[0]=v.mulItems(n,3*A*(k*k)),o[1]=v.mulItems(r,3*k*(A*A));for(s=[[0,0],[0,0]],l=[0,0],m=0,b=t.length;m<b;m++)A=e[m],o=i[m],s[0][0]+=v.dot(o[0],o[0]),s[0][1]+=v.dot(o[0],o[1]),s[1][0]+=v.dot(o[0],o[1]),s[1][1]+=v.dot(o[1],o[1]),w=v.subtract(t[m],y.q([x,x,_,_],A)),l[0]+=v.dot(o[0],w),l[1]+=v.dot(o[1],w);u=s[0][0]*s[1][1]-s[1][0]*s[0][1],c=s[0][0]*l[1]-s[1][0]*l[0],h=l[0]*s[1][1]-l[1]*s[0][1],f=0===u?0:h/u,d=0===u?0:c/u,g=v.vectorLen(v.subtract(x,_)),f<(p=1e-6*g)||d<p?(a[1]=v.addArrays(x,v.mulItems(n,g/3)),a[2]=v.addArrays(_,v.mulItems(r,g/3))):(a[1]=v.addArrays(x,v.mulItems(n,f)),a[2]=v.addArrays(_,v.mulItems(r,d)));return a}(t,n,r,a);var c=function(t,e,n){var r,a,i,o,s,l,u,c;a=0,i=Math.floor(t.length/2);var h=f(e,10);for(s=0,l=t.length;s<l;s++)u=t[s],c=d(e,n[s],h,10),(r=(o=v.subtract(y.q(e,c),u))[0]*o[0]+o[1]*o[1])>a&&(a=r,i=s);return[a,i]}(t,s,e),h=i(c,2);return l=h[0],u=h[1],o&&o({bez:s,points:t,params:e,maxErr:l,maxPoint:u}),[s,l,u]}function c(t,e,n){return n.map((function(n,r){return h(t,e[r],n)}))}function h(t,e,n){var r=v.subtract(y.q(t,n),e),a=y.qprime(t,n),i=v.mulMatrix(r,a),o=v.sum(v.squareItems(a))+2*v.mulMatrix(r,y.qprimeprime(t,n));return 0===o?n:n-i/o}var f=function(t,e){for(var n,r=[0],a=t[0],i=0,o=1;o<=e;o++)n=y.q(t,o/e),i+=v.vectorLen(v.subtract(n,a)),r.push(i),a=n;return r=r.map((function(t){return t/i}))};function d(t,e,n,r){if(e<0)return 0;if(e>1)return 1;for(var a,i,o,s,l=1;l<=r;l++)if(e<=n[l]){o=(l-1)/r,i=l/r,s=(e-(a=n[l-1]))/(n[l]-a)*(i-o)+o;break}return s}function p(t,e){return v.normalize(v.subtract(t,e))}var v=function(){function t(){n(this,t)}return a(t,null,[{key:"zeros_Xx2x2",value:function(t){for(var e=[];t--;)e.push([0,0]);return e}},{key:"mulItems",value:function(t,e){return t.map((function(t){return t*e}))}},{key:"mulMatrix",value:function(t,e){return t.reduce((function(t,n,r){return t+n*e[r]}),0)}},{key:"subtract",value:function(t,e){return t.map((function(t,n){return t-e[n]}))}},{key:"addArrays",value:function(t,e){return t.map((function(t,n){return t+e[n]}))}},{key:"addItems",value:function(t,e){return t.map((function(t){return t+e}))}},{key:"sum",value:function(t){return t.reduce((function(t,e){return t+e}))}},{key:"dot",value:function(e,n){return t.mulMatrix(e,n)}},{key:"vectorLen",value:function(t){return Math.hypot.apply(Math,e(t))}},{key:"divItems",value:function(t,e){return t.map((function(t){return t/e}))}},{key:"squareItems",value:function(t){return t.map((function(t){return t*t}))}},{key:"normalize",value:function(t){return this.divItems(t,this.vectorLen(t))}}]),t}(),y=function(){function t(){n(this,t)}return a(t,null,[{key:"q",value:function(t,e){var n=1-e,r=v.mulItems(t[0],n*n*n),a=v.mulItems(t[1],3*n*n*e),i=v.mulItems(t[2],3*n*e*e),o=v.mulItems(t[3],e*e*e);return v.addArrays(v.addArrays(r,a),v.addArrays(i,o))}},{key:"qprime",value:function(t,e){var n=1-e,r=v.mulItems(v.subtract(t[1],t[0]),3*n*n),a=v.mulItems(v.subtract(t[2],t[1]),6*n*e),i=v.mulItems(v.subtract(t[3],t[2]),3*e*e);return v.addArrays(v.addArrays(r,a),i)}},{key:"qprimeprime",value:function(t,e){return v.addArrays(v.mulItems(v.addArrays(v.subtract(t[2],v.mulItems(t[1],2)),t[0]),6*(1-e)),v.mulItems(v.addArrays(v.subtract(t[3],v.mulItems(t[2],2)),t[1]),6*e))}}]),t}();t.exports=function(t,e,n){if(!Array.isArray(t))throw new TypeError("First argument should be an array");if(t.forEach((function(e){if(!Array.isArray(e)||e.some((function(t){return"number"!=typeof t}))||e.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")})),(t=t.filter((function(e,n){return 0===n||!e.every((function(e,r){return e===t[n-1][r]}))}))).length<2)return[];var r=t.length,a=p(t[1],t[0]),i=p(t[r-2],t[r-1]);return l(t,a,i,e,n)},t.exports.fitCubic=l,t.exports.createTangent=p},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var a=n(1),i=n(129),o=n(132),s=n(152),l=n(153);function u(t,e,n){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),n}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=h(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},c.apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||k(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=k(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||k(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var T=1e3,C=new WeakSet;function P(t){return{width:t[2]-t[0],height:t[3]-t[1]}}var O=function(){function t(){_(this,t)}return E(t,null,[{key:"create",value:function(t){switch(t.data.annotationType){case a.AnnotationType.LINK:return new R(t);case a.AnnotationType.TEXT:return new I(t);case a.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new F(t);case"Btn":return t.data.radioButton?new D(t):t.data.checkBox?new j(t):new N(t);case"Ch":return new B(t)}return new L(t);case a.AnnotationType.POPUP:return new U(t);case a.AnnotationType.FREETEXT:return new G(t);case a.AnnotationType.LINE:return new q(t);case a.AnnotationType.SQUARE:return new z(t);case a.AnnotationType.CIRCLE:return new V(t);case a.AnnotationType.POLYLINE:return new H(t);case a.AnnotationType.CARET:return new Y(t);case a.AnnotationType.INK:return new K(t);case a.AnnotationType.POLYGON:return new X(t);case a.AnnotationType.HIGHLIGHT:return new J(t);case a.AnnotationType.UNDERLINE:return new Q(t);case a.AnnotationType.SQUIGGLY:return new $(t);case a.AnnotationType.STRIKEOUT:return new Z(t);case a.AnnotationType.STAMP:return new tt(t);case a.AnnotationType.FILEATTACHMENT:return new et(t);default:return new M(t)}}}]),t}(),M=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.isRenderable,a=void 0!==r&&r,i=n.ignoreBorder,o=void 0!==i&&i,s=n.createQuadrilaterals,l=void 0!==s&&s;_(this,t),this.isRenderable=a,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,a&&(this.container=this._createContainer(o)),l&&(this.quadrilaterals=this._createQuadrilaterals(o))}return E(t,[{key:"_createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.data,n=this.page,r=this.viewport,i=document.createElement("section"),o=P(e.rect),s=o.width,l=o.height,u=A(r.viewBox,4),c=u[0],h=u[1],f=u[2],d=u[3],p=f-c,v=d-h;i.setAttribute("data-annotation-id",e.id);var y=a.Util.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]);if(!t&&e.borderStyle.width>0){i.style.borderWidth="".concat(e.borderStyle.width,"px");var g=e.borderStyle.horizontalCornerRadius,m=e.borderStyle.verticalCornerRadius;if(g>0||m>0){var b="calc(".concat(g,"px * var(--scale-factor)) / calc(").concat(m,"px * var(--scale-factor))");i.style.borderRadius=b}else if(this instanceof D){var w="calc(".concat(s,"px * var(--scale-factor)) / calc(").concat(l,"px * var(--scale-factor))");i.style.borderRadius=w}switch(e.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:i.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:i.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:i.style.borderBottomStyle="solid"}var k=e.borderColor||null;k?i.style.borderColor=a.Util.makeHexColor(0|k[0],0|k[1],0|k[2]):i.style.borderWidth=0}i.style.left="".concat(100*(y[0]-c)/p,"%"),i.style.top="".concat(100*(y[1]-h)/v,"%");var x=e.rotation;return e.hasOwnCanvas||0===x?(i.style.width="".concat(100*s/p,"%"),i.style.height="".concat(100*l/v,"%")):this.setRotation(x,i),i}},{key:"setRotation",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,a=A(this.viewport.viewBox,4),i=a[0],o=a[1],s=a[2],l=a[3],u=s-i,c=l-o,h=P(this.data.rect),f=h.width,d=h.height;t%180==0?(e=100*f/u,n=100*d/c):(e=100*d/u,n=100*f/c),r.style.width="".concat(e,"%"),r.style.height="".concat(n,"%"),r.setAttribute("data-main-rotation",(360-t)%360)}},{key:"_commonActions",get:function(){var t=this,e=function(t,e,n){var r=n.detail[t];n.target.style[e]=s.ColorConverters["".concat(r[0],"_HTML")](r.slice(1))};return(0,a.shadow)(this,"_commonActions",{display:function(e){var n=e.detail.display%2==1;t.container.style.visibility=n?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{hidden:n,print:0===e.detail.display||3===e.detail.display})},print:function(e){t.annotationStorage.setValue(t.data.id,{print:e.detail.print})},hidden:function(e){t.container.style.visibility=e.detail.hidden?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{hidden:e.detail.hidden})},focus:function(t){setTimeout((function(){return t.target.focus({preventScroll:!1})}),0)},userName:function(t){t.target.title=t.detail.userName},readonly:function(t){t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:function(e){t._setRequired(e.target,e.detail.required)},bgColor:function(t){e("bgColor","backgroundColor",t)},fillColor:function(t){e("fillColor","backgroundColor",t)},fgColor:function(t){e("fgColor","color",t)},textColor:function(t){e("textColor","color",t)},borderColor:function(t){e("borderColor","borderColor",t)},strokeColor:function(t){e("strokeColor","borderColor",t)},rotation:function(e){var n=e.detail.rotation;t.setRotation(n),t.annotationStorage.setValue(t.data.id,{rotation:n})}})}},{key:"_dispatchEventFromSandbox",value:function(t,e){for(var n=this._commonActions,r=0,a=Object.keys(e.detail);r<a.length;r++){var i=a[r],o=t[i]||n[i];o&&o(e)}}},{key:"_setDefaultPropertiesFromJS",value:function(t){if(this.enableScripting){var e=this.annotationStorage.getRawValue(this.data.id);if(e)for(var n=this._commonActions,r=0,a=Object.entries(e);r<a.length;r++){var i=A(a[r],2),o=i[0],s=i[1],l=n[o];l&&(l({detail:s,target:t}),delete e[o])}}}},{key:"_createQuadrilaterals",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var e,n=[],r=this.data.rect,a=w(this.data.quadPoints);try{for(a.s();!(e=a.n()).done;){var i=e.value;this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y],n.push(this._createContainer(t))}}catch(t){a.e(t)}finally{a.f()}return this.data.rect=r,n}},{key:"_createPopup",value:function(t,e){var n=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,n=this.quadrilaterals[0]),t||((t=document.createElement("div")).className="popupTriggerArea",n.append(t));var r=new W({container:n,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();r.style.left="100%",n.append(r)}},{key:"_renderQuadrilaterals",value:function(t){var e,n=w(this.quadrilaterals);try{for(n.s();!(e=n.n()).done;){e.value.className=t}}catch(t){n.e(t)}finally{n.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];if(this._fieldObjects){var r=this._fieldObjects[t];if(r){var i,o=w(r);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.page,u=s.id,c=s.exportValues;if(-1!==l&&u!==e){var h="string"==typeof c?c:null,f=document.querySelector('[data-element-id="'.concat(u,'"]'));!f||C.has(f)?n.push({id:u,exportValue:h,domElement:f}):(0,a.warn)("_getElementsByName - element not allowed: ".concat(u))}}}catch(t){o.e(t)}finally{o.f()}}return n}var d,p=w(document.getElementsByName(t));try{for(p.s();!(d=p.n()).done;){var v=d.value,y=v.id,g=v.exportValue;y!==e&&(C.has(v)&&n.push({id:y,exportValue:g,domElement:v}))}}catch(t){p.e(t)}finally{p.f()}return n}}],[{key:"platform",get:function(){var t="undefined"!=typeof navigator?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}]),t}(),R=function(t){p(n,t);var e=y(n);function n(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _(this,n),(r=e.call(this,t,{isRenderable:!0,ignoreBorder:!(null==a||!a.ignoreBorder),createQuadrilaterals:!0})).isTooltipOnly=t.data.isTooltipOnly,r}return E(n,[{key:"render",value:function(){var t=this.data,e=this.linkService,n=document.createElement("a");n.setAttribute("data-element-id",t.id);var r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action),r=!0):t.dest?(this._bindLink(n,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((function(t,e){var r=0===e?n:n.cloneNode();return t.append(r),t})):(this.container.className="linkAnnotation",r&&this.container.append(n),this.container)}},{key:"_bindLink",value:function(t,e){var n=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&n.linkService.goToDestination(e),!1},(e||""===e)&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeNamedAction(e),!1},t.className="internalLink"}},{key:"_bindJSAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl("");for(var r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),a=function(){var a=o[i],s=r.get(a);if(!s)return"continue";t[s]=function(){var t;return null===(t=n.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:n,detail:{id:e.id,name:a}}),!1}},i=0,o=Object.keys(e.actions);i<o.length;i++)a();t.onclick||(t.onclick=function(){return!1}),t.className="internalLink"}},{key:"_bindResetFormAction",value:function(t,e){var n=this,r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(r||(t.onclick=function(){return!1}));t.onclick=function(){r&&r();var t=e.fields,i=e.refs,o=e.include,s=[];if(0!==t.length||0!==i.length){var l,u=new Set(i),c=w(t);try{for(c.s();!(l=c.n()).done;){var h,f=l.value,p=w(n._fieldObjects[f]||[]);try{for(p.s();!(h=p.n()).done;){var v=h.value.id;u.add(v)}}catch(t){p.e(t)}finally{p.f()}}}catch(t){c.e(t)}finally{c.f()}for(var y=0,g=Object.values(n._fieldObjects);y<g.length;y++){var m,b=w(g[y]);try{for(b.s();!(m=b.n()).done;){var A=m.value;u.has(A.id)===o&&s.push(A)}}catch(t){b.e(t)}finally{b.f()}}}else for(var k=0,x=Object.values(n._fieldObjects);k<x.length;k++){var _=x[k];s.push.apply(s,d(_))}for(var S,E=n.annotationStorage,T=[],P=0,O=s;P<O.length;P++){var M=O[P],R=M.id;switch(T.push(R),M.type){case"text":var I=M.defaultValue||"";E.setValue(R,{value:I});break;case"checkbox":case"radiobutton":var L=M.defaultValue===M.exportValues;E.setValue(R,{value:L});break;case"combobox":case"listbox":var F=M.defaultValue||"";E.setValue(R,{value:F});break;default:continue}var j=document.querySelector('[data-element-id="'.concat(R,'"]'));j&&(C.has(j)?j.dispatchEvent(new Event("resetform")):(0,a.warn)("_bindResetFormAction - element not allowed: ".concat(R)))}n.enableScripting&&(null===(S=n.linkService.eventBus)||void 0===S||S.dispatch("dispatcheventinsandbox",{source:n,detail:{id:"app",ids:T,name:"ResetForm"}}));return!1}}}]),n}(M),I=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o})}return E(n,[{key:"render",value:function(){this.container.className="textAnnotation";var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}]),n}(M),L=function(t){p(n,t);var e=y(n);function n(){return _(this,n),e.apply(this,arguments)}return E(n,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(t){var e=M.platform,n=e.isWin,r=e.isMac;return n&&t.ctrlKey||r&&t.metaKey}},{key:"_setEventListener",value:function(t,e,n,r){var a=this;e.includes("mouse")?t.addEventListener(e,(function(t){var e;null===(e=a.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:n,value:r(t),shift:t.shiftKey,modifier:a._getKeyModifier(t)}})})):t.addEventListener(e,(function(t){var e;null===(e=a.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:n,value:r(t)}})}))}},{key:"_setEventListeners",value:function(t,e,n){var r,a=w(e);try{for(a.s();!(r=a.n()).done;){var i,o=A(r.value,2),s=o[0],l=o[1];("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])&&this._setEventListener(t,s,l,n)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_setBackgroundColor",value:function(t){var e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":a.Util.makeHexColor(e[0],e[1],e[2])}},{key:"_setTextStyle",value:function(t){var e,n=this.data.defaultAppearanceData.fontColor,r=this.data.defaultAppearanceData.fontSize||9,i=t.style;if(this.data.multiLine){var o=Math.abs(this.data.rect[3]-this.data.rect[1]),s=o/(Math.round(o/(a.LINE_FACTOR*r))||1);e=Math.min(r,Math.round(s/a.LINE_FACTOR))}else{var l=Math.abs(this.data.rect[3]-this.data.rect[1]);e=Math.min(r,Math.round(l/a.LINE_FACTOR))}i.fontSize="calc(".concat(e,"px * var(--scale-factor))"),i.color=a.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(i.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}]),n}(M),F=function(t){p(n,t);var e=y(n);function n(t){_(this,n);var r=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;return e.call(this,t,{isRenderable:r})}return E(n,[{key:"setPropertyOnSiblings",value:function(t,e,n,r){var a,i=this.annotationStorage,o=w(this._getElementsByName(t.name,t.id));try{for(o.s();!(a=o.n()).done;){var s=a.value;s.domElement&&(s.domElement[e]=n),i.setValue(s.id,f({},r,n))}}catch(t){o.e(t)}finally{o.f()}}},{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data.id;this.container.className="textWidgetAnnotation";var r=null;if(this.renderForms){var a=e.getValue(n,{value:this.data.fieldValue}),i=a.formattedValue||a.value||"",o={userValue:i,formattedValue:null,valueOnFocus:""};this.data.multiLine?((r=document.createElement("textarea")).textContent=i,this.data.doNotScroll&&(r.style.overflowY="hidden")):((r=document.createElement("input")).type="text",r.setAttribute("value",i),this.data.doNotScroll&&(r.style.overflowX="hidden")),C.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=T,this._setRequired(r,this.data.required),r.addEventListener("input",(function(a){e.setValue(n,{value:a.target.value}),t.setPropertyOnSiblings(r,"value",a.target.value,"value")})),r.addEventListener("resetform",(function(e){var n,a=null!==(n=t.data.defaultFieldValue)&&void 0!==n?n:"";r.value=o.userValue=a,o.formattedValue=null}));var s=function(t){var e=o.formattedValue;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var l;r.addEventListener("focus",(function(t){o.userValue&&(t.target.value=o.userValue),o.valueOnFocus=t.target.value})),r.addEventListener("updatefromsandbox",(function(r){var a={value:function(t){var r;o.userValue=null!==(r=t.detail.value)&&void 0!==r?r:"",e.setValue(n,{value:o.userValue.toString()}),t.target.value=o.userValue},formattedValue:function(t){var r=t.detail.formattedValue;o.formattedValue=r,null!=r&&t.target!==document.activeElement&&(t.target.value=r),e.setValue(n,{formattedValue:r})},selRange:function(t){var e;(e=t.target).setSelectionRange.apply(e,d(t.detail.selRange))}};t._dispatchEventFromSandbox(a,r)})),r.addEventListener("keydown",(function(e){var r,a=-1;if("Escape"===e.key?a=0:"Enter"===e.key?a=2:"Tab"===e.key&&(a=3),-1!==a){var i=e.target.value;o.valueOnFocus!==i&&(o.userValue=i,null===(r=t.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:i,willCommit:!0,commitKey:a,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}}));var u=s;s=null,r.addEventListener("blur",(function(e){var r,a=e.target.value;(o.userValue=a,t._mouseState.isDown&&o.valueOnFocus!==a)&&(null===(r=t.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));u(e)})),null!==(l=this.data.actions)&&void 0!==l&&l.Keystroke&&r.addEventListener("beforeinput",(function(e){var r,a=e.data,i=e.target,o=i.value,s=i.selectionStart,l=i.selectionEnd,u=s,c=l;switch(e.inputType){case"deleteWordBackward":var h=o.substring(0,s).match(/\w*[^\w]*$/);h&&(u-=h[0].length);break;case"deleteWordForward":var f=o.substring(s).match(/^[^\w]*\w*/);f&&(c+=f[0].length);break;case"deleteContentBackward":s===l&&(u-=1);break;case"deleteContentForward":s===l&&(c+=1)}e.preventDefault(),null===(r=t.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:o,change:a||"",willCommit:!1,selStart:u,selEnd:c}})})),this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}if(s&&r.addEventListener("blur",s),null!==this.data.maxLen&&(r.maxLength=this.data.maxLen),this.data.comb){var c=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;r.classList.add("comb"),r.style.letterSpacing="calc(".concat(c,"px * var(--scale-factor) - 1ch)")}}else(r=document.createElement("div")).textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell";return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}]),n}(L),j=function(t){p(n,t);var e=y(n);function n(t){return _(this,n),e.call(this,t,{isRenderable:t.renderForms})}return E(n,[{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data,r=n.id,a=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;"string"==typeof a&&(a="Off"!==a,e.setValue(r,{value:a})),this.container.className="buttonWidgetAnnotation checkBox";var i=document.createElement("input");return C.add(i),i.setAttribute("data-element-id",r),i.disabled=n.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=n.fieldName,a&&i.setAttribute("checked",!0),i.setAttribute("exportValue",n.exportValue),i.tabIndex=T,i.addEventListener("change",(function(a){var i,o=a.target,s=o.name,l=o.checked,u=w(t._getElementsByName(s,r));try{for(u.s();!(i=u.n()).done;){var c=i.value,h=l&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}}catch(t){u.e(t)}finally{u.f()}e.setValue(r,{value:l})})),i.addEventListener("resetform",(function(t){var e=n.defaultFieldValue||"Off";t.target.checked=e===n.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(function(n){var a={value:function(t){t.target.checked="Off"!==t.detail.value,e.setValue(r,{value:t.target.checked})}};t._dispatchEventFromSandbox(a,n)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}]),n}(L),D=function(t){p(n,t);var e=y(n);function n(t){return _(this,n),e.call(this,t,{isRenderable:t.renderForms})}return E(n,[{key:"render",value:function(){var t=this;this.container.className="buttonWidgetAnnotation radioButton";var e=this.annotationStorage,n=this.data,r=n.id,a=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;"string"==typeof a&&(a=a!==n.buttonValue,e.setValue(r,{value:a}));var i=document.createElement("input");if(C.add(i),i.setAttribute("data-element-id",r),i.disabled=n.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=n.fieldName,a&&i.setAttribute("checked",!0),i.tabIndex=T,i.addEventListener("change",(function(n){var a,i=n.target,o=i.name,s=i.checked,l=w(t._getElementsByName(o,r));try{for(l.s();!(a=l.n()).done;){var u=a.value;e.setValue(u.id,{value:!1})}}catch(t){l.e(t)}finally{l.f()}e.setValue(r,{value:s})})),i.addEventListener("resetform",(function(t){var e=n.defaultFieldValue;t.target.checked=null!=e&&e===n.buttonValue})),this.enableScripting&&this.hasJSActions){var o=n.buttonValue;i.addEventListener("updatefromsandbox",(function(n){var a={value:function(n){var a,i=o===n.detail.value,s=w(t._getElementsByName(n.target.name));try{for(s.s();!(a=s.n()).done;){var l=a.value,u=i&&l.id===r;l.domElement&&(l.domElement.checked=u),e.setValue(l.id,{value:u})}}catch(t){s.e(t)}finally{s.f()}}};t._dispatchEventFromSandbox(a,n)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}]),n}(L),N=function(t){p(n,t);var e=y(n);function n(t){return _(this,n),e.call(this,t,{ignoreBorder:t.data.hasAppearance})}return E(n,[{key:"render",value:function(){var t=this,e=c(b(n.prototype),"render",this).call(this);e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText);var r=e.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",(function(e){t._dispatchEventFromSandbox({},e)}))),e}}]),n}(R),B=function(t){p(n,t);var e=y(n);function n(t){return _(this,n),e.call(this,t,{isRenderable:t.renderForms})}return E(n,[{key:"render",value:function(){var t=this;this.container.className="choiceWidgetAnnotation";var e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");C.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=T;var i=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",(function(e){var n,r=t.data.defaultFieldValue,i=w(a.options);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.selected=o.value===r}}catch(t){i.e(t)}finally{i.f()}}));var o,s=w(this.data.options);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=document.createElement("option");u.textContent=l.displayValue,u.value=l.exportValue,r.value.includes(l.exportValue)&&(u.setAttribute("selected",!0),i=!1),a.append(u)}}catch(t){s.e(t)}finally{s.f()}var c=null;if(i){var h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),a.prepend(h),c=function(){h.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}var f=function(t,e){var n=e?"value":"textContent",r=t.target.options;return t.target.multiple?Array.prototype.filter.call(r,(function(t){return t.selected})).map((function(t){return t[n]})):-1===r.selectedIndex?null:r[r.selectedIndex][n]},d=function(t){var e=t.target.options;return Array.prototype.map.call(e,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",(function(r){var i={value:function(t){var r;null===(r=c)||void 0===r||r();var i,o=t.detail.value,s=new Set(Array.isArray(o)?o:[o]),l=w(a.options);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.selected=s.has(u.value)}}catch(t){l.e(t)}finally{l.f()}e.setValue(n,{value:f(t,!0)})},multipleSelection:function(t){a.multiple=!0},remove:function(t){var r=a.options,i=t.detail.remove;if(r[i].selected=!1,a.remove(i),r.length>0){var o=Array.prototype.findIndex.call(r,(function(t){return t.selected}));-1===o&&(r[0].selected=!0)}e.setValue(n,{value:f(t,!0),items:d(t)})},clear:function(t){for(;0!==a.length;)a.remove(0);e.setValue(n,{value:null,items:[]})},insert:function(t){var r=t.detail.insert,i=r.index,o=r.displayValue,s=r.exportValue,l=a.children[i],u=document.createElement("option");u.textContent=o,u.value=s,l?l.before(u):a.append(u),e.setValue(n,{value:f(t,!0),items:d(t)})},items:function(t){for(var r=t.detail.items;0!==a.length;)a.remove(0);var i,o=w(r);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.displayValue,u=s.exportValue,c=document.createElement("option");c.textContent=l,c.value=u,a.append(c)}}catch(t){o.e(t)}finally{o.f()}a.options.length>0&&(a.options[0].selected=!0),e.setValue(n,{value:f(t,!0),items:d(t)})},indices:function(t){var r,a=new Set(t.detail.indices),i=w(t.target.options);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.selected=a.has(o.index)}}catch(t){i.e(t)}finally{i.f()}e.setValue(n,{value:f(t,!0)})},editable:function(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(i,r)})),a.addEventListener("input",(function(r){var a,i=f(r,!0),o=f(r,!1);e.setValue(n,{value:i}),null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:o,changeEx:i,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(function(t){return t.target.checked}))):a.addEventListener("input",(function(t){e.setValue(n,{value:f(t,!0)})})),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}]),n}(L),U=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o})}return E(n,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'.concat(this.data.parentId,'"]'),e=this.layer.querySelectorAll(t);if(0===e.length)return this.container;var n=new W({container:this.container,trigger:Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),r=this.page,i=a.Util.normalizeRect([this.data.parentRect[0],r.view[3]-this.data.parentRect[1]+r.view[1],this.data.parentRect[2],r.view[3]-this.data.parentRect[3]+r.view[1]]),o=i[0]+this.data.parentRect[2]-this.data.parentRect[0],s=i[1],l=A(this.viewport.viewBox,4),u=l[0],c=l[1],h=l[2]-u,f=l[3]-c;return this.container.style.left="".concat(100*(o-u)/h,"%"),this.container.style.top="".concat(100*(s-c)/f,"%"),this.container.append(n.render()),this.container}}]),n}(M),W=function(){function t(e){_(this,t),this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}return E(t,[{key:"render",value:function(){var t,e,n=document.createElement("div");n.className="popupWrapper",this.hideElement=this.hideWrapper?n:this.container,this.hideElement.hidden=!0;var r=document.createElement("div");r.className="popup";var o=this.color;if(o){var s=.7*(255-o[0])+o[0],u=.7*(255-o[1])+o[1],c=.7*(255-o[2])+o[2];r.style.backgroundColor=a.Util.makeHexColor(0|s,0|u,0|c)}var h=document.createElement("h1");h.dir=this.titleObj.dir,h.textContent=this.titleObj.str,r.append(h);var f=i.PDFDateString.toDateObject(this.modificationDate);if(f){var d=document.createElement("span");d.className="popupDate",d.textContent="{{date}}, {{time}}",d.dataset.l10nId="annotation_date_string",d.dataset.l10nArgs=JSON.stringify({date:f.toLocaleDateString(),time:f.toLocaleTimeString()}),r.append(d)}if(null===(t=this.richText)||void 0===t||!t.str||null!==(e=this.contentsObj)&&void 0!==e&&e.str&&this.contentsObj.str!==this.richText.str){var p=this._formatContents(this.contentsObj);r.append(p)}else l.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:r}),r.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var v,y=w(this.trigger);try{for(y.s();!(v=y.n()).done;){var g=v.value;g.addEventListener("click",this._toggle.bind(this)),g.addEventListener("mouseover",this._show.bind(this,!1)),g.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(t){y.e(t)}finally{y.f()}return r.addEventListener("click",this._hide.bind(this,!0)),n.append(r),n}},{key:"_formatContents",value:function(t){var e=t.str,n=t.dir,r=document.createElement("p");r.className="popupContent",r.dir=n;for(var a=e.split(/(?:\r\n?|\n)/),i=0,o=a.length;i<o;++i){var s=a[i];r.append(document.createTextNode(s)),i<o-1&&r.append(document.createElement("br"))}return r}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),t}(),G=function(t){p(n,t);var e=y(n);function n(t){var r,a,i,o;_(this,n);var s=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return(o=e.call(this,t,{isRenderable:s,ignoreBorder:!0})).textContent=t.data.textContent,o}return E(n,[{key:"render",value:function(){if(this.container.className="freeTextAnnotation",this.textContent){var t=document.createElement("div");t.className="annotationTextContent";var e,n=w(this.textContent);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=document.createElement("span");a.textContent=r,t.append(a)}}catch(t){n.e(t)}finally{n.f()}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),n}(M),q=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return E(n,[{key:"render",value:function(){this.container.className="lineAnnotation";var t=this.data,e=P(t.rect),n=e.width,r=e.height,a=this.svgFactory.create(n,r,!0),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),i.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),i.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),a.append(i),this.container.append(a),this._createPopup(i,t),this.container}}]),n}(M),z=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return E(n,[{key:"render",value:function(){this.container.className="squareAnnotation";var t=this.data,e=P(t.rect),n=e.width,r=e.height,a=this.svgFactory.create(n,r,!0),i=t.borderStyle.width,o=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",i/2),o.setAttribute("y",i/2),o.setAttribute("width",n-i),o.setAttribute("height",r-i),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),this._createPopup(o,t),this.container}}]),n}(M),V=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return E(n,[{key:"render",value:function(){this.container.className="circleAnnotation";var t=this.data,e=P(t.rect),n=e.width,r=e.height,a=this.svgFactory.create(n,r,!0),i=t.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",n/2),o.setAttribute("cy",r/2),o.setAttribute("rx",n/2-i/2),o.setAttribute("ry",r/2-i/2),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),this._createPopup(o,t),this.container}}]),n}(M),H=function(t){p(n,t);var e=y(n);function n(t){var r,a,i,o;_(this,n);var s=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return(o=e.call(this,t,{isRenderable:s,ignoreBorder:!0})).containerClassName="polylineAnnotation",o.svgElementName="svg:polyline",o}return E(n,[{key:"render",value:function(){this.container.className=this.containerClassName;var t,e=this.data,n=P(e.rect),r=n.width,a=n.height,i=this.svgFactory.create(r,a,!0),o=[],s=w(e.vertices);try{for(s.s();!(t=s.n()).done;){var l=t.value,u=l.x-e.rect[0],c=e.rect[3]-l.y;o.push(u+","+c)}}catch(t){s.e(t)}finally{s.f()}o=o.join(" ");var h=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",o),h.setAttribute("stroke-width",e.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),i.append(h),this.container.append(i),this._createPopup(h,e),this.container}}]),n}(M),X=function(t){p(n,t);var e=y(n);function n(t){var r;return _(this,n),(r=e.call(this,t)).containerClassName="polygonAnnotation",r.svgElementName="svg:polygon",r}return E(n)}(H),Y=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return E(n,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),n}(M),K=function(t){p(n,t);var e=y(n);function n(t){var r,a,i,o;_(this,n);var s=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return(o=e.call(this,t,{isRenderable:s,ignoreBorder:!0})).containerClassName="inkAnnotation",o.svgElementName="svg:polyline",o}return E(n,[{key:"render",value:function(){this.container.className=this.containerClassName;var t,e=this.data,n=P(e.rect),r=n.width,a=n.height,i=this.svgFactory.create(r,a,!0),o=w(e.inkLists);try{for(o.s();!(t=o.n()).done;){var s,l=t.value,u=[],c=w(l);try{for(c.s();!(s=c.n()).done;){var h=s.value,f=h.x-e.rect[0],d=e.rect[3]-h.y;u.push("".concat(f,",").concat(d))}}catch(t){c.e(t)}finally{c.f()}u=u.join(" ");var p=this.svgFactory.createElement(this.svgElementName);p.setAttribute("points",u),p.setAttribute("stroke-width",e.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),this._createPopup(p,e),i.append(p)}}catch(t){o.e(t)}finally{o.f()}return this.container.append(i),this.container}}]),n}(M),J=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return E(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),n}(M),Q=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return E(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),n}(M),$=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return E(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),n}(M),Z=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return E(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),n}(M),tt=function(t){p(n,t);var e=y(n);function n(t){var r,a,i;_(this,n);var o=!!(t.data.hasPopup||null!==(r=t.data.titleObj)&&void 0!==r&&r.str||null!==(a=t.data.contentsObj)&&void 0!==a&&a.str||null!==(i=t.data.richText)&&void 0!==i&&i.str);return e.call(this,t,{isRenderable:o,ignoreBorder:!0})}return E(n,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),n}(M),et=function(t){p(n,t);var e=y(n);function n(t){var r,a;_(this,n);var o=(a=e.call(this,t,{isRenderable:!0})).data.file,s=o.filename,l=o.content;return a.filename=(0,i.getFilenameFromUrl)(s),a.content=l,null===(r=a.linkService.eventBus)||void 0===r||r.dispatch("fileattachmentannotation",{source:m(a),filename:s,content:l}),a}return E(n,[{key:"render",value:function(){var t,e;this.container.className="fileAttachmentAnnotation";var n=document.createElement("div");return n.className="popupTriggerArea",n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!==(t=this.data.titleObj)&&void 0!==t&&t.str||null!==(e=this.data.contentsObj)&&void 0!==e&&e.str||this.data.richText)&&this._createPopup(n,this.data),this.container.append(n),this.container}},{key:"_download",value:function(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.container,this.content,this.filename)}}]),n}(M),nt=function(){function t(){_(this,t)}return E(t,null,[{key:"render",value:function(e){var n=e.annotations,r=e.div,s=e.viewport;u(this,t,rt).call(this,r,s);var l,c=w(n);try{for(c.s();!(l=c.n()).done;){var h=l.value;if(h.annotationType!==a.AnnotationType.POPUP){var f=P(h.rect),d=f.width,p=f.height;if(d<=0||p<=0)continue}var v=O.create({data:h,layer:r,page:e.page,viewport:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:e.annotationStorage||new o.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(v.isRenderable){var y=v.render();if(h.hidden&&(y.style.visibility="hidden"),Array.isArray(y)){var g,m=w(y);try{for(m.s();!(g=m.n()).done;){var b=g.value;r.append(b)}}catch(t){m.e(t)}finally{m.f()}}else v instanceof U?r.prepend(y):r.append(y)}}}catch(t){c.e(t)}finally{c.f()}u(this,t,at).call(this,r,e.annotationCanvasMap)}},{key:"update",value:function(e){var n=e.annotationCanvasMap,r=e.div,a=e.viewport;u(this,t,rt).call(this,r,a),u(this,t,at).call(this,r,n),r.hidden=!1}}]),t}();function rt(t,e){var n=e.width,r=e.height,a=e.rotation,i=t.style,o=a%180!=0,s=Math.floor(n)+"px",l=Math.floor(r)+"px";i.width=o?l:s,i.height=o?s:l,t.setAttribute("data-main-rotation",a)}function at(t,e){if(e){var n,r=w(e);try{for(r.s();!(n=r.n()).done;){var a=A(n.value,2),i=a[0],o=a[1],s=t.querySelector('[data-annotation-id="'.concat(i,'"]'));if(s){var l=s.firstChild;l?"CANVAS"===l.nodeName?l.replaceWith(o):l.before(o):s.append(o)}}}catch(t){r.e(t)}finally{r.f()}e.clear()}}e.AnnotationLayer=nt},(t,e)=>{"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"CMYK_G",value:function(t){var e=n(t,4),r=e[0],a=e[1],i=e[2],o=e[3];return["G",1-Math.min(1,.3*r+.59*i+.11*a+o)]}},{key:"G_CMYK",value:function(t){return["CMYK",0,0,0,1-n(t,1)[0]]}},{key:"G_RGB",value:function(t){var e=n(t,1)[0];return["RGB",e,e,e]}},{key:"G_HTML",value:function(t){var e=i(n(t,1)[0]);return"#".concat(e).concat(e).concat(e)}},{key:"RGB_G",value:function(t){var e=n(t,3);return["G",.3*e[0]+.59*e[1]+.11*e[2]]}},{key:"RGB_HTML",value:function(t){var e=n(t,3),r=e[0],a=e[1],o=e[2],s=i(r),l=i(a),u=i(o);return"#".concat(s).concat(l).concat(u)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(t){var e=n(t,4),r=e[0],a=e[1],i=e[2],o=e[3];return["RGB",1-Math.min(1,r+o),1-Math.min(1,i+o),1-Math.min(1,a+o)]}},{key:"CMYK_HTML",value:function(t){var e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}},{key:"RGB_CMYK",value:function(t){var e=n(t,3),r=1-e[0],a=1-e[1],i=1-e[2];return["CMYK",r,a,i,Math.min(r,a,i)]}}],(r=null)&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.ColorConverters=o},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=n(145);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"setupStorage",value:function(t,e,n,r,a){var o=r.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==o.value&&(t.textContent=o.value),"print"===a)break;t.addEventListener("input",(function(t){r.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===a)break;t.addEventListener("change",(function(t){r.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==o.value&&t.setAttribute("value",o.value),"print"===a)break;t.addEventListener("input",(function(t){r.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==o.value){var s,l=i(n.children);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.attributes.value===o.value&&(u.attributes.selected=!0)}}catch(t){l.e(t)}finally{l.f()}}t.addEventListener("input",(function(t){var n=t.target.options,a=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(e,{value:a})}))}}},{key:"setAttributes",value:function(t){var e=t.html,n=t.element,r=t.storage,i=void 0===r?null:r,o=t.intent,s=t.linkService,l=n.attributes,u=e instanceof HTMLAnchorElement;"radio"===l.type&&(l.name="".concat(l.name,"-").concat(o));for(var c=0,h=Object.entries(l);c<h.length;c++){var f=a(h[c],2),d=f[0],p=f[1];if(null!=p)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||"href"!==d&&"newWindow"!==d)&&e.setAttribute(d,p)}}u&&s.addLinkAttributes(e,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(e,l.dataId,n,i)}},{key:"render",value:function(t){var e=t.annotationStorage,n=t.linkService,o=t.xfaHtml,s=t.intent||"display",l=document.createElement(o.name);o.attributes&&this.setAttributes({html:l,element:o,intent:s,linkService:n});var u=[[o,-1,l]],c=t.div;if(c.append(l),t.viewport){var h="matrix(".concat(t.viewport.transform.join(","),")");c.style.transform=h}"richText"!==s&&c.setAttribute("class","xfaLayer xfaFont");for(var f=[];u.length>0;){var d,p=a(u.at(-1),3),v=p[0],y=p[1],g=p[2];if(y+1!==v.children.length){var m=v.children[++u.at(-1)[1]];if(null!==m){var b=m.name;if("#text"!==b){var w=void 0;if(w=null!=m&&null!==(d=m.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(m.attributes.xmlns,b):document.createElement(b),g.append(w),m.attributes&&this.setAttributes({html:w,element:m,storage:e,intent:s,linkService:n}),m.children&&m.children.length>0)u.push([m,-1,w]);else if(m.value){var A=document.createTextNode(m.value);r.XfaText.shouldBuildText(b)&&f.push(A),w.append(A)}}else{var k=document.createTextNode(m.value);f.push(k),g.append(k)}}}else u.pop()}var x,_=i(c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(_.s();!(x=_.n()).done;)x.value.setAttribute("readOnly",!0)}catch(t){_.e(t)}finally{_.f()}return{textDivs:f}}},{key:"update",value:function(t){var e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}],(n=null)&&l(e.prototype,n),o&&l(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.XfaLayer=u},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=function(t){var e=new y({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e};var r=n(1),a=n(129);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var l=30,u=new Map,c=/^\s+$/g;function h(t,e,n,a){var i=document.createElement("span"),o=t._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};t._textDivs.push(i);var s=r.Util.transform(t._viewport.transform,e.transform),h=Math.atan2(s[1],s[0]),f=n[e.fontName];f.vertical&&(h+=Math.PI/2);var d,p,v=Math.hypot(s[2],s[3]),y=v*function(t,e){var n=u.get(t);if(n)return n;e.save(),e.font="".concat(l,"px ").concat(t);var r=e.measureText(""),a=r.fontBoundingBoxAscent,i=Math.abs(r.fontBoundingBoxDescent);if(a){e.restore();var o=a/(a+i);return u.set(t,o),o}e.strokeStyle="red",e.clearRect(0,0,l,l),e.strokeText("g",0,0);var s=e.getImageData(0,0,l,l).data;i=0;for(var c=s.length-1-3;c>=0;c-=4)if(s[c]>0){i=Math.ceil(c/4/l);break}e.clearRect(0,0,l,l),e.strokeText("A",0,l),a=0;for(var h=0,f=(s=e.getImageData(0,0,l,l).data).length;h<f;h+=4)if(s[h]>0){a=l-Math.floor(h/4/l);break}if(e.restore(),a){var d=a/(a+i);return u.set(t,d),d}return u.set(t,.8),.8}(f.fontFamily,a);0===h?(d=s[4],p=s[5]-y):(d=s[4]+y*Math.sin(h),p=s[5]-y*Math.cos(h)),i.style.left="".concat(d,"px"),i.style.top="".concat(p,"px"),i.style.fontSize="".concat(v,"px"),i.style.fontFamily=f.fontFamily,o.fontSize=v,i.setAttribute("role","presentation"),i.textContent=e.str,i.dir=e.dir,t._fontInspectorEnabled&&(i.dataset.fontName=e.fontName),0!==h&&(o.angle=h*(180/Math.PI));var g=!1;if(e.str.length>1||t._enhanceTextSelection&&c.test(e.str))g=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){var m=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);m!==b&&Math.max(m,b)/Math.min(m,b)>1.5&&(g=!0)}if(g&&(f.vertical?o.canvasWidth=e.height*t._viewport.scale:o.canvasWidth=e.width*t._viewport.scale),t._textDivProperties.set(i,o),t._textContentStream&&t._layoutText(i),t._enhanceTextSelection&&o.hasText){var w=1,A=0;0!==h&&(w=Math.cos(h),A=Math.sin(h));var k,x,_=(f.vertical?e.height:e.width)*t._viewport.scale,S=v;0!==h?(k=[w,A,-A,w,d,p],x=r.Util.getAxialAlignedBoundingBox([0,0,_,S],k)):x=[d,p,d+_,p+S],t._bounds.push({left:x[0],top:x[1],right:x[2],bottom:x[3],div:i,size:[_,S],m:k})}}function f(t){if(!t._canceled){var e=t._textDivs,n=t._capability,r=e.length;if(r>1e5)return t._renderingDone=!0,void n.resolve();if(!t._textContentStream)for(var a=0;a<r;a++)t._layoutText(e[a]);t._renderingDone=!0,n.resolve()}}function d(t,e,n){for(var r=0,a=0;a<n;a++){var i=t[e++];i>0&&(r=r?Math.min(i,r):i)}return r}function p(t){for(var e=t._bounds,n=t._viewport,a=function(t,e,n){var r=n.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));v(t,r);var a,i=new Array(n.length),s=o(r);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.index;i[u]={left:l.x1New,top:0,right:l.x2New,bottom:0}}}catch(t){s.e(t)}finally{s.f()}n.map((function(e,n){var a=i[n],o=r[n];o.x1=e.top,o.y1=t-a.right,o.x2=e.bottom,o.y2=t-a.left,o.index=n,o.x1New=void 0,o.x2New=void 0})),v(e,r);var c,h=o(r);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=f.index;i[d].top=f.x1New,i[d].bottom=f.x2New}}catch(t){h.e(t)}finally{h.f()}return i}(n.width,n.height,e),i=0;i<a.length;i++){var s=e[i].div,l=t._textDivProperties.get(s);if(0!==l.angle){for(var u=a[i],c=e[i],h=c.m,f=h[0],p=h[1],y=[[0,0],[0,c.size[1]],[c.size[0],0],c.size],g=new Float64Array(64),m=0,b=y.length;m<b;m++){var w=r.Util.applyTransform(y[m],h);g[m+0]=f&&(u.left-w[0])/f,g[m+4]=p&&(u.top-w[1])/p,g[m+8]=f&&(u.right-w[0])/f,g[m+12]=p&&(u.bottom-w[1])/p,g[m+16]=p&&(u.left-w[0])/-p,g[m+20]=f&&(u.top-w[1])/f,g[m+24]=p&&(u.right-w[0])/-p,g[m+28]=f&&(u.bottom-w[1])/f,g[m+32]=f&&(u.left-w[0])/-f,g[m+36]=p&&(u.top-w[1])/-p,g[m+40]=f&&(u.right-w[0])/-f,g[m+44]=p&&(u.bottom-w[1])/-p,g[m+48]=p&&(u.left-w[0])/p,g[m+52]=f&&(u.top-w[1])/-f,g[m+56]=p&&(u.right-w[0])/p,g[m+60]=f&&(u.bottom-w[1])/-f}var A=1+Math.min(Math.abs(f),Math.abs(p));l.paddingLeft=d(g,32,16)/A,l.paddingTop=d(g,48,16)/A,l.paddingRight=d(g,0,16)/A,l.paddingBottom=d(g,16,16)/A,t._textDivProperties.set(s,l)}else l.paddingLeft=e[i].left-a[i].left,l.paddingTop=e[i].top-a[i].top,l.paddingRight=a[i].right-e[i].right,l.paddingBottom=a[i].bottom-e[i].bottom,t._textDivProperties.set(s,l)}}function v(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));var n,r=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}],a=o(e);try{for(a.s();!(n=a.n()).done;){for(var i=n.value,s=0;s<r.length&&r[s].end<=i.y1;)s++;for(var l=r.length-1;l>=0&&r[l].start>=i.y2;)l--;var u=void 0,c=void 0,h=void 0,f=void 0,d=-1/0;for(h=s;h<=l;h++){c=(u=r[h]).boundary;var p=void 0;(p=c.x2>i.x1?c.index>i.index?c.x1New:i.x1:void 0===c.x2New?(c.x2+i.x1)/2:c.x2New)>d&&(d=p)}for(i.x1New=d,h=s;h<=l;h++)void 0===(c=(u=r[h]).boundary).x2New?c.x2>i.x1?c.index>i.index&&(c.x2New=c.x2):c.x2New=d:c.x2New>d&&(c.x2New=Math.max(d,c.x2));var v=[],y=null;for(h=s;h<=l;h++){var g=(c=(u=r[h]).boundary).x2>i.x2?c:i;y===g?v.at(-1).end=u.end:(v.push({start:u.start,end:u.end,boundary:g}),y=g)}for(r[s].start<i.y1&&(v[0].start=i.y1,v.unshift({start:r[s].start,end:i.y1,boundary:r[s].boundary})),i.y2<r[l].end&&(v.at(-1).end=i.y2,v.push({start:i.y2,end:r[l].end,boundary:r[l].boundary})),h=s;h<=l;h++)if(void 0===(c=(u=r[h]).boundary).x2New){var m=!1;for(f=s-1;!m&&f>=0&&r[f].start>=c.y1;f--)m=r[f].boundary===c;for(f=l+1;!m&&f<r.length&&r[f].end<=c.y2;f++)m=r[f].boundary===c;for(f=0;!m&&f<v.length;f++)m=v[f].boundary===c;m||(c.x2New=d)}Array.prototype.splice.apply(r,[s,l-s+1].concat(v))}}catch(t){a.e(t)}finally{a.f()}for(var b=0,w=r;b<w.length;b++){var A=w[b].boundary;void 0===A.x2New&&(A.x2New=Math.max(t,A.x2))}}var y=function(){function t(e){var n,i=this,o=e.textContent,s=e.textContentStream,l=e.container,u=e.viewport,c=e.textDivs,h=e.textContentItemsStr,f=e.enhanceTextSelection;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f&&(0,a.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=o,this._textContentStream=s,this._container=l,this._document=l.ownerDocument,this._viewport=u,this._textDivs=c||[],this._textContentItemsStr=h||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!(null===(n=globalThis.FontInspector)||void 0===n||!n.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally((function(){i._enhanceTextSelection||(i._textDivProperties=null),i._layoutTextCtx&&(i._layoutTextCtx.canvas.width=0,i._layoutTextCtx.canvas.height=0,i._layoutTextCtx=null)})).catch((function(){}))}var e,n,o;return e=t,n=[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((function(){})),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(t,e){for(var n=0,r=t.length;n<r;n++)if(void 0!==t[n].str)this._textContentItemsStr.push(t[n].str),h(this,t[n],e,this._layoutTextCtx);else if("beginMarkedContentProps"===t[n].type||"beginMarkedContent"===t[n].type){var a=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==t[n].id&&this._container.setAttribute("id","".concat(t[n].id)),a.append(this._container)}else"endMarkedContent"===t[n].type&&(this._container=this._container.parentNode)}},{key:"_layoutText",value:function(t){var e=this._textDivProperties.get(t),n="";if(0!==e.canvasWidth&&e.hasText){var r=t.style.fontFamily,a=e.fontSize;a===this._layoutTextLastFontSize&&r===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(a*this._devicePixelRatio,"px ").concat(r),this._layoutTextLastFontSize=a,this._layoutTextLastFontFamily=r);var i=this._layoutTextCtx.measureText(t.textContent).width;if(i>0){var o=this._devicePixelRatio*e.canvasWidth/i;this._enhanceTextSelection&&(e.scale=o),n="scaleX(".concat(o,")")}}if(0!==e.angle&&(n="rotate(".concat(e.angle,"deg) ").concat(n)),n.length>0&&(this._enhanceTextSelection&&(e.originalTransform=n),t.style.transform=n),e.hasText&&this._container.append(t),e.hasEOL){var s=document.createElement("br");s.setAttribute("role","presentation"),this._container.append(s)}}},{key:"_render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,r.createPromiseCapability)(),a=Object.create(null),i=this._document.createElement("canvas");if(i.height=i.width=l,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){var o=this._textContent.items,s=this._textContent.styles;this._processItems(o,s),n.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');var u=function e(){t._reader.read().then((function(r){var i=r.value;r.done?n.resolve():(Object.assign(a,i.styles),t._processItems(i.items,a),e())}),n.reject)};this._reader=this._textContentStream.getReader(),u()}n.promise.then((function(){a=null,e?t._renderTimer=setTimeout((function(){f(t),t._renderTimer=null}),e):f(t)}),this._capability.reject)}},{key:"expandTextDivs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(p(this),this._bounds=null);for(var e=[],n=[],r=0,a=this._textDivs.length;r<a;r++){var i=this._textDivs[r],o=this._textDivProperties.get(i);o.hasText&&(t?(e.length=0,n.length=0,o.originalTransform&&e.push(o.originalTransform),o.paddingTop>0?(n.push("".concat(o.paddingTop,"px")),e.push("translateY(".concat(-o.paddingTop,"px)"))):n.push(0),o.paddingRight>0?n.push("".concat(o.paddingRight/o.scale,"px")):n.push(0),o.paddingBottom>0?n.push("".concat(o.paddingBottom,"px")):n.push(0),o.paddingLeft>0?(n.push("".concat(o.paddingLeft/o.scale,"px")),e.push("translateX(".concat(-o.paddingLeft/o.scale,"px)"))):n.push(0),i.style.padding=n.join(" "),e.length&&(i.style.transform=e.join(" "))):(i.style.padding=null,i.style.transform=o.originalTransform))}}}}],n&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.TextLayerRenderTask=y},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;n(129);var r=n(1);n(3);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=i((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,r.unreachable)("Not implemented: SVGGraphics")}));e.SVGGraphics=o},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var a=n(1),i=n(157);function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&n.call(m,i)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(u.arg)}var i;this._invoke=function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return i=i?i.then(r,r):r()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new A(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,l,"next",t)}function l(t){s(i,r,a,o,l,"throw",t)}o(void 0)}))}}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,t),this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.getXhr=n.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return d(t,[{key:"requestRange",value:function(t,e,n){var r={begin:t,end:e};for(var a in n)r[a]=n[a];return this.request(r)}},{key:"requestFull",value:function(t){return this.request(t)}},{key:"request",value:function(t){var e=this.getXhr(),n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};for(var a in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var i=this.httpHeaders[a];void 0!==i&&e.setRequestHeader(a,i)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),r.expectedStatus=206):r.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}},{key:"onProgress",value:function(t,e){var n,r=this.pendingRequests[t];r&&(null===(n=r.onProgress)||void 0===n||n.call(r,e))}},{key:"onStateChange",value:function(t,e){var n=this.pendingRequests[t];if(n){var r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===r.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===r.status&&this.isHttp){var i;null===(i=n.onError)||void 0===i||i.call(n,r.status)}else{var o=r.status||200;if(200===o&&206===n.expectedStatus||o===n.expectedStatus){var s=function(t){var e=t.response;return"string"!=typeof e?e:(0,a.stringToBytes)(e).buffer}(r);if(206===o){var l=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);n.onDone({begin:parseInt(u[1],10),chunk:s})}else if(s)n.onDone({begin:0,chunk:s});else{var c;null===(c=n.onError)||void 0===c||c.call(n,r.status)}}else{var h;null===(h=n.onError)||void 0===h||h.call(n,r.status)}}}}},{key:"getRequestXhr",value:function(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function(t){return t in this.pendingRequests}},{key:"abortRequest",value:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}]),t}(),v=function(){function t(e){h(this,t),this._source=e,this._manager=new p(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return d(t,[{key:"_onRangeRequestReaderClosed",value:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var n=new g(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,r=u(this._rangeRequestReaders.slice(0));try{for(r.s();!(n=r.n()).done;){n.value.cancel(t)}}catch(t){r.e(t)}finally{r.f()}}}]),t}();e.PDFNetworkStream=v;var y=function(){function t(e,n){h(this,t),this._manager=e;var r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=(0,a.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var e;return d(t,[{key:"_onHeadersReceived",value:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=function(t){return e.getResponseHeader(t)},r=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),a=r.allowRangeRequests,o=r.suggestedLength;a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk));if(this._done=!0,!(this._cachedChunks.length>0)){var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}}},{key:"_onError",value:function(t){this._storedError=(0,i.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.reject(this._storedError)}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(e=l(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){t.next=5;break}return e=this._cachedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 5:if(!this._done){t.next=7;break}return t.abrupt("return",{value:void 0,done:!0});case 7:return n=(0,a.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._headersReceivedCapability.reject(t);var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),t}(),g=function(){function t(e,n,r){h(this,t),this._manager=e;var a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(n,r,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}var e;return d(t,[{key:"_close",value:function(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e;this._done=!0;var n,r=u(this._requests);try{for(r.s();!(n=r.n()).done;){n.value.resolve({value:void 0,done:!0})}}catch(t){r.e(t)}finally{r.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.reject(this._storedError)}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(e=l(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){t.next=6;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 6:if(!this._done){t.next=8;break}return t.abrupt("return",{value:void 0,done:!0});case 8:return n=(0,a.createPromiseCapability)(),this._requests.push(n),t.abrupt("return",n.promise);case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=u(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),t}()},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){if(404===t||0===t&&e.startsWith("file:"))return new r.MissingPDFException('Missing PDF "'+e+'".');return new r.UnexpectedResponseException("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t)},e.extractFilenameFromHeader=function(t){var e=t("Content-Disposition");if(e){var n=(0,a.getFilenameFromContentDispositionHeader)(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch(t){}if((0,i.isPdfFile)(n))return n}return null},e.validateRangeRequestCapabilities=function(t){var e=t.getResponseHeader,n=t.isHttp,r=t.rangeChunkSize,a=t.disableRange,i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e("Content-Length"),10);if(!Number.isInteger(o))return i;if(i.suggestedLength=o,o<=2*r)return i;if(a||!n)return i;if("bytes"!==e("Accept-Ranges"))return i;if("identity"!==(e("Content-Encoding")||"identity"))return i;return i.allowRangeRequests=!0,i},e.validateResponseStatus=function(t){return 200===t||206===t};var r=n(1),a=n(158),i=n(129)},(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){var e=!0,n=s("filename\\*","i").exec(t);if(n){var i=c(n=n[1]);return u(i=f(i=h(i=unescape(i))))}if(n=function(t){var e,n=[],r=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(e=r.exec(t));){var i=a(e,4),o=i[1],l=i[2],u=i[3];if((o=parseInt(o,10))in n){if(0===o)break}else n[o]=[l,u]}for(var f=[],d=0;d<n.length&&d in n;++d){var p=a(n[d],2),v=p[0],y=p[1];y=c(y),v&&(y=unescape(y),0===d&&(y=h(y))),f.push(y)}return f.join("")}(t)){return u(f(n))}if(n=s("filename","i").exec(t)){var o=c(n=n[1]);return u(o=f(o))}function s(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function l(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var a=new TextDecoder(t,{fatal:!0}),i=(0,r.stringToBytes)(n);n=a.decode(i),e=!1}catch(t){}}return n}function u(t){return e&&/[\x80-\xff]/.test(t)&&(t=l("utf-8",t),e&&(t=l("iso-8859-1",t))),t}function c(t){if(t.startsWith('"')){for(var e=t.slice(1).split('\\"'),n=0;n<e.length;++n){var r=e[n].indexOf('"');-1!==r&&(e[n]=e[n].slice(0,r),e.length=n+1),e[n]=e[n].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function h(t){var e=t.indexOf("'");return-1===e?t:l(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function f(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,n,r){if("q"===n||"Q"===n)return l(e,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{r=atob(r)}catch(t){}return l(e,r)}))}return""};var r=n(1);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var a=n(1),i=n(157);function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function p(){}function v(){}var y={};u(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&n.call(m,i)&&(y=m);var b=v.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function a(i,o,s,l){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return a("throw",t,s,l)}))}l(u.arg)}var i;this._invoke=function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return i=i?i.then(r,r):r()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,u(b,"constructor",v),u(v,"constructor",p),p.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new A(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,l,"next",t)}function l(t){s(i,r,a,o,l,"throw",t)}o(void 0)}))}}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e,n){return{method:"GET",headers:t,signal:null==n?void 0:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function v(t){var e=new Headers;for(var n in t){var r=t[n];void 0!==r&&e.append(n,r)}return e}var y=function(){function t(e){h(this,t),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return d(t,[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new g(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new m(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);var e,n=u(this._rangeRequestReaders.slice(0));try{for(n.s();!(e=n.n()).done;){e.value.cancel(t)}}catch(t){n.e(t)}finally{n.f()}}}]),t}();e.PDFFetchStream=y;var g=function(){function t(e){var n=this;h(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var r=e.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=(0,a.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._headers=v(this._stream.httpHeaders);var o=r.url;fetch(o,p(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,o);n._reader=t.body.getReader(),n._headersCapability.resolve();var e=function(e){return t.headers.get(e)},r=(0,i.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=r.allowRangeRequests,l=r.suggestedLength;n._isRangeSupported=s,n._contentLength=l||n._contentLength,n._filename=(0,i.extractFilenameFromHeader)(e),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new a.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}var e;return d(t,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(e=l(o().mark((function t(){var e,n,r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._headersCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,n=e.value,!(r=e.done)){t.next=9;break}return t.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),a=new Uint8Array(n).buffer,t.abrupt("return",{value:a,done:!1});case 13:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),t}(),m=function(){function t(e,n,r){var o=this;h(this,t),this._stream=e,this._reader=null,this._loaded=0;var s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=v(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(n,"-").concat(r-1));var l=s.url;fetch(l,p(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,i.validateResponseStatus)(t.status))throw(0,i.createResponseStatusError)(t.status,l);o._readCapability.resolve(),o._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}var e;return d(t,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(e=l(o().mark((function t(){var e,n,r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,n=e.value,!(r=e.done)){t.next=9;break}return t.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),a=new Uint8Array(n).buffer,t.abrupt("return",{value:a,done:!1});case 13:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}]),t}()}],e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}var r={};return(()=>{"use strict";var t=r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return l.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return u.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return f.XfaLayer}}),Object.defineProperty(t,"binarySearchFirstItem",{enumerable:!0,get:function(){return a.binarySearchFirstItem}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}});var e=n(1),a=n(129),i=n(131),o=n(146),s=n(134),l=n(151),u=n(140),c=(n(3),n(154)),h=n(155),f=n(153),d=n(156).PDFNetworkStream,p=n(159).PDFFetchStream;(0,i.setPDFNetworkStreamFactory)((function(t){return(0,a.isValidFetchUrl)(t.url)?new p(t):new d(t)}))})(),r})()));