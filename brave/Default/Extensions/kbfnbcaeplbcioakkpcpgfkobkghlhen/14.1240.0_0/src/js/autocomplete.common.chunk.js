(self.webpackChunk=self.webpackChunk||[]).push([[6413],{50292:(t,e,o)=>{var i=o(56518),r="chrome-extension://__MSG_@@extension_id__/",n="moz-extension://__MSG_@@extension_id__/",s="safari-web-extension://__MSG_@@extension_id__/",l=self.GR_RESOURCE_ROOT||r,a=self.GR_RESOURCE_ROOT||n,c=self.GR_RESOURCE_ROOT||s;t.exports={__css:i.toString().replace(new RegExp(r,"g"),l).replace(new RegExp(n,"g"),a).replace(new RegExp(s,"g"),c),...i.locals}},33487:(t,e,o)=>{var i;o.d(e,{i:()=>i}),function(t){t.textChange="textChange",t.reset="reset",t.alertAccepted="alertAccepted",t.alertUpdate="alertUpdate",t.capiRemove="capiRemove",t.ignore="ignore"}(i||(i={}))},26337:(t,e,o)=>{o.r(e),o.d(e,{AutocompleteFeature:()=>yt});var i=o(44071),r=o(91089),n=o(10883),s=o(78129),l=o(90572),a=o(59179),c=o(13391),h=o(60774),d=o(78542),u=o(38437),p=o(89136);class f{constructor(t,e,o,u,f,m){this._mode=t,this._textField=e,this._textObserver=o,this._caretService=u,this._service=f,this._log=d.Y.create("AutocompleteGmailAdhoc"),this._competingSuggestion=c.h.create(null),this._subs=[this._service.suggestionBehavior.subscribe((t=>{var e,o;if(this._mode.get()===p.mv.disabled)return;const i=this._caretService.getCaretPos();if(null===i)return this._competingSuggestion.set(null);const r=null===(e=this._textObserver.getCurrentTextMap().getFragmentAtOrBeforeOffset(i))||void 0===e?void 0:e.node.parentElement;if(!r)return this._log.error(`Failed to find a parent element of the text node at position ${i}`);const n=r.querySelector('span[contenteditable="false"]'),s=null===(o=null==n?void 0:n.querySelector("span"))||void 0===o?void 0:o.innerText,l=t&&this._modelProxy.model.getAlertById(t.alertId);if(t&&!l)return this._log.error(`Failed to find ${t.alertSource} alert #${t.alertId} for display`);if(!n||!s)return(null==l?void 0:l.source)===p.w.external&&l.state===p.PU.preferred&&this._modelProxy.model.updateAlertState(l.id,{state:p.PU.initial}),this._competingSuggestion.set(null);this._competingSuggestion.set(s);const a=this._modelProxy.checkForDuplicateAlert(i,s);(null==l?void 0:l.source)===p.w.external?(n.style.display="initial",a&&a.id===l.id||this._modelProxy.updateAlertCompletion(l.id,i,s),l.state!==p.PU.suggested&&this._modelProxy.model.updateAlertState(l.id,{state:p.PU.suggested,suggestion:s})):(n.style.display="none",a||this._mode.get()===p.mv.enabledSolitary||this._modelProxy.addAlert(i,s,this._mode.get()===p.mv.benchmarking||!this._caretService.isEligible(i)||this._textBeforeCompletionIsSalutation(i,s)))})),this._service.suggestionBehavior.pipe((0,n.M)(this._competingSuggestion),(0,s.G)(),(0,l.h)((([t,e])=>{var o,i;return(null===(o=t[0])||void 0===o?void 0:o.alertSource)===p.w.external&&(null===(i=e[0])||void 0===i?void 0:i.alertSource)!==p.w.external})),(0,a.U)((([t,e])=>t))).subscribe((([t,e])=>{if(null===e)return this._log.warn("Can't update alert state to ignored - suggestion text is equal to null");const o=this._modelProxy.model.getAlertById(t.alertId);(null==o?void 0:o.state)===p.PU.suggested&&this._modelProxy.model.updateAlertState(o.id,{state:p.PU.ignored,suggestion:e})})),(this._textField.ownerDocument?(0,i.R)(this._textField.ownerDocument,"keydown",{capture:!0}):r.C).pipe((0,n.M)(this._service.suggestionBehavior)).subscribe((([t,e])=>{const o=this._competingSuggestion.get();if(this._mode.get()===p.mv.disabled||!o)return;const i=!(t.keyCode!==h.VD.Tab&&t.keyCode!==h.VD.RightArrow||t.altKey||t.ctrlKey||t.shiftKey||t.metaKey);!i&&t.keyCode!==h.VD.Escape||e&&e.alertSource===p.w.external?i&&(null==e?void 0:e.alertSource)===p.w.external?this._modelProxy.model.updateAlertState(e.alertId,{state:p.PU.applied,suggestion:o}):t.keyCode===h.VD.Escape&&(null==e?void 0:e.alertSource)===p.w.external&&this._modelProxy.model.updateAlertState(e.alertId,{state:p.PU.discarded,suggestion:o}):(t.preventDefault(),t.stopPropagation())}))],this._modelProxy=new g(this._textObserver,m)}_textBeforeCompletionIsSalutation(t,e){const o=this._textObserver.getCurrentTextMap().getPlainText().slice(0,t)+e;return void 0!==["Hi","Hey","Hello","Dear"].find((t=>o.startsWith(t)))}dispose(){this._subs.forEach((t=>t.unsubscribe()))}}class g{constructor(t,e){this._textObserver=t,this.model=e,this._log=d.Y.create("AutocompleteModelGmailProxy")}checkForDuplicateAlert(t,e){const o=this._textObserver.getCurrentTextMap().getPlainText();for(const i of this.model.getAll())if(i.source===p.w.external&&i.transformRange.end<=t&&i.transformRange.end+i.longestCompletion>t){const r=o.slice(i.transformRange.end,t)+e;if(i.completions.some((t=>t.text===r)))return i}return null}updateAlertCompletion(t,e,o){const i=this.model.getAlertById(t);if(!i||i.source!==p.w.external||i.state===p.PU.initial){const e=i?`has unsuitable alert source ${i.source} or state ${i.state}`:"does not exist";return this._log.error(`Can't update alert #${t} - ${e}`)}const r=this._textObserver.getCurrentTextMap().getPlainText().slice(i.transformRange.end,e);if(r.length!==e-i.transformRange.end)return this._log.error(`Request to change alert #${t} and actual text are out of sync`);const n={id:p.iH.getNextCompletionId(),text:r+o,patternName:"unknown",confidenceCurve:[[0,0],[e-i.transformRange.end,1]]};this.model.updateAlert({...i,completions:[n,...i.completions],completion:n})}addAlert(t,e,o=!1){const i=this._textObserver.getCurrentTextMap().getPlainText(),r=Math.max(0,t-5),n=i.slice(r,t),s={start:r,end:t};if(!o&&e.length<5)return;const l={text:n+e,patternName:"unknown",textBegin:s.start,prefixBegin:s.start,prefixEnd:s.end,textEnd:s.end+e.length,confidence:1,confidenceCurve:{}};p.iH.create({threshold:1,completions:[l]},p.w.external,u._.createWithRandomId("gmail"),null,o?0:3).forEach((t=>this.model.addAlert(t)))}}var m=o(64271),_=o(954);class v{constructor(t,e,o,s){this._mode=t,this._textField=e,this._textObserver=o,this._caretService=s,this._suggestionSelector="span.suggestedCompletion",this._styleElement=this._textField.ownerDocument.createElement("style"),this._hasCompetingSuggestion=this._textObserver.contentChanges.async.pipe((0,a.U)((t=>{if(this._mode.get()===p.mv.disabled)return!1;if(null===this._caretService.getCaretPos())return!1;const e=this._textField.querySelector(this._suggestionSelector);return e&&"none"!==e.style.display&&(e.style.display="none",e.textContent=""),!!e})),(0,_.O)(!1)),this._subs=[this._mode.subscribe((t=>{this._styleElement.innerHTML=t===p.mv.disabled?"":`${this._suggestionSelector}{display: none !important;}`})),(this._textField.ownerDocument?(0,m.T)((0,i.R)(this._textField.ownerDocument,"keyup",{capture:!0}),(0,i.R)(this._textField.ownerDocument,"keydown",{capture:!0})):r.C).pipe((0,n.M)(this._mode,this._hasCompetingSuggestion)).subscribe((([t,e,o])=>{if(e===p.mv.disabled||!o)return;(!(t.keyCode!==h.VD.Tab&&t.keyCode!==h.VD.RightArrow||t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)||t.keyCode===h.VD.Escape)&&(t.preventDefault(),t.stopPropagation())}))],this._textField.ownerDocument.head.appendChild(this._styleElement)}dispose(){this._subs.forEach((t=>t.unsubscribe())),this._styleElement.remove()}}var b=o(74822),x=o(24666);class w{constructor(t,e,o){this._mode=t,this._disableFeature=e,this._openFeedbackForm=o,this._hovered=new b.x,this.onHover=t=>this._hovered.next(t),this._dismissed=new b.x,this.onDismiss=t=>this._dismissed.next(t),this.cardHovered=this._hovered.pipe((0,_.O)(!1),(0,x.x)()),this.cardDismissed=this._dismissed.pipe((0,x.x)()),this.isDisabled=this._mode.view((t=>t===p.mv.disabled)),this.onDisable=()=>{this._disableFeature()},this.onFeedback=(t,e)=>{this._openFeedbackForm(t,e),this.onDismiss(null)}}}var y=o(49231),E=o(84308),P=o(25731),S=o(47084);class C{constructor(t,e,o){this._textField=t,this._controller=e,this._hoverProvider=o,this.view=(0,E.a)(this._hoverProvider.hoveredBehavior,this._hoverProvider.anchorRect,this._controller.isDisabled).pipe((0,a.U)((([t,e,o])=>t&&e?y.createElement(P.W,{anchorRect:e,anchorMargin:{bottom:5,top:5},onHover:this._controller.onHover,onClickAway:this._controller.onDismiss,partName:"autocomplete-card",fieldOwnerDoc:this._textField.ownerDocument||void 0,style:{minWidth:"initial"}},o?y.createElement(R,null):y.createElement(A,{onDisable:this._controller.onDisable,onFeedback:()=>this._controller.onFeedback(t.alertId,t.text)})):null)))}}const A=t=>y.createElement("div",{className:S.menu},y.createElement("div",{className:S.item,onClick:t.onFeedback},"Feedback"),y.createElement("div",{className:S.item,onClick:t.onDisable,"data-grammarly-part":"completion-disable"},"Disable")),R=()=>y.createElement("div",{className:S.disable},y.createElement("div",{className:S.heading},"Phrasal predictions disabled."),y.createElement("div",{className:S.text},"To re-enable go to Grammarly menu in the browser toolbar."));var k=o(90023),F=o(58303),O=o(68818),U=o(63524);class M{constructor(t,e){this._textObserver=t,this._selectionService=e,this._log=d.Y.create("AutocompleteCaretService")}_getCaretPos(){return(0,k.zG)(F.ij((0,k.zG)(this._selectionService.getCurrentSelection(),U.Ey)),F.hX(O.SV.isCollapsed),F.UI((t=>t.start)),F.WG)}_isEligible(t){const e=this._textObserver.getCurrentTextMap().getPlainText();if(t<0||t>e.length)return this._log.warn(`Received unexpected value for caret position {${t}}`),!1;const o=/^[ \t]*/g,i=e.slice(t).replace(o,"");if(!i)return!0;if("\n"!==i[0])return!1;const r=i.slice(1).replace(o,"");return!r||"\n"===r[0]}getCaretPos(){return this._getCaretPos()}isEligible(t){return this._isEligible(t)}getCaretPosIfEligible(){const t=this._getCaretPos();return t&&this._isEligible(t)?t:null}}var N=o(71232);class D{constructor(t,e,o,i,r,n,s){this._mode=t,this._textObserver=e,this._textRevisionManager=o,this._rpcClient=i,this._caretService=r,this._model=n,this._clientPhrasalCompletionsEnabled=s,this._uidPrefix=u._.createWithRandomId("autocomplete"),this._nextRevision=0,this._subs=[this._textObserver.contentChanges.async.subscribe((async({changes:t,newText:e})=>{if(!p.mv.nativeEnabled(this._mode.get())||!this._rpcClient.hasValue)return;if(1!==t.length||!N.q.isIns(t[0]))return;const o=this._caretService.getCaretPosIfEligible();if(null===o)return;this._nextRevision+=1,this._textRevisionManager.tagLatestRevision(u.Q.create(this._uidPrefix,this._nextRevision));const i=e.slice(0,o),r=await this._rpcClient.get().autocomplete(i);if(r){const{threshold:t,...e}=r;p.iH.create({completions:[{...e,confidenceCurve:{}}],threshold:t},p.w.client,this._uidPrefix,this._nextRevision).forEach((t=>this._model.addAlert(t)))}if(this._clientPhrasalCompletionsEnabled()){const t=await this._rpcClient.get().autocompletePhrase(i);if(t){const{threshold:e,...o}=t;p.iH.create({completions:[{...o,confidenceCurve:{}}],threshold:e},p.w.client,this._uidPrefix,this._nextRevision).forEach((t=>this._model.addAlert(t)))}}}))]}dispose(){this._subs.forEach((t=>t.unsubscribe()))}}var T,z=o(36344),I=o(62552),H=o(9642),$=o(93790),B=o(27853),L=o(7221),V=o(5270);!function(t){t.isNative=function(t){return p.w.isNative(t.alertSource)}}(T||(T={}));class j{constructor(t,e,o,r,n,s,c){this._mode=t,this._textField=e,this._textObserver=o,this._geometryLayout=r,this._geometryProvider=n,this._caretService=s,this._model=c,this._log=d.Y.create("AutocompleteService"),this.suggestionBehavior=(0,m.T)(this._textObserver.contentChanges.async,this._textField.ownerDocument?(0,i.R)(this._textField.ownerDocument,"selectionchange"):z.E,this._model.changes.pipe((0,l.h)((t=>t.addedAlerts.length>0||t.updatedAlerts.some((t=>t.state===p.PU.discarded)))))).pipe((0,a.U)((t=>{var e,o,i;if(this._mode.get()===p.mv.disabled)return null;const r=this._caretService.getCaretPos();if(null===r)return null;const n=this._textObserver.getCurrentTextMap(),s=n.getPlainText().slice(0,r),l=this._getCompletion(r,s);if(!l)return null;const[a,c,h]=l;if(a.source===p.w.external)return a.state===p.PU.initial&&this._model.updateAlertState(a.id,{state:p.PU.preferred,completion:c}),{alertId:a.id,alertSource:a.source};if(!this._caretService.isEligible(r))return null;const d=null===(e=n.getFragmentAtOrBeforeOffset(r))||void 0===e?void 0:e.node.parentElement;if(!d)return this._log.error(`Failed to find a parent element of the text node at position ${r}`),null;const u={start:r-1,end:r},f=this._geometryProvider.create(u,n),g=Boolean(f)&&this._geometryProvider.getClientRects(f),m=g&&this._geometryLayout.getApproximateConversionContext(),_=g&&m&&Array.from(g).map((t=>B.UL.setPosition(m.clientToRelative(t),t)));if(!g||!_||!_[0])return this._log.error(`Failed to get bounding rectangle for the caret at position ${r}`),null;const v=g[0],b=_[0];if((0,L.pZ)()&&(0,V.FD)(s[u.start])&&0===b.width){const t=4,e=s.slice(0,-1).indexOf(s[u.start]);let o=t;if(-1!==e){const t=this._geometryProvider.create({start:e,end:e+1},n),i=this._geometryProvider.getClientRects(t);i&&i.length&&i[0].width&&(o=i[0].width)}[b,v].forEach((t=>t.width=o))}const x=null===(i=null===(o=d.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===i?void 0:i.getComputedStyle(d);return x?((a.state===p.PU.initial||a.state===p.PU.ignored&&a.completion.text!==c.text)&&this._model.updateAlertState(a.id,{state:p.PU.preferred,completion:c}),{alertId:a.id,alertSource:a.source,clientRect:v,offsetRect:b,text:c.text.slice(h),styles:{font:x.font,fontFamily:x.fontFamily,fontStyle:x.fontStyle,fontVariant:x.fontVariant,fontWeight:x.fontWeight,fontStretch:x.fontStretch,fontKerning:x.fontKerning,fontSize:x.fontSize,fontSizeAdjust:x.fontSizeAdjust,lineHeight:x.lineHeight,letterSpacing:x.letterSpacing,wordSpacing:x.wordSpacing,textTransform:x.textTransform}}):(this._log.error(`Failed to get computed styles for the text node at position ${r}`),null)})),(0,H.O)(new I.X(null)),(0,$.x)())}_getCompletion(t,e){const o=[];for(const e of this._model.getAll()){const i=e.state===p.PU.initial?e.transformRange.end+e.longestCompletion:e.transformRange.end+e.completion.text.length;if(e.state===p.PU.applied&&i===t)return null;const r=e.transformRange.end<=t&&i>t;if(r&&e.state===p.PU.discarded)return null;r&&o.push(e)}const i=(t,e,o)=>{const i=e.filter((t=>t.text.startsWith(o)&&t.text.length>o.length)).map((t=>[t,p.iH.getConfidenceAt(t,o.length)])).filter((e=>e[1]>=t));return i.length>0?i.reduce(((t,e)=>e[1]>t[1]?e:t)):null},r=t=>{const e=t.completion.text.slice(t.completionPosition+1),[o]=e.split(" ");return t.transformRange.end+t.completionPosition+1+o.length},n=[];for(const s of o){const o=e.slice(s.transformRange.end),l=o.length;if(s.state===p.PU.preferred||s.state===p.PU.suggested||s.state===p.PU.applied||s.state===p.PU.ignored&&r(s)>=t){const t=i(s.threshold,[s.completion],o);return t?[s,t[0],l]:null}{const t=i(s.threshold,s.completions,o);t&&n.push([s,t[0],t[1],l])}}if(0===n.length)return null;const s=n.filter((([t,e])=>t.source===p.w.default||t.source===p.w.client&&e.patternName.includes("Sentence"))),l=(s.length>0?s:n).reduce(((t,e)=>e[2]>t[2]?e:t));return l[1].text.slice(l[3]).length<4?null:[l[0],l[1],l[3]]}}class W{constructor(t,e,o,r,a,c,u,f=(t.ownerDocument?(0,i.R)(t.ownerDocument,"keydown",{capture:!0}):z.E)){this._selectionService=e,this._replacementService=o,this._model=r,this._service=a,this._showOnboardingHint=c,this._onOnboardingHintShown=u,this._keyDown=f,this._log=d.Y.create("AutocompleteController"),this._subs=[this._keyDown.pipe((0,n.M)(this._service.suggestionBehavior),(0,l.h)((t=>null!==t[1]&&T.isNative(t[1])))).subscribe((([t,e])=>{t.keyCode!==h.VD.Tab&&t.keyCode!==h.VD.RightArrow||t.altKey||t.ctrlKey||t.shiftKey||t.metaKey?t.keyCode===h.VD.Escape&&this._handleRejectEvent(t,e):this._handleAcceptEvent(t,e)})),this._service.suggestionBehavior.pipe((0,l.h)((t=>null===t||T.isNative(t))),(0,s.G)(),(0,l.h)((t=>!!t[0]!=!!t[1]))).subscribe((t=>{const e=t[0]||t[1],o=!t[1],i=this._model.getAlertById(e.alertId);if(!i){const t=o?"was shown moments ago":"should be shown";return this._log.warn(`Failed to find alert #${e.alertId} that ${t}`)}o&&i.state===p.PU.suggested?this._model.updateAlertState(i.id,{state:p.PU.ignored,suggestion:e.text}):o||i.state===p.PU.suggested||this._model.updateAlertState(i.id,{state:p.PU.suggested,suggestion:e.text})})),...this._showOnboardingHint.get()?[this._model.alertStateUpdate.pipe((0,l.h)((t=>p.w.isNative(t.alert.source)&&t.alert.state===p.PU.suggested)),(0,n.M)(this._showOnboardingHint)).subscribe((([t,e])=>e&&this._onOnboardingHintShown()))]:[]]}async _handleAcceptEvent(t,e){t.stopPropagation(),t.preventDefault();const o=(0,k.zG)(this._selectionService.getCurrentSelection(),U.Ey);if(!o)return this._log.error(`Failed to perform a replacement for alert ${e.alertId} - selection service didn't find TextRange`);this._model.updateAlertState(e.alertId,{state:p.PU.applied,suggestion:e.text})||this._log.error(`Failed to update #${e.alertId} with {${p.PU.applied}} state, still trying to apply suggestion`);try{await this._replacementService.performReplacement({pos:o,value:e.text})}catch(t){return this._log.error(`Failed to perform a replacement for alert ${e.alertId}`,t)}}_handleRejectEvent(t,e){this._model.updateAlertState(e.alertId,{state:p.PU.discarded,suggestion:e.text})||this._log.error(`Failed to update #${e.alertId} with {${p.PU.discarded}} state`),t.stopPropagation(),t.preventDefault()}dispose(){this._subs.forEach((t=>t.unsubscribe()))}}var G=o(20161);class Y{constructor(t,e,o,r=(t.ownerDocument?(0,i.R)(t.ownerDocument,"keydown",{capture:!0}):z.E)){this._textField=t,this._autocompleteModel=e,this._gnar=o,this._keyDown=r,this._log=d.Y.create("AutocompleteFeedbackFormController"),this.model=c.h.create(null),this.close=t=>{this.model.set(null),this._gnar.autocompleteFeedbackFormCloseButtonClick(t)},this.submit=(t,e,o)=>{const i=this.model.get();if(!i)return this._log.error("Failed to submit form feedback - empty state");const{alertId:r,suggestion:n}=i;this._autocompleteModel.updateAlertState(r,{state:p.PU.discarded,suggestion:n,reason:t}),this.model.set(null),this._gnar.autocompleteFeedbackFormSubmitButtonClick(r,t,e,o)},this._subs=[this.model.pipe((0,G.w)((t=>t?this._keyDown:z.E))).subscribe((t=>t.stopPropagation()))]}open(t,e){const o=this._autocompleteModel.getAlertById(t);if(!o||!p.iH.isInteractive(o)){const e=o?`has improper state {${o.state}}`:"not found";return this._log.error(`Failed to open feedback form for alert #${t} - ${e}`)}const i=o.completion.text;if(!i.endsWith(e))return this._log.error(`Failed to open feedback form for alert #${t} - found inconsistency between completion {${i}} and suggestion {${e}} texts`);const r=i.slice(1,-e.length),n=o.context+r;this.model.set({alertId:t,suggestion:e,context:n}),this._textField.blur()}dispose(){this._subs.forEach((t=>t.unsubscribe()))}}var q=o(37213),K=o(9358),X=o(1629),J=o(10658),Q=o(11906);class Z{constructor(t){this._controller=t,this.view=this._controller.model.view((t=>t&&y.createElement(et,{onSumbit:this._controller.submit,onClose:this._controller.close,contextText:t.context,suggestionText:t.suggestion})))}}const tt=[["NOT_RELEVANT","Not relevant in the context of the email"],["WRONG_TONE","Not matching my style or tone"],["INCORRECT","Factually incorrect"],["WRONG_GRAMMAR","Wrong grammar or spelling"],["OFFENSIVE","Offensive or inappropriate"],["OTHER","Other"]];const et=t=>{const[e,o]=y.useState(null),[i,r]=y.useState(null);return y.createElement(J.o,{className:Q.container,style:{zIndex:K.oJ}},y.createElement("div",{className:Q.box},y.createElement("div",{className:Q.close,onClick:()=>t.onClose("topRight")}),y.createElement("div",{className:Q.form},y.createElement("div",{className:Q.heading},"Feedback"),y.createElement("div",{className:Q.explanation},"Select an issue from the list below to submit feedback."),y.createElement("div",{className:Q.section},y.createElement("div",{className:Q.subheading},"Recent suggestion"),y.createElement("div",{className:Q.subject},y.createElement("span",null,"“",t.contextText),y.createElement("span",{className:Q.suggestion},t.suggestionText,"”"))),y.createElement("div",{className:Q.section},y.createElement("div",{className:Q.subheading},"Issue"),y.createElement("div",{className:Q.optionGroup},tt.map((([t,i])=>y.createElement("div",{key:t,...(0,q.Sh)(Q.option,e===t&&Q.checked),onClick:()=>o(t)},i))))),y.createElement(X.z,{onChange:t=>r(t),ariaLabel:"Tell us a bit more...",placeholder:"Tell us a bit more...",className:Q.textfield})),y.createElement("div",{className:Q.footer},y.createElement("div",{...(0,q.Sh)(Q.button,Q.secondary),onClick:()=>t.onClose("footer")},"Cancel"),y.createElement("div",{...(0,q.Sh)(Q.button,Q.primary,!e&&Q.disable),onClick:()=>{return e&&t.onSumbit(e,(o=e,tt.filter((t=>t[0]===o))[0][1]),null!=i?i:void 0);var o}},"Submit"))))};var ot=o(84714),it=o(29479),rt=o(63532),nt=o(29416);class st{constructor(t,e,o,r,n){this._textField=t,this._textFieldLayout=e,this._cardController=o,this._suggestionController=r,this._suggestionBehavior=n,this._offByScrollChange=(0,m.T)(this._textFieldLayout.scroll.changes,this._textField.ownerDocument?(0,i.R)(this._textField.ownerDocument,"scroll"):z.E).pipe((0,it.h)(null)),this._hoverDelayMs=200,this._hovered=(0,m.T)(this._offByScrollChange,this._cardController.cardDismissed).pipe((0,_.O)(null),(0,G.w)((t=>(0,E.a)(this._suggestionController.rawHoveredSuggestion.pipe((0,rt.b)((t=>t&&this.anchorRect.set(t))),(0,a.U)((t=>!!t))),this._cardController.cardHovered).pipe((0,a.U)((([t,e])=>t||e)),(0,x.x)(),(0,nt.b)(this._hoverDelayMs),(0,x.x)(),(0,_.O)(!1))))),this.anchorRect=c.h.create(null),this.hoveredBehavior=this._suggestionBehavior.pipe((0,l.h)((t=>null===t||T.isNative(t))),(0,x.x)(((t,e)=>t&&e?t.alertId===e.alertId&&t.text===e.text:t===e)),(0,G.w)((t=>null===t?(0,ot.of)(null):this._hovered.pipe((0,a.U)((e=>e?{alertId:t.alertId,text:t.text}:null))))),(0,H.O)(new I.X(null)),(0,$.x)())}}var lt=o(32734),at=o(6304),ct=o(33487),ht=o(97472);class dt{constructor(t){this._alertProcessor=t,this._log=d.Y.create("AutocompleteModel"),this._alertsBufferLimit=40,this._alertsBuffer=new at.P(this._alertsBufferLimit),this._alertStateUpdateSubject=new b.x,this.alertStateUpdate=this._alertStateUpdateSubject.asObservable(),this.changes=this._alertProcessor.alerts.changes.pipe((0,l.h)((t=>[t.addedAlerts,t.removedAlerts.map((t=>t.alert)),t.updatedAlerts].some((t=>t.some((t=>ht.S.isAutocompleteAlert(t))))))),(0,a.U)((t=>({addedAlerts:t.addedAlerts.filter(ht.S.isAutocompleteAlert),updatedAlerts:t.updatedAlerts.filter(ht.S.isAutocompleteAlert),removedAlerts:t.removedAlerts.filter((t=>ht.S.isAutocompleteAlert(t.alert)))}))),(0,lt.B)()),this._subs=[this.changes.subscribe((t=>{t.removedAlerts.forEach((t=>{this._alertsBuffer.delete(t.id)||this._log.warn(`Failed to delete autocomplete alert #${t.id} from the circular buffer on alert removal`,t.reason)}))}))]}_addAlert(t){const e=this._alertsBuffer.enqueue(t.id);return e&&this._alertProcessor.removeAlert(e,{_tag:ct.i.alertAccepted}),this._alertProcessor.addAlert(t)}addAlert(t){return this._addAlert(t)}updateAlert(t){this._alertsBuffer.delete(t.id)||this._log.warn(`Failed to delete autocomplete alert #${t.id} from the circular buffer while updating it, alert may not exist`),this._addAlert(t)}updateAlertState(t,e){const o=this._alertProcessor.alerts.getAlertById(t);if(!o||o._tag!==ht.b.autocomplete){const e=o?`has unexpected alert type {${o._tag}}`:"doesn't exist";return this._log.error(`Can't update alert #${t} - ${e}`),!1}if([[p.PU.initial,p.PU.preferred],[p.PU.preferred,p.PU.initial],[p.PU.preferred,p.PU.suggested],[p.PU.suggested,p.PU.ignored],[p.PU.ignored,p.PU.suggested],[p.PU.ignored,p.PU.preferred],[p.PU.ignored,p.PU.discarded],[p.PU.suggested,p.PU.applied],[p.PU.suggested,p.PU.discarded],[p.PU.applied,p.PU.suggested]].some((([t,i])=>t===o.state&&i===e.state))){if(this._alertsBuffer.delete(o.id)||this._log.warn(`Failed to delete autocomplete alert #${o.id} from the circular buffer while updating its state`),e.state===p.PU.initial||e.state===p.PU.preferred)this._addAlert({...o,...e});else if(e.state===p.PU.suggested||e.state===p.PU.ignored||e.state===p.PU.applied){const{suggestion:t,...i}=e;if(!("completion"in o)||!o.completion.text.endsWith(t)){const e="completion"in o?`completion text {${o.completion.text}} and suggestion {${t}} mismatch`:"completion field does not exist";return this._log.error(`Can't update alert #${o.id} - ${e}`),!1}const r={...o,...i,completionPosition:o.completion.text.length-t.length};this._addAlert(r),this._alertStateUpdateSubject.next({alert:r,suggestion:t})}else if(e.state===p.PU.discarded){const{suggestion:t,reason:i,...r}=e,n={...o,...r};this._addAlert(n),this._alertStateUpdateSubject.next({alert:n,suggestion:t,reason:i})}}else{if(o.state!==e.state)return this._log.warn(`Ran into inconsistent state changes while updating alert #${o.id} with state {${o.state}} to state {${e.state}}`),!1;this._log.warn(`Tried to update alert #${o.id} with the current alert state {${e.state}}`)}return!0}getAlertById(t){const e=this._alertProcessor.alerts.getAlertById(t);return e&&ht.S.isAutocompleteAlert(e)?e:null}*getAll(){for(const t of this._alertProcessor.alerts.getAll())ht.S.isAutocompleteAlert(t)&&(yield t)}dispose(){this._subs.forEach((t=>t.unsubscribe()))}}var ut=o(23031);class pt{constructor(t,e,o,i){this._mode=t,this._model=e,this._gnar=o,this._onAutocompleteFeedback=i,this._log=d.Y.create("AutocompleteReporter"),this._reporterId=ut.iy.create(),this._subs=[this._model.alertStateUpdate.pipe((0,l.h)((t=>p.w.isNative(t.alert.source)))).subscribe((({alert:t,suggestion:e,...o})=>{const i=this._properties(t,e);switch(t.state){case p.PU.applied:this._onAutocompleteFeedback(this._createFeedback("COMPLETION_ACCEPTED",t,e)),t.source===p.w.default?this._gnar.autocompleteSherlockSuggestionAccepted(...i):this._gnar.autocompleteWatsonSuggestionAccepted(...i);break;case p.PU.discarded:this._onAutocompleteFeedback({...this._createFeedback("COMPLETION_REJECTED",t,e),...o}),t.source===p.w.default?this._gnar.autocompleteSherlockSuggestionRejected(...i):this._gnar.autocompleteWatsonSuggestionRejected(...i);break;case p.PU.suggested:this._onAutocompleteFeedback(this._createFeedback("COMPLETION_SHOWN",t,e)),t.source===p.w.default?this._gnar.autocompleteSherlockSuggestionShown(...i):this._gnar.autocompleteWatsonSuggestionShown(...i);break;case p.PU.ignored:this._onAutocompleteFeedback(this._createFeedback("COMPLETION_IGNORED",t,e)),t.source===p.w.default?this._gnar.autocompleteSherlockSuggestionIgnored(...i):this._gnar.autocompleteWatsonSuggestionIgnored(...i);break;default:(0,ut.vE)(t)}})),this._model.alertStateUpdate.pipe((0,l.h)((t=>t.alert.source===p.w.external))).subscribe((({alert:t,suggestion:e})=>{switch(t.state){case p.PU.applied:this._gnar.autocompleteLestradeSuggestionAccepted(...this._properties(t,e));break;case p.PU.discarded:this._gnar.autocompleteLestradeSuggestionRejected(...this._properties(t,e));break;case p.PU.suggested:this._gnar.autocompleteLestradeSuggestionShown(...this._properties(t,e));break;case p.PU.ignored:this._gnar.autocompleteLestradeSuggestionIgnored(...this._properties(t,e));break;default:(0,ut.vE)(t)}}))]}_createFeedback(t,e,o){if(!p.w.isNative(e.source)){const t=`Unexpected alert source ${e.source}`;throw this._log.error(t),new Error(t)}const i=e.transformText+e.completion.text.slice(0,1),r=e.completion.text.slice(1);return r.endsWith(o)||this._log.error(`Completion text {${e.completion.text}} and suggestion {${o}} mismatch, still trying to build a feedback for alert #${e.id}`),{type:t,alertId:e.completion.id.toString(),begin:e.transformRange.start,end:e.transformRange.end+1+r.length,context:i,before:r.slice(0,-o.length),after:o,text:e.context,pname:e.completion.patternName}}_properties(t,e){const[o,...i]=e.split(" "),[r]=(t.transformText+t.completion.text).slice(0,-e.length).split(" ").reverse(),n=i.filter((t=>0!==t.length)).length+o.length/Math.max(o.length+r.length,1);return[this._reporterId,this._mode.get()===p.mv.enabledSolitary||this._mode.get()===p.mv.benchmarking?"solitary":"mixed",t.completion.patternName,`${this._reporterId.slice(0,8)}-${t.completion.id}`,e.length,n]}dispose(){this._subs.forEach((t=>t.unsubscribe()))}}class ft{constructor(t,e){this._textField=t,this._mouseData=e,this._suggestionElement=c.h.create(null),this.onSuggestionTextRefUpdate=t=>this._suggestionElement.set(t),this.rawHoveredSuggestion=this._mouseData.pipe((0,n.M)(this._suggestionElement),(0,a.U)((([{client:t},e])=>{if(e&&t&&this._onTopOfElement(t)){const o=Array.from(e.getClientRects()).map((t=>B.Pf.create(t)));return o.find((e=>B.UL.contains(t,e)))||null}return null})))}_onTopOfElement(t){const{ownerDocument:e}=this._textField,o=e&&e.elementFromPoint(t.left,t.top);return this._textField.contains(o)}}var gt=o(47387),mt=o(55849),_t=o(14263),vt=o(84313);class bt{constructor(t,e,o,i,r){this._controller=t,this._textFieldLayout=e,this._hoverProvider=o,this._suggestionBehavior=i,this._showOnboardingHint=r,this._isHovered=this._hoverProvider.hoveredBehavior.pipe((0,a.U)((t=>!!t))),this.view=this._suggestionBehavior.pipe((0,_.O)(null),(0,n.M)(this._showOnboardingHint),(0,a.U)((([t,e])=>t&&T.isNative(t)?y.createElement(xt,{key:"autocomplete-suggestion",spec:t,rect:this._textFieldLayout.rect.getCurrent(),tabHint:e,isHovered:this._isHovered,onTextRefUpdate:this._controller.onSuggestionTextRefUpdate}):null)))}}const xt=({spec:t,rect:e,tabHint:o,isHovered:i,onTextRefUpdate:r})=>{const n=t.offsetRect.left+t.offsetRect.width,s=t.styles.lineHeight,l=s.endsWith("px")?parseFloat(s):null,c=l&&l<t.offsetRect.height?l:"normal";return y.createElement("div",{className:vt.container,style:{top:t.offsetRect.top,width:e.size.width,...t.styles,lineHeight:c}},y.createElement("div",{className:vt.offset,style:{width:n}},"|"),y.createElement("span",{className:vt.completion,"data-grammarly-part":"completion",style:{lineHeight:c}},y.createElement(gt.F.span,{...(0,q.Sh)(vt.text,i.pipe((0,a.U)((t=>t&&vt.hovered)))),mount:r},t.text),o?y.createElement("span",{className:vt.tab,"data-grammarly-part":"completion-hint-tab"},"|"):y.createElement(mt.T,{type:"mini",backgroundColor:_t.bd.black,size:16,className:vt.logo,dataGrammarlyPart:"completion-hint-g-icon"})))};var wt;!function(t){t.gmail="mail.google.com",t.yahoo="mail.yahoo.com",t.outlook="^outlook.(live|office|office365).com$"}(wt||(wt={}));class yt{constructor(t,e,o,i,r,n,s,l,a,c,h,d,u,p,g,m,_,b,x){this._domain=t,this._mode=e,this._showOnboardingHint=o,this._textField=i,this._gnar=r,this._textObserver=n,this._textRevisionManager=s,this._mouseData=l,this._textFieldLayout=a,this._geometryLayout=c,this._geometryProvider=h,this._alertProcessor=d,this._selectionService=u,this._replacementService=p,this._rpcClient=g,this._disableAutocomplete=m,this._onAutocompleteFeedback=_,this._onOnboardingHintShown=b,this._clientPhrasalCompletionsEnabled=x,this._caretService=new M(this._textObserver,this._selectionService),this._model=new dt(this._alertProcessor),this._service=new j(this._mode,this._textField,this._textObserver,this._geometryLayout,this._geometryProvider,this._caretService,this._model),this._controller=new W(this._textField,this._selectionService,this._replacementService,this._model,this._service,this._showOnboardingHint,this._onOnboardingHintShown),this._formController=new Y(this._textField,this._model,this._gnar),this._cardController=new w(this._mode,(()=>{this._disableAutocomplete(),this._gnar.autocompleteFeatureToggleClick("inline","off")}),((t,e)=>{this._formController.open(t,e),this._gnar.autocompleteFeedbackButtonClick()})),this._suggestionController=new ft(this._textField,this._mouseData),this._hoverProvider=new st(this._textField,this._textFieldLayout,this._cardController,this._suggestionController,this._service.suggestionBehavior),this._disposables=[new D(this._mode,this._textObserver,this._textRevisionManager,this._rpcClient,this._caretService,this._model,this._clientPhrasalCompletionsEnabled),new pt(this._mode,this._model,this._gnar,this._onAutocompleteFeedback),...this._domain===wt.gmail?[new f(this._mode,this._textField,this._textObserver,this._caretService,this._service,this._model)]:[],...null!==this._domain.match(wt.outlook)?[new v(this._mode,this._textField,this._textObserver,this._caretService)]:[]],this.formView=new Z(this._formController),this.suggestionView=new bt(this._suggestionController,this._textFieldLayout,this._hoverProvider,this._service.suggestionBehavior,this._showOnboardingHint),this.cardView=new C(this._textField,this._cardController,this._hoverProvider)}onAutocompleteMessage(t,e,o){p.mv.nativeEnabled(this._mode.get())&&!this._clientPhrasalCompletionsEnabled()&&p.iH.create(t,p.w.default,o,e).forEach((t=>this._model.addAlert(t)))}initRpcClient(){this._rpcClient.get()}dispose(){this._disposables.forEach((t=>t.dispose())),this._model.dispose(),this._controller.dispose(),this._formController.dispose()}}},20545:(t,e,o)=>{o.d(e,{S:()=>i});var i,r=o(84766),n=o(32734),s=o(4256);!function(t){const e=t=>(0,r.F)(t).pipe((0,n.B)());t.sec5=e(s.m9(5)),t.sec2=e(s.m9(2)),t.sec1=e(s.m9(1)),t.hz4=e(s.Xd(4)),t.hz10=e(s.Xd(10)),t.hz30=e(s.Xd(30));const o=new Map;t.create=function(t){const i=o.get(t);if(i)return i;{const i=e(t);return o.set(t,i),i}}}(i||(i={}))},25731:(t,e,o)=>{o.d(e,{W:()=>h});var i=o(49231),r=o(23031),n=o(27853),s=o(9358),l=o(21536),a=o(39692),c=o(10658);const h=({anchorRect:t,anchorMargin:e={top:0,left:0,bottom:0,right:0},offset:o={horizontal:-16,vertical:0},iframeFocusedFieldPosition:h={left:0,top:0},repositioning:d={horizontal:"translate",vertical:"flip"},style:u,partName:p="inline-card",onHover:f,onClickAway:g,fieldOwnerDoc:m,children:_,onRender:v,preventMouseDown:b=!0,keepHoverOnMouseLeave:x,isTouchClient:w=!1})=>{const y=i.useCallback((t=>{t.preventDefault(),t.stopPropagation(),t.nativeEvent.stopPropagation(),t.nativeEvent.stopImmediatePropagation()}),[]),E=n.UL.setPosition({left:t.left+h.left,top:t.top+h.top},t);return i.createElement(l.d,{onClickAway:g||r.EI,additionalEventSources:m?[m]:[]},i.createElement(a.sX,{anchorRect:E,offset:{horizontal:o.horizontal||0,vertical:o.vertical||0},anchorMargin:{top:e.top||0,bottom:e.bottom||0,left:e.left||0,right:e.right||0},repositioning:{horizontal:d.horizontal||"translate",vertical:d.vertical||"flip"},ref:v},(({top:t,left:e})=>{var o,n;return i.createElement(c.o,{"data-grammarly-part":p,style:{position:"fixed",top:t+(w&&null!==(o=null===visualViewport||void 0===visualViewport?void 0:visualViewport.offsetTop)&&void 0!==o?o:0),left:e+(w&&null!==(n=null===visualViewport||void 0===visualViewport?void 0:visualViewport.offsetLeft)&&void 0!==n?n:0),zIndex:s.wJ,...u},onMouseDown:b?y:r.EI,onMouseMove:()=>null==f?void 0:f(!0),onMouseLeave:x?void 0:()=>null==f?void 0:f(!1),onTouchStart:w?()=>null==f?void 0:f(!0):void 0},_)})))}},9358:(t,e,o)=>{o.d(e,{BJ:()=>s,Eq:()=>a,U_:()=>c,gk:()=>h,lH:()=>r,oJ:()=>n,op:()=>i,wJ:()=>l});const i=2147483647,r=i-1,n=i-2,s=i-3,l=i-5,a=i-6,c=l,h=1350},52351:(t,e,o)=>{o.d(e,{Cv:()=>s,E9:()=>i,Ir:()=>n,p8:()=>r});var i,r,n,s,l=o(48830);!function(t){t.equals=function(t,e){return(0,l.M$)(t.left,e.left)&&(0,l.M$)(t.top,e.top)},t.fromCartesian=function({x:t,y:e}){return{top:e,left:t}},t.toCartesian=function({top:t,left:e}){return{x:e,y:t}},t.zero={top:0,left:0},t.minus=function(t,e){return{top:t.top-e.top,left:t.left-e.left}},t.plus=function(t,e){return{top:t.top+e.top,left:t.left+e.left}},t.ceil=function(t){return{left:Math.ceil(t.left),top:Math.ceil(t.top)}},t.floor=function(t){return{left:Math.floor(t.left),top:Math.floor(t.top)}},t.create=function(t){return{top:t.top,left:t.left}},t.l1Distance=function(t,e){return Math.abs(t.top-e.top)+Math.abs(t.left-e.left)}}(i||(i={})),function(t){function e(t){return{top:t.top,left:t.left}}t.create=e,t.fromClientPoint=function(t,o,i){return e({top:t.top-o.top+i.top,left:t.left-o.left+i.left})},t.zero={top:0,left:0}}(r||(r={})),function(t){function e(t){return{top:t.top,left:t.left}}t.create=e,t.fromOffsetPoint=function(t,o,i){return e({top:t.top+o.top-i.top,left:t.left+o.left-i.left})},t.fromPage=function(t,o){return e({top:t.top-o.top,left:t.left-o.left})}}(n||(n={})),function(t){function e(t){return{top:t.top,left:t.left}}t.create=e,t.getHighlightsPosition=function(t,o,i,r={top:0,left:0}){return e({top:t.top+o.top+i.top+r.top,left:t.left+o.left+i.left+r.left})},t.fromClient=function(t,o){return e({top:t.top+o.top,left:t.left+o.left})},t.fromOffset=function(t,e,o){return{top:t.top+e.top-o.top,left:t.left+e.left-o.left}}}(s||(s={}))},27853:(t,e,o)=>{o.d(e,{$u:()=>i,D1:()=>l,Pf:()=>s,UL:()=>r,Wm:()=>n});var i,r,n,s,l,a=o(48830),c=o(52351);!function(t){t.create=function(t){return{width:t.width,height:t.height}}}(i||(i={})),function(t){function e(t,e){const o=t.left<=e.left?t:e,i=o===t?e:t,r=t.top<=e.top?t:e,n=r===t?e:t;return o.left+o.width>=i.left&&r.top+r.height>=n.top}t.union=function(t){return e=>e.slice(1).reduce(((e,o)=>{const i=Math.min(o.top,e.top),r=Math.min(o.left,e.left),n=Math.max(e.left+e.width,o.left+o.width)-r,s=Math.max(e.top+e.height,o.top+o.height)-i;return t({top:i,left:r,width:n,height:s})}),e[0])},t.getIntersection=function(t,o){if(!e(t,o))return null;const i=t.left+t.width,r=t.top+t.height,n=o.left+o.width,s=o.top+o.height,l=Math.max(t.left,o.left),a=Math.max(t.top,o.top);return{left:l,top:a,width:Math.min(i,n)-l,height:Math.min(r,s)-a}},t.contains=function(t,e){return t.left>=e.left&&t.left<=e.left+e.width&&t.top>=e.top&&t.top<=e.top+e.height},t.doesRectContain=function(t,e){return e.left>=t.left&&e.left+e.width<=t.left+t.width&&e.top>=t.top&&e.top+e.height<=t.top+t.height},t.intersects=e,t.intersectsStrict=function(t,e){const o=t.left<=e.left?t:e,i=o===t?e:t,r=t.top<=e.top?t:e,n=r===t?e:t;return o.left+o.width>i.left&&r.top+r.height>n.top},t.setPosition=function(t,e){const o=i.create(e);return Object.assign({},t,i.create(e),{right:t.left+o.width,bottom:t.top+o.height})},t.area=function(t){return t.width*t.height},t.isEmpty=function(t){return 0===t.width&&0===t.height},t.shift=function(t,e){const o=c.E9.plus(t,e);return{...t,...o}},t.widen=function(t,e){return{...t,left:t.left-e,width:t.width+2*e}},t.equals=function(t,e,o){return(0,a.M$)(t.left,e.left,o)&&(0,a.M$)(t.top,e.top,o)&&(0,a.M$)(t.width,e.width,o)&&(0,a.M$)(t.height,e.height,o)},t.verticalOverlap=function(t,e){const o=t.top<=e.top?t:e,i=o===t?e:t,r=o.top+o.height-i.top;return r<0?0:r>i.height?1:r/Math.min(i.height,o.height)},t.midlineHorizontal=function(t){return{...t,top:t.top+t.height/2,height:0}},t.midlineVertical=function(t){return{...t,left:t.left+t.width/2,width:0}}}(r||(r={})),function(t){t.create=function(t){return{...t,kind:"offsetPoint"}},t.topLeftPoint=function({top:t,left:e}){return{kind:"offsetPoint",top:t,left:e}}}(n||(n={})),function(t){t.create=function(t){return{kind:"clientPoint",top:t.top,left:t.left,bottom:(null==t?void 0:t.bottom)||t.top+t.height,right:(null==t?void 0:t.right)||t.left+t.width,width:t.width,height:t.height}},t.empty={top:0,left:0,bottom:0,right:0,width:0,height:0,kind:"clientPoint"}}(s||(s={})),function(t){t.create=function(t){return t}}(l||(l={}))},92244:(t,e,o)=>{if(o.d(e,{Bi:()=>w,E6:()=>p,Jj:()=>a,Me:()=>l,Qf:()=>x,XQ:()=>h,Yd:()=>d,a9:()=>g,bp:()=>u,f0:()=>b,is:()=>f,kW:()=>_,o:()=>c,wr:()=>m}),6168!=o.j)var i=o(14527);const r=new Set(["absolute","relative","fixed","sticky"]),n=new Set(["strict","content","layout","paint"]),s=new Set(["flex","inline-flex"]);function l(t){const e=t.ownerDocument;if(e)return e;throw new Error("target does not have ownerDocument")}function a(t){const e=l(t).defaultView;if(e)return e;throw new Error("active document is detached from a window")}function c(t){return a(t).getComputedStyle(t)}function h(t){return r.has(c(t).position)}function d(t,e){const o=r.has(e.position);return!o&&null!==e.zIndex&&"auto"!==e.zIndex&&t.parentElement?s.has(c(t.parentElement).display):o}function u(t){const e=l(t).body;if(t===e)throw new Error("target is body");let o=t;do{if(o=o.parentElement,o&&h(o))return o}while(null!==o&&o!==e);return o||e}function p(t,e){var o,r,n,s;const a=l(t).body;if(t===a)throw new Error("target is body");const c=(0,i.Cq)(a.parentElement);let h=t;do{if(h=null!==(s=null!==(r=null!==(o=h.assignedSlot)&&void 0!==o?o:h.parentElement)&&void 0!==r?r:null===(n=h.getRootNode())||void 0===n?void 0:n.host)&&void 0!==s?s:null,h&&e(h))return h}while(null!==h&&h!==c);return h||c}function f(t){return p(t,(t=>{return h(t)||(e=t,n.has(c(e).contain));var e}))}function g(t){return function(t){const e=c(t);return"auto"===e.overflow||"scroll"===e.overflow||"auto"===e.overflowY||"scroll"===e.overflowY}(t)||function(t){const e=c(t);return"auto"===e.overflow||"scroll"===e.overflow||"auto"===e.overflowX||"scroll"===e.overflowX}(t)}function m(t,e){for(let o=t;null!=o;o=o.parentElement)if(e(o))return o;return null}function _(t){const e=t.ownerDocument,o=e&&e.defaultView;if(!e||!o)return;const i=e.body.scrollLeft,r=e.body.scrollTop,n=o.scrollY,s=o.scrollX;t.focus(),n===o.scrollY&&s===o.scrollX||o.scroll(s,n),r!==e.body.scrollTop&&(e.body.scrollTop=r),i!==e.body.scrollLeft&&(e.body.scrollLeft=i)}const v=t=>t?1/t:1,b=(t,e)=>{if(!t)return;const o=x(self.getComputedStyle(t));if(!o)return;const i=v(Number(o.x)),r=v(Number(o.y));return{transform:`translate(${e.left*(i-1)}px, ${e.top*(r-1)}px) scale(${i}, ${r})`,transformOrigin:t.style.transformOrigin}};function x(t){if(t.transform&&"none"!==t.transform){const e=/scale\(([\d.]+)(?:, ([\d.]))*\)|matrix\(([\d.]+), [\d.]+, [\d.]+, ([\d.]+), [\d.]+, [\d.]+\)/.exec(t.transform);if(e){const[t,o,i,r,n]=e;return{x:o||r,y:i||n||o}}}}function w(t){try{const e=new DOMMatrixReadOnly(t.transform);return{x:e.e,y:e.f}}catch(t){return}}},63524:(t,e,o)=>{function i(t){return t.length>0?t[0]:null}function r(t){return 1===t.length?t[0]:null}function n(t){return 1===t.length?t[0]:t.length>0?t.reduce(((t,e)=>e.start===e.end?t:t.start===t.end?e:{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)})):null}o.d(e,{Ey:()=>i,Ls:()=>n,qq:()=>r})},21536:(t,e,o)=>{o.d(e,{d:()=>s});var i=o(49231),r=o(92244),n=o(25965);const s=i.forwardRef((function({children:t,onClickAway:e,additionalEventSources:o,additionalIgnoredEventSources:s=[],onCapturePhase:l=!1},a){const c=i.useRef(null),h=i.useCallback((t=>{if(!c.current)return;const{target:o}=t,i=(0,r.Me)(c.current),n=!(o instanceof Node)||!s.some((t=>t.contains(o)))&&i.documentElement&&i.documentElement.contains(o)&&!t.composedPath().some((t=>{var e;return t instanceof Node&&(null===(e=c.current)||void 0===e?void 0:e.contains(t))}));n&&e(t)}),[e,c]);i.useEffect((()=>{var t,e;const i=[...new Set([...o||[],null!==(e=null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.ownerDocument)&&void 0!==e?e:document])];return i.forEach((t=>t.addEventListener("click",h,{capture:l}))),()=>{i.forEach((t=>t.removeEventListener("click",h,{capture:l})))}}),[h,c]);const d={ref:(0,n.l)([a,c,...(0,n.O)(t)?[t.ref]:[]])};return i.cloneElement(t,d)}))},7638:(t,e,o)=>{function i(t,e){const o=t.left<e.left?e.left:t.left+t.width>e.left+e.width?e.left+e.width-t.width:t.left,i=t.top<e.top?e.top:t.top+t.height>e.top+e.height?e.top+e.height-t.height:t.top;return{...t,left:o,top:i}}function r(t,e){return o=>{const r=i({left:t.left+o.x,top:t.top+o.y,width:t.width,height:t.height},e);return{x:r.left-t.left,y:r.top-t.top}}}o.d(e,{N:()=>r,m:()=>i})},39692:(t,e,o)=>{o.d(e,{KC:()=>h,Y4:()=>d,sX:()=>u});var i=o(49231),r=o(62552),n=o(24666),s=o(9273),l=o(25965),a=o(56546),c=o(35076);const h={top:-1e4,left:-1e4,flippedHorizontal:!1,flippedVertical:!1,width:0,height:0},d=i.createContext(s.of(h)),u=i.forwardRef((({children:t,anchorRect:e,anchorOrigin:o={vertical:"bottom",horizontal:"left"},elementOrigin:s={vertical:"top",horizontal:"left"},offset:u={horizontal:0,vertical:0},postRepositioningOffset:p,repositioning:f={horizontal:"translate",vertical:"flip"},anchorMargin:g={top:0,left:0,bottom:0,right:0},viewportMargin:m=16,viewportRect:_=(0,c.C7)(),stickToTarget:v=!0,onChangePosition:b},x)=>{const w=i.useRef(null),y=i.useRef(null),E=i.useRef(new r.X(h)),[P,S]=i.useState(E.current.value),C=[_.top,_.left,_.width,_.height,e.top,e.left,e.width,e.height,o.horizontal,o.vertical,s.horizontal,s.vertical,u.horizontal,u.vertical,null==p?void 0:p.horizontal,null==p?void 0:p.vertical,g.top,g.right,g.bottom,g.left,m,v];i.useEffect((()=>{const t=E.current.pipe((0,n.x)(((t,e)=>function(t,e){return Math.floor(t.top)===Math.floor(e.top)&&Math.floor(t.left)===Math.floor(e.left)&&Math.floor(t.width)===Math.floor(e.width)&&Math.floor(t.height)===Math.floor(e.height)}(t,e)))).subscribe((t=>{S(t),null==b||b(t)}));return()=>t.unsubscribe()}),[]);const A=()=>{var t,i;const r=null===(t=w.current)||void 0===t?void 0:t.clientWidth,n=null===(i=w.current)||void 0===i?void 0:i.clientHeight,l=(0,c.C7)();if(r&&n){const t=(0,c.kl)(r,n,l,e,o,s,g,{top:m,bottom:m,left:m,right:m},u,p,f,v);E.current.next({...t,width:r,height:n})}};i.useEffect((()=>{var t;return w&&w.current&&(null===(t=y.current)||void 0===t||t.disconnect(),y.current=a.N.getResizeObserver(A),y.current.observe(w.current)),()=>{var t;return null===(t=y.current)||void 0===t?void 0:t.disconnect()}}),[w.current,...C]),i.useLayoutEffect((()=>{A()}),C);const R={ref:(0,l.l)([x,w,...(0,l.O)(t)?[t.ref]:[]])};return i.createElement(d.Provider,{value:E.current},i.cloneElement("function"==typeof t?t(P):t,R))}));u.displayName="Positioner"},10658:(t,e,o)=>{o.d(e,{o:()=>s});var i=o(49231),r=o(37213),n=o(80144);const s=i.forwardRef((function({children:t,className:e,...o},s){return i.createElement("div",{...o,...(0,r.Sh)(n.fontWrapper,e),ref:s},t)}))},1629:(t,e,o)=>{o.d(e,{z:()=>u});var i=o(49231),r=o(64151);const n=({children:t,style:e,dataGrammarlyPart:o="ui-kit-iframe",...n})=>{const[s,l]=i.useState(null),a=i.useCallback((t=>{var e,o;let i=null;"contentDocument"in t.target&&(i=null!==(o=null===(e=t.target.contentDocument)||void 0===e?void 0:e.body)&&void 0!==o?o:null),l(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]);return i.createElement("iframe",{...n,style:{border:"none",...e},onLoad:a,srcDoc:"<html><body></body></html>","data-grammarly-part":o},s&&(0,r.createPortal)(t,s))};var s=o(41580),l=o(20182),a=o(18506),c=o(50292),h=o.n(c);const d=({placeholder:t,ariaLabel:e,onChange:o})=>{const[r,n]=i.useState("");return i.useEffect((()=>{o(r)}),[r]),i.createElement(i.Fragment,null,i.createElement(s.b,null,h().__css),i.createElement("div",{role:"textbox",className:h().textBox,contentEditable:!0,onInput:t=>{n(t.target.innerText)},"data-placeholder":t,"aria-placeholder":t,"aria-label":e}))},u=({placeholder:t,onChange:e,ariaLabel:o,iframeTitle:r,className:s})=>(0,a.OB)().experimentClient.isGateEnabled(l.K.CentralizeStopEventPropagation)?i.createElement("div",{className:s,style:{width:"100%",height:"128px",maxHeight:"inherit"}},i.createElement(d,{onChange:e,ariaLabel:o,placeholder:t})):i.createElement(n,{dataGrammarlyPart:"ui-kit-textbox",className:s,style:{width:"100%",height:"100%"},title:r},i.createElement(d,{onChange:e,ariaLabel:o,placeholder:t}))},41580:(t,e,o)=>{o.d(e,{b:()=>r});var i=o(49231);const r=({children:t})=>{const e="string"==typeof t?t:"";return e?i.createElement("style",{dangerouslySetInnerHTML:{__html:e}}):null}},35076:(t,e,o)=>{o.d(e,{C7:()=>f,jJ:()=>p,kl:()=>l});var i=o(20182),r=o(23031),n=o(18506),s=o(7638);function l(t,e,o,i,r,n,s,l,h,d,u,p){const f={top:o.top+l.top,left:o.left+l.left,width:o.width-l.left-l.right,height:o.height-l.top-l.bottom},v=function(t,e,o,i,r,n,s,l,a){const c=_(t,e,o,i,a,n,s);return[{...c,flippedHorizontal:!1,flippedVertical:!1}].concat((Array.isArray(r)?r:[r]).map((r=>({..._(t,m(e,r),m(o,r),g(i,c.overlap,r,n,s,l),a,n,s),flippedHorizontal:"flip"===r.horizontal,flippedVertical:"flip"===r.vertical}))))}({top:i.top-s.top,left:i.left-s.left,width:i.width+s.left+s.right,height:i.height+s.top+s.bottom},r,n,h,u,t,e,p,f),b=v.reduce(((t,e)=>t.overlap.vertical<=e.overlap.vertical?t:e)),x=v.reduce(((t,e)=>t.overlap.horizontal<=e.overlap.horizontal?t:e)),w=c({top:b.position.top,left:x.position.left,flippedHorizontal:x.flippedHorizontal,flippedVertical:b.flippedVertical},d,o,t,e);return a(w,t,e,f)}const a=(t,e,o,i)=>{const{top:r,left:n}=(0,s.m)({top:t.top,left:t.left,width:e,height:o},i);return{...t,top:r,left:n}},c=(t,e,o,i,r)=>{if(void 0===e)return t;const n=g(e,h(d({top:t.top+e.vertical,left:t.left+e.horizontal,width:i,height:r},o)),{horizontal:"translate",vertical:"translate"},i,r,!1);return{...t,top:t.top+n.vertical,left:t.left+n.horizontal}};function h(t){const e=Math.abs(Math.min(t.left,0)),o=Math.abs(Math.min(t.right,0)),i=Math.abs(Math.min(t.top,0)),r=Math.abs(Math.min(t.bottom,0));return{horizontal:e+o,vertical:i+r,top:i,bottom:r,left:e,right:o}}function d(t,e){return{top:t.top-e.top,bottom:e.top+e.height-(t.top+t.height),left:t.left-e.left,right:e.left+e.width-(t.left+t.width)}}const u=(0,r.Vo)((()=>(0,n.OB)().experimentClient.isGateEnabled(i.K.UseBodyToGetViewportDimentions)));function p(t=document){return!t.doctype&&u.get()?{top:t.body.scrollTop,left:t.body.scrollLeft,height:t.body.clientHeight,width:t.body.clientWidth}:{top:t.documentElement.scrollTop,left:t.documentElement.scrollLeft,height:t.documentElement.clientHeight,width:t.documentElement.clientWidth}}function f(t=document){return{top:0,left:0,height:!t.doctype&&u.get()?t.body.clientHeight:t.documentElement.clientHeight,width:t.documentElement.clientWidth}}function g(t,e,o,i,r,n){const s=e.left&&e.right?0:0!==e.left?Math.min(e.left,n?i:1/0):-Math.min(e.right,n?i:1/0),l=e.top&&e.bottom?0:0!==e.top?Math.min(e.top,n?r:1/0):-Math.min(e.bottom,n?r:1/0);return{horizontal:"translate"===o.horizontal?t.horizontal+s:-t.horizontal,vertical:"translate"===o.vertical?t.vertical+l:-t.vertical}}function m(t,e){return{vertical:"translate"===e.vertical?t.vertical:"top"===t.vertical?"bottom":"top",horizontal:"translate"===e.horizontal?t.horizontal:"left"===t.horizontal?"right":"left"}}function _(t,e,o,i,r,n,s){const{top:l,left:a}=function(t,e,o,i,r){return{top:t.top+r.vertical+("bottom"===o.vertical?t.height:"center"===o.vertical?t.height/2:0)-("bottom"===i.vertical?e.height:"center"===i.vertical?e.height/2:0),left:t.left+r.horizontal+("right"===o.horizontal?t.width:"center"===o.horizontal?t.width/2:0)-("right"===i.horizontal?e.width:"center"===i.horizontal?e.width/2:0)}}(t,{width:n,height:s},e,o,i);return{position:{top:l,left:a},overlap:h(d({top:l,left:a,width:n,height:s},r))}}},25965:(t,e,o)=>{function i(t,e){return o=>{t.forEach((t=>{"function"==typeof t?t(o):t&&(t.current=o),null==e||e(o)}))}}function r(t){return"ref"in t&&(null===t.ref||"function"==typeof t.ref||"object"==typeof t.ref&&"current"in t.ref)}o.d(e,{O:()=>r,l:()=>i})},5681:(t,e,o)=>{o.d(e,{x:()=>i});var i,r=o(49601),n=o(8867),s=o(32734),l=o(37108),a=o(8065),c=o(59179);!function(t){function e(t,e){return o(t,e).pipe((0,s.B)(),(0,l.Q)(r.E))}function o(t,e){return new n.y((o=>{const i=new MutationObserver((t=>o.next(t)));return i.observe(t,e),()=>i.disconnect()}))}t.create=e,t.createUnsafe=o,t.createFlattenHot=function(t,e){return o(t,e).pipe((0,a.b)((t=>t)),(0,s.B)())},t.observeAttribute=function(t,o){return e(t,{attributes:!0,attributeFilter:[o],subtree:!1,childList:!1}).pipe((0,c.U)((e=>t.getAttribute(o))))},t.observeStyle=function(t){return e(t,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe((0,c.U)((e=>t.style)))},t.observeChildList=function(t){return e(t,{attributes:!1,subtree:!1,childList:!0}).pipe((0,c.U)((e=>t.childNodes)))}}(i||(i={}))},56546:(t,e,o)=>{o.d(e,{N:()=>i});var i,r=o(49601),n=o(8867),s=o(32734),l=o(37108),a=o(17705),c=o(954),h=o(20545),d=o(5681);!function(t){function e(t){return function(t){return new n.y((e=>{const i=o((()=>e.next(void 0)));return t.forEach((t=>i.observe(t))),()=>i.disconnect()}))}(t).pipe((0,s.B)(),(0,l.Q)(r.E))}function o(t){return new i(t)}t.observeSizeChanges=function(t){return e(t)},t.getResizeObserver=o;class i{constructor(t){this._af=null,this._callbackWasInvoked=!1;const e=()=>{this._callbackWasInvoked?(null!==this._af&&cancelAnimationFrame(this._af),this._af=requestAnimationFrame((()=>{t()}))):(t(),this._callbackWasInvoked=!0)};try{this._resizeObserver=new ResizeObserver(e)}catch(t){this._resizeObserver=new u(e)}}observe(t){this._clearAnimationFrame(),this._resizeObserver.observe(t)}unobserve(t){this._resizeObserver.unobserve(t),this._clearAnimationFrame()}disconnect(){this._resizeObserver.disconnect(),this._clearAnimationFrame()}_clearAnimationFrame(){this._af&&(cancelAnimationFrame(this._af),this._af=null),this._callbackWasInvoked=!1}}class u{constructor(t){this._callback=t,this._sub=null}observe(t){this._sub=d.x.create(t,{attributes:!0,childList:!0,subtree:!0}).pipe((0,a.T)(h.S.hz4),(0,c.O)(null)).subscribe((()=>{this._callback()}))}unobserve(){this._sub&&(this._sub.unsubscribe(),this._sub=null)}disconnect(){this.unobserve()}}}(i||(i={}))},60774:(t,e,o)=>{if(o.d(e,{BM:()=>g,IG:()=>_,Re:()=>m,Tv:()=>f,VD:()=>v,YN:()=>w,_N:()=>b,a2:()=>x,qw:()=>p}),6168!=o.j)var i=o(64271);if(6168!=o.j)var r=o(44071);if(6168!=o.j)var n=o(29479);if(3075==o.j)var s=o(954);if(3075==o.j)var l=o(59179);if(3075==o.j)var a=o(90572);if(6168!=o.j)var c=o(92244);if(3075==o.j)var h=o(5681);if(3075==o.j)var d=o(23031);if(6168!=o.j)var u=o(15716);function p(t){return(0,i.T)((0,r.R)(t,"focus").pipe((0,n.h)(!0)),(0,r.R)(t,"blur").pipe((0,n.h)(!1)))}function f(t){return t.nodeType===Node.ELEMENT_NODE}function g(t){return t.nodeType===Node.TEXT_NODE}function m(t){return t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement}function _(t,e){return h.x.create(t,{childList:!0,subtree:!0,attributes:!1}).pipe((0,s.O)(null),(0,l.U)((t=>{const o=Object.entries(e).reduce(((t,[e,o])=>({...t,[e]:o()})),{});return Object.values(o).filter(d.fQ).length===Object.keys(o).length?o:null})),(0,a.h)((t=>!!t)))}var v;function b(t,e,o){return i((0,c.Me)(e));function i(e){const o=e.elementFromPoint(t.left,t.top);if(!o)return!1;const i=r(o);if(null!==i)return i;const n=e.elementsFromPoint(t.left,t.top);for(const t of n){if(t===o)continue;const e=r(t);if(null!==e)return e}return!1}function r(t){var r;return!(e!==t&&!e.contains(t))||((null==o?void 0:o(t))?null:!!(null===(r=t.shadowRoot)||void 0===r?void 0:r.elementsFromPoint)&&i(t.shadowRoot))}}function x(t){if(t.endsWith("px")){const e=t.slice(0,-2),o=Number(e);return(0,u.hj)(o)?o:null}return null}function w(t){var e;const o=(null!==(e=t.ownerDocument.defaultView)&&void 0!==e?e:self).getComputedStyle(t).zIndex,i="auto"!==o&&parseInt(o||"0",10)||null;return null!==i?i:t.parentNode&&t.parentNode.nodeType===Node.ELEMENT_NODE?w(t.parentNode):null}!function(t){t[t.Escape=27]="Escape",t[t.Return=13]="Return",t[t.Tab=9]="Tab",t[t.RightArrow=39]="RightArrow",t[t.UpArrow=38]="UpArrow",t[t.DownArrow=40]="DownArrow"}(v||(v={}))},5270:(t,e,o)=>{if(o.d(e,{BE:()=>r,FD:()=>n,Nm:()=>a,Qw:()=>d,Sf:()=>h,_v:()=>p,fm:()=>l,iD:()=>u,qE:()=>s}),6168!=o.j)var i=o(15716);function r(t){return/^["'”“.,;:!?\\/…\-—()]+$/.test(t.replace(/\s/g,""))}function n(t){return/^\s+$/.test(t)}function s(t){return/^[\w'-]$/.test(t)}const l=t=>{const e=t.trim(),o=new RegExp(/^\p{Extended_Pictographic}\s*/,"u"),i=e.match(o);if(null!==i){const t=i[0].length;return e.slice(0,t)+e.charAt(t).toUpperCase()+e.slice(t+1).toLowerCase()}return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};function a(t,e){const o=[];if(e.length){let i=t.indexOf(e);for(;i>=0;)o.push(i),i=t.indexOf(e,i+1)}return o}function c(t){return t.split("").reverse().join("")}function h(t){const e=t.trimStart().slice(0,1),o=t.indexOf(e);return{index:o,char:e,text:t.slice(0,o+1)}}function d(t){const e=h(c(t));return{text:c(e.text),char:e.char,index:t.length-e.index-1}}function u(t){const e=t.match(/\b\w+\b/g);return e?e.length:0}function p(t){return t.reduce(((t,e)=>!(0,i.HD)(t)||t.length<e.length?e:t),void 0)}},56518:(t,e,o)=>{var i=o(45101),r=o(30997)(i);r.push([t.id,"._z3YOv-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._z3YOv-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),r.locals={textBox:"_z3YOv-textBox"},t.exports=r},30997:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o="",i=void 0!==e[5];return e[4]&&(o+="@supports (".concat(e[4],") {")),e[2]&&(o+="@media ".concat(e[2]," {")),i&&(o+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),o+=t(e),i&&(o+="}"),e[2]&&(o+="}"),e[4]&&(o+="}"),o})).join("")},e.i=function(t,o,i,r,n){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var l=0;l<this.length;l++){var a=this[l][0];null!=a&&(s[a]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&s[h[0]]||(void 0!==n&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=n),o&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=o):h[2]=o),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},45101:t=>{t.exports=function(t){return t[1]}},47084:t=>{t.exports={card:"X0R0o",menu:"PVaIB",disable:"FCO94",item:"EfFpP",heading:"YQ0dJ",text:"yVoPk"}},11906:t=>{t.exports={container:"lUF9V",box:"SODR1",close:"PeKu0",form:"DqhDT",heading:"euoDw",subheading:"NPgD4",explanation:"onNOx",section:"uFYpG",subject:"QU_Yq",suggestion:"onRow",optionGroup:"N6Xyq",option:"jrYFW",checked:"DXa0M",textfield:"_w7gI",footer:"RGjl8",button:"ZEcZy",primary:"UGRLr",disabled:"ks3Tq",secondary:"ciPzI"}},84313:t=>{t.exports={container:"cfYKl",offset:"NHkUd",completion:"_2p6F",text:"giG7o",hovered:"fassR",tab:"PT7dB",logo:"Ce3bq"}},80144:t=>{t.exports={fontWrapper:"amkYk"}}}]);