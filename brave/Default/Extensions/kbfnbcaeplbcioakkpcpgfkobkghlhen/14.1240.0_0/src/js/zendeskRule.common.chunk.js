(self.webpackChunk=self.webpackChunk||[]).push([[2970],{24629:(e,n,t)=>{t.r(n),t.d(n,{Zendesk:()=>x,zendeskTransformBeforeApply:()=>L});var i=t(84714),a=t(58303),r=t(44381),o=t(1314),s=t(92244),d=t(8791),l=t(29154),c=t(95054),m=t(52296),p=t(21980),u=t(6887),k=t(3479),g=t(74425),f=t(20182),w=t(15716),v=t(18506),E=t(81752),b=t(72043),h=t(36807),y=t(33632),R=t(49445);const z=e=>R.RI.isDelta(e)?R.RI.delta(T(e.delta),e.prevLen):e,T=e=>new h.i(e.map(Z)),Z=e=>y.s.isInsertString(e)&&C(e)?{...e,attributes:{...e.attributes,zendeskMacro:!0}}:e,C=({insert:e})=>e.split("\n").length>5;var x;function A(e){const n=(0,s.wr)(e,(e=>e.className.includes("ticket section")))||e;return(0,r.z)(n)}function L(e){return!(0,v.OB)().experimentClient.isGateEnabled(f.K.ZendeskTransformReplacementOnlyForString)||(0,w.HD)(e.value)?l.T.transformReplacementNotToTrimSpaces(e):e}!function(e){const n=d.T.contentEditable("Zendesk.editor",(e=>({integrationName:"Zendesk Editor",extraCondition:e=>e.field.classList.contains("editor"),createLayout:n=>new o.A7(n,{innerElementsField:e.field.closest(".zendesk-editor--rich-text-container")||e.field,createGbuttonShiftBehavior:e=>(0,i.of)({top:-40,left:-10}),scroller:A(n),pretendFieldPositioned:!0})}))),t=m.O$.generic((e=>({genericOpts:{integrationName:"Zendesk Reply (slatejs)",validationRules:[...p.u,(0,u.jw)(25)],createLayout:e=>new o.A7(e,{innerElementsField:e.closest(".zendesk-editor--rich-text-container")||e,minimizeEnabled:!1,pretendFieldPositioned:!0})}}))),r=d.T.textarea("Zendesk.chat",(()=>({validationRules:[...p.u,(0,u.jw)(25)],createLayout:e=>new o.A7(e,{innerElementsField:e.closest("[name='message']")||e,minimizeEnabled:!1})}))),s=l.T.generic((e=>({integrationName:"Zendesk Agent Chat",validationRules:[...p.u,(0,u.jw)(25)],genericOpts:{mapChange:z,getVBarsIntegrationInfo:n=>a.G({integrationName:n,kind:"zendesk",domain:e.pageContext.domain,isInsideIFrame:!1})},transformReplacementBeforeApply:L,deletionEvent:(0,E.Xw)()?"beforeinput":"keydown"})));e.page=(0,b.$W)({domain:g.Qk,name:"zendesk",eventPropagationHandler:e=>{(0,v.OB)().experimentClient.isGateEnabled(f.K.CentralizeStopEventPropagation)||e.addEventListener("keydown",(e=>{e.stopPropagation()}))}},[n,r,s,t,d.T.contentEditable("Zendesk",(()=>({createLayout:e=>new o.A7(e)}))),(0,c.q)("Zendesk"),d.T.textarea("Zendesk",(()=>({createLayout:e=>new o.A7(e),validationRules:p.u}))),k.k.iframeHostRule])}(x||(x={}))}}]);