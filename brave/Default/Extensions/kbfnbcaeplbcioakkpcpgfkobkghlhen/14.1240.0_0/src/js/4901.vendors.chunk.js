(self.webpackChunk=self.webpackChunk||[]).push([[4901],{30772:(e,t,n)=>{n.d(t,{A:()=>ct});var r,i,o,s,a=n(90023),l=n(59833),u=n(11633),c=n(72111),p=n(58303),d=n(53186),f=n(17572),h=n(12518),g=n(34958),b=n(84358),m=n(31491),y=n(64297),v=n(33632),_=n(36807),I=n(21147),w=n(38538),O=n(7773),A=Object.defineProperty,S=Object.defineProperties,x=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,P=(e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;((i=r||(r={})).Range||(i.Range={})).isEmpty=function(e){return e.e-e.s==0},o=i.Edit||(i.Edit={}),(s=o.Type||(o.Type={})).MAIN="main",s.IMPORTANT="important",(o.TypeExt||(o.TypeExt={})).OPTIONAL_CONTEXT="optional_context",(e=>{function t(e){return(0,a.zG)(e.ops,p.DT((e=>-1===e.findIndex(t))),p.g_((()=>{return h.t$({ops:(n=e.ops,n.reduce(((e,n,r)=>{if(t(n,r)){const t=n.attributes,{type:r}=t,o=((e,t)=>{var n={};for(var r in e)E.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&T)for(var r of T(e))t.indexOf(r)<0&&C.call(e,r)&&(n[r]=e[r]);return n})(t,["type"]);e.push((i=((e,t)=>{for(var n in t||(t={}))E.call(t,n)&&P(e,n,t[n]);if(T)for(var n of T(t))C.call(t,n)&&P(e,n,t[n]);return e})({},n),S(i,x({attributes:o}))))}else e.push(n);var i;return e}),[]))});var n}),(e=>h.F2({ops:e}))));function t(e,t){return t>0&&v.s.isRetain(e)&&void 0!==e.attributes&&"optional_context"===e.attributes.type}}e.unsafeFromDelta=function(e){return(0,a.zG)(e,t,h.g_(a.yR,a.yR))},e.fromDelta=t})(i.AbsAlternative||(i.AbsAlternative={}));var G,k,R,j,M=n(21684),z=Object.defineProperty,D=Object.defineProperties,U=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,B=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H=(e,t)=>{for(var n in t||(t={}))L.call(t,n)&&B(e,n,t[n]);if(F)for(var n of F(t))N.call(t,n)&&B(e,n,t[n]);return e},V=(e,t)=>D(e,U(t));(e=>{(e=>{e.Important="important",e.Main="main",e.Optional="optional"})(e.Type||(e.Type={})),(e.TypeExt||(e.TypeExt={})).OptionalContext="optional_context";const t=e=>"object"==typeof e&&null!==e;e.eqAttributes=w.Eh(I.f7(((n,r)=>t(n)&&t(r)?e.eqAttributes.equals(n,r):I.w4.equals(n,r)))),e.eq=I.MW({type:I.w4,group:p.Eh(I.yv),insert:I.yv,delete:I.lr,retain:I.lr,attributes:e.eqAttributes}),e.isInsert=e=>"insert"in e,e.isInsertString=t=>(0,e.isInsert)(t)&&n(t.insert),e.isInsertGap=t=>(0,e.isInsert)(t)&&r(t.insert),e.isDelete=e=>"delete"in e,e.isRetain=e=>"retain"in e,e.isOptionalContextRetain=t=>"retain"in t&&e.isOptionalContextType(t.type);const n=e=>"string"==typeof e,r=e=>"object"==typeof e&&null!==e&&"gap"in e;e.isMain=e=>"main"===e.type,e.isOptionalType=e=>"optional"===e,e.isOptionalContextType=e=>"optional_context"===e,e.isSignificant=function(e){switch(e.type){case"main":case"important":return!0;case"optional":return!1;default:return(0,y.vE)(e.type)}},e.fromRawAbsAlternative=function(e){if(function(e){const t=e[0];return Boolean(t)&&"retain"in t&&Boolean(t.attributes)&&"optional_context"===t.attributes.type}(e.ops)){const[t,...n]=e.ops;return[{retain:t.retain,type:"optional_context",group:p.YP},...n.map(o)]}return e.ops.map(o)},e.length=_.i.Op.length,e.anonymize=t=>(0,e.isInsert)(t)?V(H({},t),{insert:"string"==typeof t.insert?`<${(0,e.length)(t)}>`:"<embed>"}):t;e.Iterator=class{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){Boolean(t)||(t=1/0);const n=this.ops[this.index];if(Boolean(n)){const r=n.type,i=this.offset,o=(0,e.length)(n);return t>=o-i?(t=o-i,this.index+=1,this.offset=0):this.offset+=t,e.isDelete(n)?{delete:t,type:r,group:n.group}:e.isRetain(n)?{retain:t,type:r,group:n.group,attributes:!e.isOptionalContextType(r)&&n.attributes}:e.isInsertString(n)?{insert:n.insert.substr(i,t),type:r,group:n.group,attributes:n.attributes}:n}return{retain:1/0,type:"optional",group:p.YP,attributes:{}}}peekLength(){return Boolean(this.ops[this.index])?(0,e.length)(this.ops[this.index])-this.offset:1/0}peekType(){return Boolean(this.ops[this.index])?e.isDelete(this.ops[this.index])?"delete":e.isRetain(this.ops[this.index])?"retain":"insert":"retain"}};const i=(0,a.ls)(p.ij,p.UI(w.EG("type")),p.UI(w.EG("group")),p.fS((()=>({})))),o=e=>{const t=function(e){if(null!=(null==e?void 0:e.type))switch(e.type){case"main":return"main";case"important":return"important";default:return(0,y.vE)(e.type)}return"optional"}(e.attributes),n=(r=e.attributes,(0,a.zG)(p.ij(r),p.tS((e=>p.ij(e.group)))));var r;return"insert"in e?{insert:e.insert,type:t,group:n,attributes:i(e.attributes)}:"delete"in e?{delete:e.delete,type:t,group:n}:{retain:e.retain,type:t,group:n,attributes:i(e.attributes)}}})(G||(G={})),(R=k||(k={})).fromAlternative=({alternative:e,fullText:t})=>(0,a.zG)(e.delta.invert(t),j.fromRawDelta),R.fromAlternativeBoldified=({alternative:e,fullText:t})=>{const n=(0,a.zG)(e.delta.map(v.s.match((e=>(0,a.zG)(e,p.DT(v.s.isInsertString),p.tS((e=>(0,a.zG)(p.ij(e.attributes),p.UI((t=>({attributes:t,retain:e.insert.length})))))),p.hX((({attributes:e})=>Boolean(e.bold))),p.UI((({retain:e})=>({retain:e,attributes:{bold:!1}}))))),(e=>p.YP),(e=>p.G({retain:e.retain})))),l.oA,(e=>new _.i(e)),(e=>t.compose(e)));return(0,R.fromAlternative)({alternative:e,fullText:n})},R.fromAlternativeListified=({alternative:e,fullText:t})=>(0,a.zG)((0,R.fromAlternative)({alternative:e,fullText:t}),(e=>(0,a.zG)(e.delta.ops,l.qr((e=>v.s.isInsertString(e)&&"\n"===e.insert&&Boolean(!e.attributes||!Boolean(e.attributes.list)))),p.UI((t=>{const n=e.delta.ops,r=n[t];return new _.i([...n.slice(0,t),V(H({},r),{attributes:V(H({},r.attributes),{list:!1})}),...n.slice(t+1)])})),p.fS((()=>e.delta)))),j.fromRawDelta),(e=>{let t;function n(e){return t=>G.isInsertGap(t)?V(H({},t),{insert:e}):t}function i(e){return new s(e)}var o;e.hasOptionalContext=function(e){return Boolean(e[0])&&G.isOptionalContextRetain(e[0])},(e=>{e.Insert="insert",e.Remove="remove",e.Substitution="substitution"})(t=e.Type||(e.Type={})),(e=>{function t(e){return"main"===e.type?p.G(G.isInsert(e)?"insert":"remove"):p.YP}e.eq=I.yv,e.fromOperation=t,e.semigroup={concat(e,t){switch(e){case"insert":return"remove"===t?"substitution":t;case"remove":return"insert"===t?"substitution":t;case"substitution":return"substitution";default:return(0,y.vE)(e)}}},e.monoid=p.uZ(e.semigroup),e.parse=(0,l.Lx)(e.monoid)(t)})(t=e.Type||(e.Type={})),e.eq=I.MW({lengthAffected:I.lr,type:p.Eh(t.eq),ops:(0,l.Eh)(G.eq)}),e.fromRawDelta=(0,a.ls)(r.AbsAlternative.unsafeFromDelta,G.fromRawAbsAlternative,i),e.fillGaps=(t,r)=>e.hasOptionalContext(t.ops)?i([t.ops[0],...t.ops.slice(1).map(n(r))]):i(t.ops.map(n(r))),e.dismissTransformGroups=function(t,n){const r=l.DZ((e=>(0,a.zG)(e.group,p.hX((e=>n.has(e))),p.g_((()=>p.G(e)),(()=>function(e){return G.isDelete(e)?p.G({type:e.type,group:e.group,retain:e.delete,attributes:{}}):G.isInsert(e)?p.YP:p.G(e)}(e))))));if(e.hasOptionalContext(t.ops)){const[e,...n]=t.ops;return i([e,...(0,a.zG)(n,r)])}return i((0,a.zG)(t.ops,r))},e.getTransformGroups=function(e){const t=new Set;return e.ops.forEach((e=>(0,a.zG)(e.group,b.bw((e=>t.add(e)))))),t},e.getDeleteOpsGroupsList=function(e){return(0,a.zG)(e.ops.filter(G.isDelete),l.UI((e=>e.group)),l.oA)},e.create=i,e.validate=(0,a.ls)((e=>e.ops),h.DT((0,M.sq)(G.isOptionalContextRetain),(e=>"Optional_context operations exist not only at the beginning or at the end of Delta"))),(o=e.Group||(e.Group={})).fromSerialized=function(t){return{context:t.context,alternatives:(0,a.zG)(t.alternatives,d.UI((e=>e.ops)),d.UI(e.create))}},o.fromSubalerts=(e,t)=>({context:e,alternatives:d.UI((0,a.ls)(G.fromRawAbsAlternative,i))(t)}),o.fromRawTransform=function(e){return{context:d.of(e.context),alternatives:d.UI((0,a.ls)(G.fromRawAbsAlternative,i))(e.alternatives)}},o.rebase=e=>t=>({context:(0,a.zG)(t.context,d.UI((t=>({s:e.transformPosition(t.s,!0),e:e.transformPosition(t.e,!0)})))),alternatives:(0,a.zG)(t.alternatives,d.UI((t=>(0,a.zG)(t.rebase(e),p.g_((()=>t),a.yR)))))}),o.copy=e=>({context:d.JG(e.context),alternatives:d.JG(e.alternatives)});class s{constructor(e){this.ops=e,this.type=t.parse(this.ops),this.lengthAffected=v.s.calcAffectedLength(this)}rebase(e){const t=e.ops[0];if(!Boolean(t)||v.s.isRetain(t)&&(void 0===t.attributes||0===Object.keys(t.attributes).length)&&_.i.Op.length(t)>this.lengthAffected)return p.G(this);const n=this.ops.length>=2&&v.s.isDelete(this.ops[this.ops.length-2])&&v.s.isInsert(this.ops[this.ops.length-1]);return!Boolean(t)||n&&v.s.isRetain(t)&&(void 0===t.attributes||0===Object.keys(t.attributes).length)&&_.i.Op.length(t)===this.lengthAffected?p.G(this):this._internalRebase(e)}_internalRebase(t){const n=_.i.Op.iterator(t.ops),r=new G.Iterator(this.ops);let i=p.G(new s([])),o=!1;for(;r.hasNext();)if("insert"===n.peekType()){if(o&&(0,a.zG)(i,b.wo((e=>"main"===e.ops[e.ops.length-1].type))))return p.YP;{const e=_.i.Op.length(n.next()),t=(0,a.zG)(i,p.UI((e=>e.ops[e.ops.length-1])),b.MH);if(o&&b.wo((e=>e.lengthAffected>0))(i)){const n={retain:e,type:t.type,group:t.group,attributes:"attributes"in t&&!G.isOptionalContextType(t.type)?t.attributes:{}};i=s._pushOp(i,n)}else i=s._pushOp(i,{retain:e,type:"optional",group:p.YP,attributes:{}})}}else if("insert"===r.peekType()){const e=r.next();if("main"===e.type&&"delete"===n.peekType()&&n.offset>0)return p.YP;i=s._pushOp(i,e)}else{const e=Math.min(n.peekLength(),r.peekLength()),t=n.next(e),a=r.next(e);v.s.isDelete(t)||(o=r.offset>0,i=s._pushOp(i,G.isDelete(a)?a:G.isOptionalContextType(a.type)?{retain:e,type:"optional_context",group:p.YP}:{retain:e,type:a.type,group:a.group,attributes:a.attributes}))}return(0,a.zG)(i,p.UI((t=>(t.type=e.Type.parse(this.ops),t))))}static _pushOp(e,t){return(0,a.zG)(e,p.tS((e=>(0,a.zG)(f.vM((()=>e._push(t))),h.Vn((e=>(c.C8.Logging.getLogger("Alternative").error("Alternative push error",e),e))),p.Uo))))}_push(e){const t=this.ops.length,n=this.ops[t-1];if(Boolean(n)){if(G.isOptionalContextRetain(e))return G.isOptionalContextRetain(n)?n.retain+=e.retain:G.isRetain(n)&&t<=2?2===t?((0,y.kG)(G.isOptionalContextRetain(this.ops[0]),"OptionalContext is expected in the beginning of alternative but not found",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.ops[0].retain+=e.retain):(this.ops[t]=n,this.ops[t-1]=e):(0,y.kG)(G.isOptionalContextRetain(n)||G.isRetain(n)&&1===t,"Attempted to push optional_context in the middle of alternative ops",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.lengthAffected+=e.retain,this;if(G.isDelete(e)&&G.isDelete(n))return e.type===n.type?n.delete+=e.delete:this.ops.push(e),this.lengthAffected+=e.delete,this;if(G.isInsert(e)&&G.isInsert(n))return e.type===n.type&&"string"==typeof e.insert&&"string"==typeof n.insert&&G.eqAttributes.equals(e.attributes,n.attributes)?n.insert+=e.insert:this.ops.push(e),this;if(G.isRetain(e)&&G.isRetain(n))return e.type===n.type?n.retain+=e.retain:this.ops.push(e),this.lengthAffected+=e.retain,this;this.ops.push(e)}else this.ops=[e];return G.isInsert(e)||(this.lengthAffected+=G.length(e)),this}get delta(){return v.s.normalizeDelta(new _.i(this))}toJSON(){return{ops:this.ops}}}e.compose=(e,t)=>{const n={composedDelta:new _.i,currentFullText:t,reversedAlternatives:[]},r=e.reduce(((e,[t,n],r)=>((0,a.zG)(t.rebase(e.composedDelta),p.g_((()=>{e.reversedAlternatives.push(h.t$({error:new Error("Could not rebase alternative to composed delta"),delta:t.delta,alternativeIndex:r}))}),(t=>{const i=n({alternative:t,fullText:e.currentFullText});e.composedDelta=e.composedDelta.compose(t.delta),e.currentFullText=e.currentFullText.compose(t.delta),function(e,t){e.forEach(((n,r)=>(0,a.zG)(n,h.g_(a.Q1,(n=>{e[r]=(0,a.zG)(n.reversedAlternative.rebase(t.delta),h.Yo((()=>({error:new Error("Could not rebase reversed alternative to some alternative"),delta:n.reversedAlternative.delta,alternativeIndex:n.alternativeIndex}))),h.UI((e=>V(H({},n),{reversedAlternative:e}))))})))))}(e.reversedAlternatives,t),e.reversedAlternatives.push(h.F2({reversedAlternative:i,alternativeIndex:r}))}))),e)),n),i=(0,a.zG)(r.reversedAlternatives,l.oh,O.T.fromSeparatedArray);return V(H({},r),{reversedAlternatives:i})},e.withoutOptionalOps=function(t){return e.create(t.filter((e=>!G.isOptionalType(e.type))))}})(j||(j={}));var W=Object.defineProperty,J=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,$=(e,t,n)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t)=>{for(var n in t||(t={}))Y.call(t,n)&&$(e,n,t[n]);if(J)for(var n of J(t))q.call(t,n)&&$(e,n,t[n]);return e};Math.pow(2,32);var Z,X,Q,ee,te,ne,re,ie,oe,se;X=Z||(Z={}),(Q=X.SessionMode||(X.SessionMode={})).READ_ONLY="READ_ONLY",Q.AI_STUDIO_PREVIEW="AI_STUDIO_PREVIEW",(ee=X.ScoresStatus||(X.ScoresStatus={})).OK="OK",ee.TOO_SMALL="TOO_SMALL",ee.SENSITIVE="SENSITIVE",ee.ERROR="ERROR",(e=>{const t={Clarity:0,Correctness:0,Engagement:0,Tone:0,"Style guide":0,GeneralScore:0};e.normalize=e=>K(K({},t),e)})(X.OutcomeScores||(X.OutcomeScores={})),(X.AttentionHeatmap||(X.AttentionHeatmap={})).hasAttentionInfo=function(e){return"attentionScore"in e&&"showAttentionCard"in e},te=X.Survey||(X.Survey={}),ne=te.Data||(te.Data={}),re=ne.BaseSurvey||(ne.BaseSurvey={}),(ie=re.Placement||(re.Placement={})).gmail="gmail",ie.gdocs="gdocs",ie.vbar="vbar",ie.ggo="ggo",ie.writing_expert_accept_card="writing_expert_accept_card",ie.writing_expert_dismiss_card="writing_expert_dismiss_card",ie.writing_expert_widget="writing_expert_widget",ie.ai_studio_feed="ai_studio_feed",(oe=ne.ScoreSurvey||(ne.ScoreSurvey={})).type="score",(oe.Score||(oe.Score={})).declined="declined",(se=ne.OpenAnswerScoreSurvey||(ne.OpenAnswerScoreSurvey={})).type="open_answer_score",se.scoreStage="score",se.submitStage="submit";var ae,le,ue,ce,pe,de,fe,he,ge,be,me,ye,ve,_e,Ie,we,Oe,Ae,Se,xe=n(88347),Te=Object.defineProperty,Ee=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Re=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,je=(e,t)=>{for(var n in t||(t={}))Ge.call(t,n)&&Re(e,n,t[n]);if(Pe)for(var n of Pe(t))ke.call(t,n)&&Re(e,n,t[n]);return e},Me=(e,t)=>Ee(e,Ce(t)),ze=(e,t)=>{var n={};for(var r in e)Ge.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Pe)for(var r of Pe(e))t.indexOf(r)<0&&ke.call(e,r)&&(n[r]=e[r]);return n};(le=ae||(ae={})).RelatedMaterial=u.dt({iconUrl:u.OT(u.Z_),title:u.OT(u.Z_),link:u.OT(u.Z_)}),le.RelatedMaterials=u.Bk(le.RelatedMaterial),le.CommunicationMethod=u.dt({iconUrl:u.OT(u.Z_),title:u.OT(u.Z_),link:u.OT(u.Z_)}),le.PointPerson=u.dt({firstName:u.OT(u.Z_),lastName:u.OT(u.Z_),displayName:u.OT(u.Z_),jobTitle:u.OT(u.G0([u.Z_,u.S1])),avatarUrl:u.OT(u.G0([u.Z_,u.S1])),communicationMethods:u.Bk(le.CommunicationMethod)}),le.PointPeople=u.Bk(le.PointPerson),le.Aliases=u.Bk(u.dt({name:u.OT(u.Z_)})),(ce=ue||(ue={})).empty=[],ce.isLeaf=function(e){return 0===e.length},ce.Tree=u.sH("Tree",(()=>u.IX(u.bc([u.pk,ce.Tree])))),de=pe||(pe={}),(fe=de.DomainCategory||(de.DomainCategory={})).sales_crm="sales_crm",fe.sales_engagement="sales_engagement",fe.sales_enablement="sales_enablement",fe.marketing_email_automation="marketing_email_automation",fe.marketing_content="marketing_content",fe.customer_service="customer_service",fe.customer_surveys_surveys="customer_surveys_surveys",fe.recruiting="recruiting",fe.training_learning="training_learning",fe.project_management="project_management",fe.legal="legal",fe.contractors="contractors",fe.human_resources="human_resources",fe.email="email",fe.business_chat="business_chat",((ge=he||(he={})).SpecialCategory||(ge.SpecialCategory={})).InQuotes="InQuotes",(be=ge.ScopeType||(ge.ScopeType={})).GLOBAL="GLOBAL",be.SESSION="SESSION",be.DOCUMENT="DOCUMENT",(me=ge.MutedByType||(ge.MutedByType={})).MUTED_BY_USER="MUTED_BY_USER",me.NOT_ELIGIBLE_FOR_INLINE="NOT_ELIGIBLE_FOR_INLINE",me.NOT_MUTED="NOT_MUTED",ve=ye||(ye={}),(_e=ve.SuggestionRejectionReason||(ve.SuggestionRejectionReason={})).NOT_RELEVANT="NOT_RELEVANT",_e.WRONG_TONE="WRONG_TONE",_e.INCORRECT="INCORRECT",_e.WRONG_GRAMMAR="WRONG_GRAMMAR",_e.OFFENSIVE="OFFENSIVE",_e.OTHER="OTHER",(Ie||(Ie={})).mock={bundle:"Test bundle",bundleRank:10,group:"Test Group",rank:1,outcome:"Correctness"},(e=>{function t(e){return t=>({s:e.s+t.s,e:e.s+t.e,type:t.type})}function n(e,t=!1){return 0===e.s?a.MZ:n=>(0,a.MZ)({ops:[{retain:e.s,attributes:t?void 0:{type:r.Edit.TypeExt.OPTIONAL_CONTEXT}},...n.ops]})}e.prependContextToHighlight=t,e.prependContext=n,e.toAbs=function(e){return Ae.create({highlights:e.highlights.map(t(e.context)),alternatives:(0,a.zG)(e,p.DT((e=>void 0!==e.alternatives&&e.alternatives.length>0)),p.UI((e=>Me(je({},e),{alternatives:d.UI(n(e.context))(e.alternatives)}))),p.UI(j.Group.fromRawTransform))})}})(we||(we={})),(e=>{let t;let n;var r;(t=e.Id||(e.Id={})).create=e=>e.toString(),(r=n=e.Range||(e.Range={})).rebase=function(e,t){const n=t.transformPosition(e.begin,!0),r=t.transformPosition(e.end,!0),i=(new _.i).insert(e.text).compose(t.slice(e.begin)).reduce(((e,t)=>v.s.isInsert(t)?`${e}${t.insert}`:e),"").slice(0,r-n);return Me(je({},e),{begin:n,end:r,text:i})},r.isSquashed=function(e){return e.begin>=e.end},r.fromAttentionHeatmapMessage=function(e){return Me(je({},e),{id:t.create(e.id)})},e.fromAttentionHeatmapMessage=function(e){return Me(je({},e),{add:e.add.map(n.fromAttentionHeatmapMessage),update:e.update.map(n.fromAttentionHeatmapMessage),remove:e.remove.map(t.create),attentionScore:(0,a.zG)(e,p.DT(Z.AttentionHeatmap.hasAttentionInfo),p.UI((0,xe.ei)("attentionScore"))),showAttentionCard:(0,a.zG)(e,p.DT(Z.AttentionHeatmap.hasAttentionInfo),p.UI((0,xe.ei)("showAttentionCard")))})}})(Oe||(Oe={})),(e=>{e.create=e=>e,e.isSquashed=function(e){return e.highlights.some(r.Range.isEmpty)},e.isValidAfterTransform=function(e,n){const r=t(e),i=t(n);return Boolean((0,M.Hx)(r.highlights,i.highlights,((e,t)=>e.e-e.s==t.e-t.s)))&&(0,M.Hx)(r.alternatives,i.alternatives,((e,t)=>(0,M.Hx)(e.ops.filter((0,m.ff)(v.s.isRetain)),t.ops.filter((0,m.ff)(v.s.isRetain)),v.s.isEqual((()=>!0)))))},e.rebase=function(t,n){return(0,e.create)({highlights:t.highlights.map((e=>({s:n.transformPosition(e.s,!0),e:n.transformPosition(e.e,!0),type:e.type}))),alternatives:(0,a.zG)(t.alternatives,p.UI(j.Group.rebase(n)))})};const t=e=>({highlights:e.highlights,alternatives:(0,a.zG)(e.alternatives,p.g_((()=>[]),(e=>e.alternatives.map((e=>e.delta)))))})})(Ae||(Ae={})),(e=>{var t,n,i;function o(e){return void 0===e.drilldownTree&&void 0===e.knowledgeHubSuggestCorrectionUrl&&void 0===e.knowledgeHubRelatedMaterials&&void 0===e.knowledgeHubPointPeople&&void 0===e.knowledgeHubAliases?e:Me(je({},e),{drilldownTree:void 0===e.drilldownTree?void 0:(0,a.zG)(e.drilldownTree,(e=>"object"==typeof e?e:JSON.parse(e)),ue.Tree.decode,f.MH),knowledgeHubRelatedMaterials:(0,a.zG)(e.knowledgeHubRelatedMaterials,p.ij,p.tS((e=>(0,a.zG)(h.Rx(e,h.KC),h.tS((0,a.ls)(ae.RelatedMaterials.decode,h.Vn(h.KC))),h.g_((e=>(c.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubRelatedMaterials",e),p.YP)),p.G)))),p.FS),knowledgeHubPointPeople:(0,a.zG)(e.knowledgeHubPointPeople,p.ij,p.tS((e=>(0,a.zG)(h.Rx(e,h.KC),h.tS((0,a.ls)(ae.PointPeople.decode,h.Vn(h.KC))),h.g_((e=>(c.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubPointPeople",e),p.YP)),p.G)))),p.FS),knowledgeHubAliases:(0,a.zG)(e.knowledgeHubAliases,p.ij,p.tS((e=>(0,a.zG)(h.Rx(e,h.KC),h.tS((0,a.ls)(ae.Aliases.decode,h.Vn(h.KC))),h.g_((e=>(c.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubAliases",e),p.YP)),p.G)))),p.FS)})}function s(e,t){(0,a.zG)(e.ops,l.Ew((e=>v.s.isInsert(e)&&(0,a.zG)(v.s.getAttr(e,"type"),p.Gg((e=>e===r.Edit.Type.MAIN)))&&"string"==typeof e.insert)),p.UI((({insert:e})=>t(e))))}function u(e){return t=>"InQuotes"===t&&"true"===e.extra_properties.in_quotes}function m(e){return!w(e)&&!O(e)}function I(e){return void 0!==e.begin&&void 0!==e.end&&void 0!==e.highlightBegin&&void 0!==e.highlightEnd}function w(e){return void 0!==e.cardLayout&&void 0!==e.transformJson}function O(e){return"labels"in e&&"subalerts"in e}function A(e,t,n,r){return m(e)?t(e):w(e)?n(e):r(e)}(e.Id||(e.Id={})).create=e=>e.toString(),(t=e.Impact||(e.Impact={})).Critical="critical",t.Advanced="advanced",(n=e.View||(e.View={})).all="all",n.priority="priority",(i=e.Inline||(e.Inline={})).inline="inline",i.not_inline="not_inline",e.parseExtraProperties=o,e.fromAlertMessage=function(t){return Object.assign({},t,je({id:e.Id.create(t.id),cost:Boolean(t.cost)?t.cost:1,extra_properties:o(t.extra_properties)},t.transformJson?{transformJson:we.toAbs(t.transformJson),highlightText:[t.highlightText]}:(0,a.zG)(g.kP(t.subalerts),p.g_((()=>({highlightText:[t.highlightText]})),(e=>(0,a.zG)(function(e,t){return(0,a.zG)(t,p.g_((()=>h.t$(new Error("Got corrupted superalert — the labels are missing"))),(t=>function(e,t){if(e.length<2)return h.t$(new Error("There should be more than one subalert, got "+e.length));const n=t.map((e=>({matches:0,replacements:new Set,label:e}))),i=n.reduce(((e,t)=>(e[t.label]=t,e)),{}),o=g.kP(e[0].transformJson.alternatives);if(n.length>0&&Boolean(p.Wi(o))||!Boolean((0,a.zG)(o,b.wo((e=>n.length===e.length)))))return h.t$(new Error("Alternatives array length must match labels array length"));let l=(0,a.zG)(o,p.UI(d.Su(((t,r)=>(s(r,(e=>n[t].replacements.add(e))),we.prependContext(e[0].transformJson.context)(r))))),p.UI((t=>(i[e[0].label].matches+=1,[d.of(e[0].transformJson.context),t]))));const u=e[0].transformJson.highlights.map(we.prependContextToHighlight(e[0].transformJson.context)),c=[e[0].highlightText];for(let t=1;t<e.length;t++){const o=e[t];if(n.length>0){if(void 0===o.transformJson.alternatives)return h.t$(new Error(`The alternatives are missing from subalert, expected length: ${n.length}`));if(o.transformJson.alternatives.length!==n.length)return h.t$(new Error(`Subalert has incorrect alternatives length: expected ${n.length}, got ${o.transformJson.alternatives.length}`))}l=(0,a.zG)(l,p.UI((([e,t])=>{i[o.label].matches+=1,e.push(o.transformJson.context);for(let e=0;e<t.length;e++){const i=o.transformJson.alternatives[e];s(i,(t=>n[e].replacements.add(t))),t[e]=(0,a.zG)(new _.i(t[e]),(e=>e.compose(e.transform(new _.i(we.prependContext(o.transformJson.context,!0)(i)),!0))),r.AbsAlternative.unsafeFromDelta)}return[e,t]}))),u.push(...o.transformJson.highlights.map(we.prependContextToHighlight(o.transformJson.context))),c.push(o.highlightText)}return h.F2({subalerts:Ae.create({alternatives:(0,a.zG)(l,p.UI((([e,t])=>j.Group.fromSubalerts(e,t)))),highlights:u}),labels:n.map((e=>{var t=e,{replacements:n}=t,r=ze(t,["replacements"]);return Me(je({},r),{replacementTexts:Array.from(n)})})),highlightText:c})}(e,t))))}(e,p.ij(t.labels)),h.fS((e=>(c.C8.Logging.getLogger("coreclients.capi.data").error("Error repacking superalert",e),{highlightText:[]})))))))))},e.isFullSentence=function(e){return"true"===e.full_sentence_rewrite||"true"===e.full_sentence_fluency_rewrite},e.belongsToAnySpecialCategory=function(e){const t=u(e);return-1!==Object.values(he.SpecialCategory).findIndex(t)},e.belongsToSpecialCategory=u,e.withPosition=m,e.hasPosition=I,e.withTransformJson=w,e.withAlternatives=function(e){return w(e)&&p.pC(e.transformJson.alternatives)},e.withSubalerts=O,e.match=A,e.matchBy=function(e,t,n){return r=>A(r,e,t,n)},(e=>{function t(e){return e.end-e.begin}function n(e){return e.highlightEnd-e.highlightBegin}e.shift=function(e,t){return{begin:e.begin+t,end:e.end+t,highlightBegin:e.highlightBegin+t,highlightEnd:e.highlightEnd+t}},e.rebase=function(e,t){return{begin:t.transformPosition(e.begin,!0),end:t.transformPosition(e.end,!0),highlightBegin:t.transformPosition(e.highlightBegin,!0),highlightEnd:t.transformPosition(e.highlightEnd,!0)}},e.getReplacementLength=t,e.getHighlightLength=n,e.isSquashed=function(e){return 0===t(e)||0===n(e)},e.hasEqualLength=function(e,r){return t(e)===t(r)&&n(e)===n(r)}})(e.Position||(e.Position={})),e.isPlagiarism=function(e){return void 0!==e.cardLayout&&"Originality"===e.cardLayout.outcome},e.isOneGap=function(e){return void 0!==e.extra_properties&&"gap_transform"in e.extra_properties},e.isTakeaway=function(e){return void 0!==e.extra_properties&&"takeawayScore"in e.extra_properties},e.hasDrilldownTree=function(e){return void 0!==e.extra_properties&&"drilldownTree"in e.extra_properties},e.isShortenIt=function(e){return void 0!==e.extra_properties&&"shorten_it"in e.extra_properties},e.isToneAI=function(e){return void 0!==e.extra_properties&&"tone_slider"in e.extra_properties},e.isEthicalAI=function(e){return void 0!==e.extra_properties&&"ethical_ai_external_link"in e.extra_properties},e.isCitationDetection=function(e){return void 0!==e.extra_properties&&"citation_detection"in e.extra_properties},e.isSuggestedSnippet=function(e){return void 0!==e.extra_properties&&"suggested_snippet_text"in e.extra_properties&&"suggested_snippet_lib_link"in e.extra_properties},e.isKnowledgeHubSuggestedTerm=function(e){return"KnowledgeHub/SuggestedTerm/SuggestedTerm"===e.pname},e.isHidden=function(e){return!0===e.hidden},e.isRawAlert=function(e){if(!Boolean(e))return!1;const t=e;return Number.isInteger(t.rev)&&A(t,(e=>Number.isInteger(e.begin)&&Number.isInteger(e.end)&&Number.isInteger(e.highlightBegin)&&Number.isInteger(e.highlightEnd)),(e=>e.transformJson.highlights.length>0),(e=>e.labels.length>0))},e.mock={id:e.Id.create(""),rev:0,pname:"Spelling/BritishVsAmerican/BrInstOfAm/BrInstOfAm",group:"ContextualSpelling",point:"BrInstOfAm",category:"BritishVsAmerican",categoryHuman:"British vs American",hidden:!1,text:"centralise",todo:"correct",minicardTitle:"correct",title:"Inconsistent spelling",cost:1,transforms:["<span class='gr_grammar_del'>centralise</span>→<span class='gr_grammar_ins'>centralize</span>"],details:"<p>One of&nbsp;the most obvious differences between American and British English is&nbsp;the spelling of&nbsp;certain words such as&nbsp;<b>color/colour, learned/learnt,</b> and <b>toward/towards</b>. Typically, the spelling of&nbsp;words like these only varies by&nbsp;one or&nbsp;two letters. In&nbsp;the interest of&nbsp;consistency and clarity, you should use the spelling that will be&nbsp;more familiar to&nbsp;your intended audience.\n",explanation:"<p>The word <b>centralise</b> is&nbsp;a&nbsp;British English spelling. In&nbsp;the interest of&nbsp;consistency, consider replacing it&nbsp;with the American English spelling.\n",examples:'<p><span class="grey">British: I&nbsp;wish you success in&nbsp;all your endeavours.</span><br/><span class="grey">American: I&nbsp;wish you success in&nbsp;all your endeavors.</span><br/><p><span class="grey">British: Sweet yoghurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><span class="grey">American: Sweet yogurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><p><span class="grey">British: Serena moved towards the blinking light.</span><br/><span class="grey">American: Serena moved toward the blinking light.</span><br/>',free:!0,impact:"critical",highlightBegin:5092,highlightEnd:5102,highlightText:[""],begin:5092,end:5102,replacements:["centralize"],extra_properties:{priority:"2"},cardLayout:{bundle:"Fix spelling and grammar",bundleRank:10,group:"Spelling",rank:10,outcome:"Correctness"},transformJson:Ae.create({highlights:[{s:5092,e:5102}],alternatives:p.YP}),view:"all",inline:"inline"},e.mockPlagiarism={id:e.Id.create(""),rev:0,transforms:[],title:"Citation audit",cost:1,details:"",explanation:"",examples:"",free:!1,impact:"advanced",hidden:!1,todo:"",minicardTitle:"",cardLayout:{bundle:"Plagiarism",bundleRank:10,group:"Unoriginal content",rank:0,outcome:"Originality"},category:"Plagiarism",categoryHuman:"Unoriginal content",begin:156,end:697,text:"",group:"Plagiarism",pname:"Plagiarism/Plagiarism/UnoriginalContent",point:"UnoriginalContent",highlightBegin:156,highlightEnd:697,highlightText:[""],replacements:[],extra_properties:{},transformJson:Ae.create({highlights:[{s:1,e:40}],alternatives:p.YP}),view:"all",inline:"not_inline"},e.mockWithSubalerts={id:e.Id.create(""),point:"Capitalization",title:"Inconsistent capitalization",details:"<p>For certain words, capitalization preferences can vary between style guides. <i>Internet</i> was once routinely capitalized, for example. However, in recent years many style guides have begun advising writers to lowercase the word: <i>internet</i>. Whether you choose to capitalize a particular term or not, it’s best to choose one style and use it consistently throughout the same document.\n",explanation:"<p>You wrote <b>Country</b> once and <b>country</b> twice. Both spellings are acceptable, but it’s best not to switch back and forth. Choose whether or not to capitalize this word throughout your text.\n",examples:'<p><span class="grey">Inconsistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>Internet</b>, too.</span><br/>',todo:"capitalize consistently",minicardTitle:"capitalize consistently",free:!1,hidden:!1,labels:[{label:"Country",matches:1,replacementTexts:["Country"]},{label:"country",matches:2,replacementTexts:["country"]}],highlightText:["Country","country"],cost:1,subalerts:Ae.create({highlights:[{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],alternatives:p.G(j.Group.fromSubalerts([{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],[r.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:r.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:r.Edit.Type.MAIN}},{insert:"Country",attributes:{type:r.Edit.Type.MAIN}}]}),r.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:r.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:r.Edit.Type.MAIN}},{insert:"country",attributes:{type:r.Edit.Type.MAIN}}]})]))}),category:"Inconsistency",text:"",group:"Style",pname:"Style/Inconsistency/Capitalization/Capitalization",rev:0,replacements:[],impact:"advanced",extra_properties:{priority:"4"},cardLayout:{bundle:"Keep your style consistent",bundleRank:10,group:"Consistency",rank:160,outcome:"Correctness"},categoryHuman:"Text Inconsistencies",updatable:!0,view:"all",inline:"not_inline"},e.clearUserTextFields=function(e){const t=e,{text:n,replacements:r,highlightText:i,transformJson:o,transforms:s,details:a,explanation:l,examples:u}=t;return ze(t,["text","replacements","highlightText","transformJson","transforms","details","explanation","examples"])},e.unsafeGetPosition=function(e){return(0,y.kG)(I(e),"raw alert should have a position"),e},e.unsafeGetTransformJson=function(e){return(0,y.kG)(w(e),"raw alert should have transformJson"),e}})(Se||(Se={}));var De;(De||(De={})).willRemoveAlert=function(e){return"IGNORE"===e||"OFFENSIVE_CONTENT"===e||"WRONG_SUGGESTION"===e||"ADD_TO_DICTIONARY"===e||"LIKE"===e||"DISLIKE"===e||"ACKNOWLEDGED"===e||"HIDE"===e};var Ue,Fe,Le;(Ue||(Ue={})).generatePoints=function(e,t,n){const r=(e,t)=>Math.max(Math.trunc(e/t),(0,m.TN)(e));return(0,M.j6)(r(e,2),(e=>(0,M.j6)(r(t,3),(t=>({value:Math.random()*n,alertIds:[],footprint:`${100*e+t}`})))))},((Le=Fe||(Fe={})).Id||(Le.Id={})).create=e=>e.toString();var Ne,Be,He;(Ne||(Ne={})).is=e=>t=>t.check===e,(He=Be||(Be={})).is=function(...e){return t=>e.some((e=>e===t.kind))},He.isUserFeedbackWithGeneralScore=function(e){var t;return Boolean(null==(t=e.outcomeScores)?void 0:t.GeneralScore)},He.isUserFeedbackWithScoreStatus=function(e){return Boolean(e.scoreStatus)};var Ve=n(44755),We=n(70051),Je=n(75058),Ye=n(68330),qe=n(78129),$e=n(59179),Ke=n(90572),Ze=n(79451),Xe=n(88603),Qe=n(38873),et=n(23601),tt=n(62396),nt=n(27383);function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){if(e){if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}var ct=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new nt.J,o=this;it(this,e),st(this,"_getByRawAlertId",void 0),st(this,"popoverManager",void 0),st(this,"state",void 0),st(this,"_sduiManager",void 0),st(this,"_subs",void 0),st(this,"_log",void 0),st(this,"alertIdResolver",void 0),st(this,"findFirstCardWithContent",void 0),st(this,"onSessionStarted",void 0),st(this,"onFirstCheckingFinished",void 0),st(this,"notifyAlertsChanged",void 0),st(this,"loadItems",void 0),st(this,"_toRemovedAlertIdsByClient",void 0),this._getByRawAlertId=r,this.popoverManager=i,this._subs=new Ye.w.Keeper,this._log=c.C8.Logging.getLogger("SDUIManager",c.zW.i.TRACE,c.zW.T.Manager.getColor()),this.findFirstCardWithContent=function(e){return o._sduiManager.findFirstCardWithContent(e)},this.onSessionStarted=function(){return o._sduiManager.onSessionStarted()},this.onFirstCheckingFinished=function(){return o._sduiManager.onFirstCheckingFinished()},this.notifyAlertsChanged=function(){return o._sduiManager.notifyAlertsChanged()},this.loadItems=function(e){return o._sduiManager.loadItems(e)},this._toRemovedAlertIdsByClient=function(e){var t=function(e,t,n){return(0,m.Kg)(Ve.bZ.isRemovedByTextChange,Ve.bZ.isDuplicated)(t.alert)?(0,a.zG)(n,p.ij,p.tS((function(e){return e.alert.rawId})),p.wp((function(){return t.alert.rawId})),p.g_((function(){return e}),(function(n){var r,i=Ve.bZ.isRemovedByTextChange(t.alert)?Qe.i5.TextChange:Qe.i5.RemoveDuplicate;return o._log.debug("[Optimistic update] alert ".concat(Ve.bZ.State.Type.REMOVED," by ").concat(i," ").concat(We.h.show.show(t))),e.set(i,lt(null!==(r=e.get(i))&&void 0!==r?r:[]).concat([et.j.AlertId.from(n)]))}))):e};return e.pipe(qe.G(),$e.U((0,a.og)(Je.p.diff)),$e.U((function(e){return Ze.vh.reduce(new Map,(function(e,n){return t(e,n)}),(function(e,n,r){return t(e,r,n)}),a.yR)(e)})),Ke.h((function(e){return(0,a.zG)(Array.from(e.values()),l.xH,(0,m.ff)(l.xb))})))};var s=n.pipe(Ke.h(tt.e.isSduiEvent),$e.U(Qe.al.fromSource(Qe.i5.CAPI))),u=(0,a.ls)(Se.Id.create,this._getByRawAlertId,p.UI((function(e){return et.j.AlertId.from(e.id)})));this._sduiManager=new Xe.G(s,u,i),this.alertIdResolver=u,this.state=this._sduiManager.state,this._subs.push(t.subscribe((function(e){return o._sduiManager.notifyAlertsChanged()})),this._toRemovedAlertIdsByClient(t).subscribe((function(e){return e.forEach((function(e,t){return o.pushRemovedAlerts([e,t])}))})),n.pipe(Ke.h(Be.is("session_started")),Ke.h((function(e){return e.isNewSession}))).subscribe((function(e){return o._sduiManager.onSessionStarted()})),n.pipe(Ke.h(Be.is("finish")),Ke.h((function(e){return 0===e.revision}))).subscribe((function(e){return o._sduiManager.onFirstCheckingFinished()})))}var t,n,r;return t=e,(n=[{key:"onAlertsRefEmpty",get:function(){return this._sduiManager.onAlertsRefEmpty}},{key:"pushRemovedRoot",value:function(e){this._sduiManager.pushRemovedRoot(e)}},{key:"pushRemovedAlerts",value:function(e){var t=at(e,2),n=t[0],r=t[1];this._sduiManager.pushRemovedAlerts([n,r])}},{key:"pushRemovedDenaliAlerts",value:function(e){var t=at(e,2),n=t[0],r=t[1];this._sduiManager.pushRemovedAlerts([n.map(et.j.AlertId.from),r])}},{key:"pushSwitchView",value:function(e){this._sduiManager.pushSwitchView(e)}},{key:"resolveStrongAlertRefAlerts",value:function(e){return this._sduiManager.resolveStrongAlertRefAlerts(e)}},{key:"flush",value:function(){this._sduiManager.flush()}},{key:"dispose",value:function(){this._subs.dispose(),this._sduiManager.dispose()}}])&&ot(t.prototype,n),r&&ot(t,r),e}()},56477:(e,t,n)=>{n.d(t,{_:()=>H});var r=n(24332),i=n(90023),o=n(13391),s=n(74822),a=n(55341),l=n(62552),u=n(68330),c=n(64271),p=n(59179),d=n(68340),f=n(13712),h=n(10883),g=n(90572),b=n(954),m=n(78129),y=n(90517),v=n(79451),_=n(7773),I=n(31491),w=n(64297),O=n(97225),A=n(48886),S=n(14944),x=n(58303),T=n(84358),E=n(12518),C=n(17572),P=n(58623),G=n(72111),k=n(23601),R=n(98259),j=n(32026),M=n(60795),z=n(36727);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){F(e,t,n[t])}))}return e}function N(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F(this,"onFeedRemove",new s.x),F(this,"onFeedEmpty",new s.x),F(this,"_header",new a.t(1)),F(this,"_footer",new a.t(1)),F(this,"_feeds",new Map),F(this,"_currentCards",o.h.create(j.l.empty)),F(this,"_feed",new l.X(void 0)),F(this,"_feedStack",new l.X([])),F(this,"_cardIdToFocus",new s.x),F(this,"_subs",new u.w.Keeper),F(this,"_log",G.C8.Logging.getLogger("SDUIFeedManager",G.zW.i.TRACE,G.zW.T.Manager.getColor())),F(this,"_forceFeedInternalInfo",new s.x),F(this,"_getFeedContent",(0,i.ls)(this._getFeed,E.UI((function(e){return e.content})),C.MH)),F(this,"_changeFeed",(function(e){n._feed.next(e),(0,i.zG)(e.cards,j.l.applyDiff,A.UI(_.T.recover((function(e){return n._log.error("conflicts on diff apply",e)}))),(function(t){var r=n._currentCards.get(),i=t(r);if(r.entries.size>0&&0===i.entries.size){var o=n._feeds.get(e.feedId);void 0!==o&&n.onFeedEmpty.next(o)}n._currentCards.modify(t)}))}));var r=c.T(this._feedStack.pipe(p.U((function(e){return x.ij(e[e.length-1])})),d.oA,p.U((function(e){return n._getFeedInternalInfo(e.feedId,e.focusedCardId)}))),this._forceFeedInternalInfo),I=c.T(this._feedStack.pipe(f.g("length"),p.U((function(e){return x.ij(e[e.length-1])})),d.oA,p.U((function(e){return n._getFeedInternalInfo(e.feedId,e.focusedCardId)}))),this._forceFeedInternalInfo),w=this._cardIdToFocus.pipe(h.M(this._feedStack.pipe(p.U((function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.focusedCardId})))),g.h((function(e){var t=B(e,2);return t[0]!==t[1]})),p.U((function(e){return B(e,1)[0]})),h.M(this.feed),p.U((function(e){var t=B(e,2),r=t[0],i=t[1];return n._getFeedInternalInfo(i.feedId,k.j.Item.Id.from(r))}))),O=t.pipe(b.O(R.a.empty),m.G(),p.U((function(e){var t=B(e,2),n=t[0],r=t[1];return R.a.diff(n,r)})),p.U((function(e){return n._processSDUIItems(e)})),h.M(r),p.U((function(e){var t=B(e,2),n=t[0],r=t[1],o=r.feedOrd,s=r.feedFilter;return{feedId:r.feedId,cards:(0,i.zG)(n,v.vh.filter(s,(function(e,t){return s(t)}),s)),feedOrd:o,itemIdToSelect:x.YP}}))),S=c.T(I,w).pipe(h.M(t,this._currentCards),p.U((function(e){var t=B(e,3),n=t[0],r=n.feedOrd,o=n.feedFilter,s=n.feedId,a=n.itemIdToSelect,l=t[1],u=t[2],c=(0,i.zG)(l,j.l.iso.unwrap,(function(e){return(0,i.zG)(e.entries,P.hX(o))}));return{feedId:s,cards:j.l.diffFromEntries(u.entries,c),feedOrd:r,itemIdToSelect:a}})));this._subs.push(c.T(O,S).subscribe(this._changeFeed)),this._subs.push(I.pipe(y.j("header")).subscribe((function(e){return n._header.next(e)}))),this._subs.push(I.pipe(y.j("footer")).subscribe((function(e){return n._footer.next(e)})))}var t,n,z;return t=e,n=[{key:"header",get:function(){return this._header.asObservable()}},{key:"footer",get:function(){return this._footer.asObservable()}},{key:"feed",get:function(){return this._feed.pipe(g.h(I.$K))}},{key:"currentFeed",get:function(){return x.ij(this._feed.getValue())}},{key:"_getFeed",value:function(e){var t=this._feeds.get(e);return void 0===t?E.t$("Cannot switch to feed. Feed with id '".concat(e,"' not found.")):E.F2(t)}},{key:"_getFeedInternalInfo",value:function(e,t){var n=this._getFeedContent(e);return{feedId:e,feedFilter:function(e){var t=V(e.content);return!x.Wi(t)&&n.filtering.reduce((function(e,n){return!1===e?e:(0,i.zG)(t,x.tS((function(e){return x.ij(e[n.property])})),x.g_((function(){return n.condition===M.j2.NotEqualTo}),(function(e){return n.condition===M.j2.EqualTo?e===n.value:e!==n.value})))}),!0)},feedOrd:(0,r.g_)(S.iP())(n.ordering.map((function(e){return(0,i.zG)(S.Mh,S.Uz((0,i.ls)(V,x.tS((function(t){return x.ij(t[e.orderBy])})),x.g_((function(){return Number.MAX_VALUE}),(function(t){return e.direction===M.di.Asc?t:-1*t})))))}))),itemIdToSelect:x.G(t),header:n.header,footer:x.ij(n.footer)}}},{key:"pushFeed",value:function(e,t){var n=this;return(0,i.zG)(this._getFeed(e),E.UI((function(){var r=n._feedStack.getValue();return r=r.concat({feedId:e,focusedCardId:t?k.j.Item.Id.from(t):void 0}),n._feedStack.next(r),null})))}},{key:"popFeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.YP,t=this,n=this._feedStack.getValue();if(n.length>1)return n=n.slice(0,n.length-1),void this._feedStack.next(n);(0,i.zG)(e,x.g_((function(){return t._log.warn("Invoked `popFeed()` when there are less than 2 feeds in the feed stack, this is a no-op. No fallback feed provided.")}),(function(e){t.pushFeed(k.j.Item.Id.from(e.feedId),e.cardId),t._log.debug("Invoked 'popFeed()' when there are less than 2 feeds in the feed stack. Switching to the provided fallback feed. ".concat(JSON.stringify(e)))})))}},{key:"focusCard",value:function(e){var t=this;return(0,i.zG)(this.currentFeed,E.Yo((function(){return"Cannot focus card when there is no active feed."})),E.UI((function(){return t._cardIdToFocus.next(e),null})))}},{key:"notifyCardFocused",value:function(e){var t=this._feedStack.getValue(),n=t[t.length-1];(0,w.kG)(void 0!==n,"notifyCardFocused: Feed stack cannot be empty."),t=t.slice(0,t.length-1).concat(N(L({},n),{focusedCardId:e})),this._feedStack.next(t)}},{key:"_processSDUIItems",value:function(e){var t=this;return v.vh.fromMutation((function(n){(0,i.zG)(e,v.vh.forEach((function(e){void 0!==t._feeds.get(e.id)?(t._feeds.delete(e.id),(0,i.zG)(t.currentFeed,x.hX((function(t){return t.feedId.toString()===e.id.toString()})),T.bw((function(){return t.onFeedRemove.next(e)})))):n.set(e.id,O.t$(e))}),(function(e,r){if("assistantFeed"===r.content.type){var o=r.content;void 0!==t._feeds.get(e.id)?(t._feeds.set(e.id,N(L({},r),{content:o})),(0,i.zG)(t.currentFeed,x.hX((function(t){return t.feedId===e.id})),x.UI((function(e){t._header.next(o.header),t._footer.next(x.ij(o.footer))})))):t._log.warn("Feed with id '".concat(e.id,"' not found for update"))}else n.set(e.id,O.Hk(e,r))}),(function(e){if("assistantFeed"===e.content.type){var r=e.content;t._feeds.set(e.id,N(L({},e),{content:r}))}else n.set(e.id,O.F2(e))})))}))}},{key:"dispose",value:function(){this._subs.dispose()}}],n&&U(t.prototype,n),z&&U(t,z),e}();function V(e){var t=!0,n=!1,r=void 0;try{for(var i,o=z.ab.traverse(e)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if("longFormCard"===s.type)return x.G(s.feedProperties);if("assistantCard"===s.type&&s.properties)return x.G(s.properties)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return x.YP}},99373:(e,t,n)=>{n.d(t,{i:()=>r});var r,i=n(90023),o=n(58303),s=n(84358),a=n(31491),l=n(12518),u=n(72111),c=n(66337),p=n(83585),d=n(36727),f=n(60795);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){var t=(0,a.HP)(u.C8.Logging.getLogger);!function(e){e.create=function(e){var n=t("SingleCardAssistant.Transformers.disablePrevNextButtons");return function(t){var r=t.state,a=t.metadata;if(!c.nL.hasItems(r))return n.trace("state has no feed items, returning original state"),l.t$({state:r,metadata:a});var u=r;return(0,i.zG)(u.currentLens.cardIndex,o.tS((function(e){return(0,i.zG)(c.In.getActiveItem(r.currentLens),o.UI((function(t){return(0,i.bc)(t,e)})))})),o.UI((function(t){var n=y(t,2),i=n[0],a=n[1];return c.nL.Prism.getLensWithItems().modify((function(t){if(!p.e.isSDUIItem(i)||!o.pC(i.cardDSL))return t;var n=e.clone(i),l=s.MH(n.cardDSL),u=!1,c=d.ab.map(l,(function(e){if("button"===e.type&&e.name.value===f.MU.ButtonPrev){var t=0===a?f.BN.Disabled:f.BN.Enabled;return u=u||t!==e.state,m(b({},e),{state:t})}if("button"===e.type&&e.name.value===f.MU.ButtonNext){var n=a===r.currentLens.items.size-1?f.BN.Disabled:f.BN.Enabled;return u=u||n!==e.state,m(b({},e),{state:n})}return e}));return o.pC(c)&&u?(n=Object.assign(n,{cardDSL:c}),m(b({},t),{items:t.items.add(n)})):t}),u)})),o.fS((function(){return r})),(function(e){return l.t$({state:e,metadata:a})}))}}}(e.DisablePrevNextButtons||(e.DisablePrevNextButtons={}))}(r||(r={}))},51084:(e,t,n)=>{n.d(t,{q:()=>B});var r=n(90023),i=n(64297),o=n(58303),s=n(84358),a=n(12518),l=n(59833),u=n(86399),c=n(72111),p=n(78741),d=n(44755),f=n(25437),h=n(92516),g=n(64318),b=n(66337),m=n(9164),y=n(68330),v=n(74822),_=n(24666),I=n(59179),w=n(81446),O=n(90572),A=n(9273),S=n(36344),x=n(60812),T=n(23601),E=n(70188),C=n(83585),P=n(63952),G=n(37087),k=n(13391);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}var N,B=function(){function e(t,n,i,s,a,l,d,f){var h,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new p.A,m=this;j(this,e),z(this,"_checksFeedCapabilities",void 0),z(this,"_lensState",void 0),z(this,"_alertReader",void 0),z(this,"_capiClient",void 0),z(this,"_platformEnvironment",void 0),z(this,"_sduiViewModel",void 0),z(this,"sduiActionEvents",void 0),z(this,"_sduiAlertIdResolver",void 0),z(this,"_log",void 0),z(this,"_subs",void 0),z(this,"actionEvents",void 0),z(this,"_focusedItem",void 0),z(this,"_mapToDenaliAlerts",void 0),this._checksFeedCapabilities=n,this._lensState=i,this._alertReader=l,this._capiClient=d,this._platformEnvironment=g,this._log=c.C8.Logging.getLogger("SDUICardsViewModelImpl",c.zW.i.DEBUG),this._subs=new y.w.Keeper,this.actionEvents=new v.x,this._focusedItem=this._lensState.view((function(e){return b.nL.hasItems(e)?(0,r.zG)(e.currentLens.cardIndex,o.tS((function(t){return e.currentLens.items.getAt(t)}))):o.YP})),this._mapToDenaliAlerts=function(e){return(0,r.zG)(e,u.fw(o.Kw)((function(e){return m._alertReader.getById(m._mapToDenaliAlertId(e))})),o.hX(u.Od))},this._sduiAlertIdResolver=(0,G.X)(s.alertIdResolver,this._log);var O=k.h.create(o.YP);this._sduiViewModel=new G.x(t,s,a,d,O,g),this.sduiActionEvents=this._sduiViewModel.sduiActionEvents,(h=this._subs).push.apply(h,F(this._integrateCardsViewModel(f)).concat([(0,r.zG)(this._focusedItem,_.x((function(e,t){return o.Eh(x.s.eqById).equals(e,t)})),I.U(o.tS(o.DT(C.e.isSDUIItem))),I.U(o.UI((function(e){return T.j.Item.Id.from(e.id)})))).subscribe(w.wW(O)),this._sduiViewModel]))}var t,n,S;return t=e,n=[{key:"_integrateCardsViewModel",value:function(e){return[this.actionEvents.subscribe(e.actionEvents),e.actionEvents.pipe(O.h(g.t.isSduiCardAction)).subscribe(this.sduiActionEvents)]}},{key:"_sduiActionsHandler",value:function(){var e=this;return this.sduiActionEvents.pipe(A.skipBy(g.t.eq),I.U((function(t){var n=t.cardId,l=t.actions,c=t.scope;return function(t){return e._log.info("sdui card action:",{cardId:n,actions:l}),(0,r.zG)(l,u.u4(t,(function(t,l){switch(l.type){case"notify":case"nextCard":case"prevCard":case"openSettings":case"openToneDetector":case"openFeedback":case"upgradeToPremium":case"openLearnMore":case"transition":case"openCreateSnippetModal":case"nativeOpenAssistant":case"showHighlights":case"hideHighlights":case"selectAlternative":case"openLink":case"copyToClipboard":case"pushAssistantFeed":case"popAssistantFeed":case"focusAssistantCard":case"switchView":case"newRevision":case"stopApplyingAlerts":case"closePopover":case"interactPopover":case"openGrammarlyGo":case"enablePlagiarismCheck":case"disablePlagiarismCheck":case"enableWritingExpertCheck":case"disableWritingExpertCheck":case"openPerformanceScore":case"nativeOpenUserSatisfactionFeedback":case"enableAudienceAdaptCheck":case"disableAudienceAdaptCheck":case"enableAiStudioCheck":case"disableAiStudioCheck":return t;case"removeRoot":return(0,r.zG)(t.currentLens.items.get(n),o.UI((function(e){return e.value})),o.UI(e._checksFeedCapabilities.remove(r.W8,r.W8)),o.UI((function(e){return b.nL.Prism.getLens().compose(m.v.Prism.items).set(t.currentLens.items.modifyWith([[e.id,e]],(function(){return e})),t)})),o.fS((0,r.a9)(t)));case"applyAlerts":return(0,r.zG)(t.currentLens.items.get(n),o.UI((function(e){return e.value})),a.Yo((function(){return new Error("unknown cardId: ".concat(n))})),a.Pd((function(t){return e._log.error("error in processing applyAlerts action",t)}),(function(t){(0,r.zG)(e._sduiAlertIdResolver(c.alertRefs),s.bw((function(n){requestAnimationFrame((function(){(0,r.zG)(n,e._mapToDenaliAlerts,o.UI(u.UI((function(n){return e.actionEvents.next({type:h.lY.Type.alertApply,id:t.id,eligibleForSurvey:n.acceptSurvey,eligibleForGbPrompt:n.gbPrompt,alertId:n.id,alternativeIndex:l.alternativeIndex,cardType:h.lY.getCardType({activeAlert:E.$.fromModel(n)})})}))))}))})))})),(function(){return t.patch({alertSource:d.l$.sidebar})}));case"closeCard":return t.patch({currentLens:b.nL.hasItems(t)?e._checksFeedCapabilities.unselectItem()(t.currentLens):t.currentLens,switchOrder:"lensOrder",alertSource:d.l$.sidebar});case"removeAlerts":return(0,r.zG)(e._sduiAlertIdResolver(c.alertRefs),s.bw((function(t){requestAnimationFrame((function(){(0,r.zG)(t,e._mapToDenaliAlerts,o.UI(u.UI((function(t){return e.actionEvents.next({type:h.lY.Type.alertIgnore,id:n,alertId:t.id,eligibleForSurvey:t.dismissSurvey})}))))}))}))),t.patch({alertSource:d.l$.sidebar});case"highlightAlert":return(0,r.zG)(e._sduiAlertIdResolver(c.alertRefs),o.tS(e._mapToDenaliAlerts),o.UI((function(e){if(!b.nL.hasItems(t))return t;var n=function(e,t){return function(n){return(0,r.zG)(n.items.update(e,(function(e){return(0,r.zG)(e,o.DT(P.P.isAlertRefSDUIItem),o.tS(P.P.Capabilities.setActiveAlertId(t)),o.tS(P.P.Capabilities.setActiveHighlightIndex(l.highlightIndex)),o.fS((0,r.a9)(e)))})),a.g_((function(){return n}),(function(e){return D(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}({},n),{items:e})})))}},i=e[0];return(0,r.zG)(b.In.getActiveItem(t.currentLens),o.UI((function(e){return b.nL.Prism.getLensWithItems().modify(n(e.id,i.id),t)})),o.UI((function(e){return e.patch({alertSource:d.l$.sidebar})})),o.fS((0,r.a9)(t)))})),o.fS((0,r.a9)(t)));default:(0,i.L0)(l)}})))}})))}},{key:"getApplicatorEffects",value:function(){return(0,r.zG)([[this._sduiActionsHandler(),"sduiActions"]],l.UI((function(e){var t=U(e,2),n=t[0],r=t[1];return{id:"cardsViewModel.effects.".concat(r),when:f.R.isWithAlertsId,what:b.nL.Effect.Applicator.create(n)}})))}},{key:"onAssistantClose",value:function(){this._sduiViewModel.onAssistantClose()}},{key:"dispose",value:function(){this._subs.dispose()}},{key:"_mapToDenaliAlertId",value:function(e){return"".concat(e)}}],n&&M(t.prototype,n),S&&M(t,S),e}();!function(e){e.itemsLens=b.nL.Prism.getLens().compose(m.v.Prism.items),e.createLegacy=function(e,t,n,i,l,u,c){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new p.A,f={enablePlagiarismSearch:function(){return Promise.resolve(a.F2(void 0))},disablePlagiarismSearch:function(){return Promise.resolve(a.F2(void 0))},enableWritingExpert:function(){return Promise.resolve(a.F2(void 0))},disableWritingExpert:function(){return Promise.resolve(a.F2(void 0))},requestWritingExpert:function(){return function(){return Promise.resolve(a.F2(void 0))}}};return(0,r.zG)(s.gz(e,i,l),o.g_((function(){return new N.Mock}),(function(e){var r=U(e,3),i=r[0],o=r[1],s=r[2];return new B(i,t,n,o,s,u,f,c,d)})))};e.Mock=function e(){j(this,e),z(this,"actionEvents",new v.x),z(this,"sduiActionEvents",new v.x),z(this,"sideEffect",{id:"cardsViewModelMock",when:f.R.isWithAlertsId,what:b.nL.Effect.Applicator.create(S.E)}),z(this,"getApplicatorEffects",(function(){return[{id:"cardsViewModelMock",when:f.R.isWithAlertsId,what:b.nL.Effect.Applicator.create(S.E)}]})),z(this,"onAssistantClose",r.Q1),z(this,"dispose",r.Q1)}}(N||(N={}))}}]);